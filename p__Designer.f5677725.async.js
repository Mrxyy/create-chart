(self["webpackChunkcreate_chart"]=self["webpackChunkcreate_chart"]||[]).push([[9872],{3287:function(){},53357:function(e){e.exports={"design-config-wrapper-item-title":"design-config-wrapper-item-title___3U_ea","design-config-wrapper-item-title-content":"design-config-wrapper-item-title-content___1s9un","design-config-wrapper-item-title-content-main":"design-config-wrapper-item-title-content-main___1FQ4s","design-config-wrapper-item-title-content-sub":"design-config-wrapper-item-title-content-sub___4s6fU","design-config-wrapper-item-content":"design-config-wrapper-item-content___ye1Zb","design-config-wrapper-item-content-main":"design-config-wrapper-item-content-main___153jq","design-config-wrapper-header":"design-config-wrapper-header___3bh4d","design-config-wrapper-header-3":"design-config-wrapper-header-3___DPFiP","design-config-wrapper-header-2":"design-config-wrapper-header-2___1tlFL","design-config-wrapper-header-1":"design-config-wrapper-header-1___1Adxr"}},56193:function(e){e.exports={"designer-page-background":"designer-page-background___28YAf"}},16133:function(e){e.exports={"ruler-guide-line-horizontal":"ruler-guide-line-horizontal___3KM2A","ruler-guide-line-vertical":"ruler-guide-line-vertical___2nz_E","ruler-guide-line-wrapper-horizontal":"ruler-guide-line-wrapper-horizontal___3J0Si","ruler-guide-line-wrapper-vertical":"ruler-guide-line-wrapper-vertical___C5hsX","ruler-guide-line-flag-horizontal":"ruler-guide-line-flag-horizontal___3V7o_","ruler-guide-line-flag-vertical":"ruler-guide-line-flag-vertical___1_J9g"}},10661:function(e){e.exports={"component-exchange-screen-flag-drawer":"component-exchange-screen-flag-drawer___2EZ0R","component-exchange-screen-flag-drawer-loading":"component-exchange-screen-flag-drawer-loading___2oLsB","component-exchange-screen-flag-drawer-footer":"component-exchange-screen-flag-drawer-footer___scFbh","component-exchange-screen-flag-component-list-item":"component-exchange-screen-flag-component-list-item___1rOlF"}},1184:function(e){e.exports={"design-header-action-component-search":"design-header-action-component-search___2pYYh"}},38009:function(e){e.exports={"design-header-action-layer-search":"design-header-action-layer-search___2Oy-6","design-header-action-layer-search-active":"design-header-action-layer-search-active___3QxNe"}},18227:function(e){e.exports={"design-header-action":"design-header-action___28cFx"}},70841:function(e){e.exports={"designer-page-header":"designer-page-header___3e-4m","designer-page-header-title":"designer-page-header-title___ywErJ","designer-page-header-title-active":"designer-page-header-title-active___2sqPH"}},81954:function(e){e.exports={"page-design-left-component-list":"page-design-left-component-list___Sr425","page-design-left-component-list-content":"page-design-left-component-list-content___1Bh2d","page-design-left-component-list-content-border":"page-design-left-component-list-content-border___3O_ye"}},74734:function(e){e.exports={"design-layer-manage-content-header":"design-layer-manage-content-header___2mOC4"}},20345:function(e){e.exports={"layer-action-bar-header":"layer-action-bar-header___u94zh","layer-action-bar-footer":"layer-action-bar-footer___1RFdM"}},9645:function(e){e.exports={"design-page-layer-item":"design-page-layer-item___2QAXe","design-page-layer-item-name":"design-page-layer-item-name___3gzAy","design-page-layer-item-name-basic":"design-page-layer-item-name-basic___xYJpL","design-page-layer-item-name-size":"design-page-layer-item-name-size___21E0r","design-page-layer-item-action":"design-page-layer-item-action___KFLN3","design-page-layer-item-hover":"design-page-layer-item-hover___SCPJ5","design-page-layer-item-mode-icon":"design-page-layer-item-mode-icon___1AST5","design-page-layer-item-icon":"design-page-layer-item-icon___1MXr7","design-page-layer-item-icon-leaf":"design-page-layer-item-icon-leaf___3qkwG","design-page-layer-item-mode-list":"design-page-layer-item-mode-list___1ONrY","design-page-layer-item-disabled":"design-page-layer-item-disabled___8jVns","design-page-layer-item-lock":"design-page-layer-item-lock___llXHq"}},19728:function(e){e.exports={"layer-manage-content":"layer-manage-content___3UNYh","layer-manage":"layer-manage___1eszS","layer-manage-placeholder":"layer-manage-placeholder___2sN2C"}},71973:function(e){e.exports={"design-layer-manage-wrapper":"design-layer-manage-wrapper___342tO","design-layer-manage-content":"design-layer-manage-content___3Sw2S","design-layer-manage-content-cover":"design-layer-manage-content-cover___3v9PH","design-layer-manage-wrapper-transition":"design-layer-manage-wrapper-transition___3eSve","design-layer-manage-resize":"design-layer-manage-resize___2OGvp","design-layer-manage-resize-content":"design-layer-manage-resize-content___3c5KT"}},84008:function(e){e.exports={"designer-lens-config-common":"designer-lens-config-common___3Xk_d","designer-lens-config-hue-rotate":"designer-lens-config-hue-rotate___3ePjf","designer-lens-config-saturate":"designer-lens-config-saturate___1YiLq","designer-lens-config-brightness":"designer-lens-config-brightness___iJvk9","designer-lens-config-contrast":"designer-lens-config-contrast___u7d3n","designer-lens-config-opacity":"designer-lens-config-opacity___1sbR_","designer-lens-config-grayscale":"designer-lens-config-grayscale___127iy"}},39292:function(e){e.exports={"request-default-config-frequency":"request-default-config-frequency___3grtP"}},53549:function(e){e.exports={"designer-theme-config-custom-item":"designer-theme-config-custom-item___35Xg3","designer-theme-config-custom-upload":"designer-theme-config-custom-upload___2DKSq"}},76029:function(e){e.exports={"designer-theme-config-list":"designer-theme-config-list___3oqeP","designer-theme-config-list-check":"designer-theme-config-list-check___3LMLl","designer-theme-config-item":"designer-theme-config-item___I_hSi"}},31528:function(e){e.exports={"page-design-left-tool-bar":"page-design-left-tool-bar___1DJVa","design-left-tool-icon":"design-left-tool-icon___5ENv_","design-left-tool-icon-n-a-w":"design-left-tool-icon-n-a-w___1MYKA","design-left-tool-icon-hover":"design-left-tool-icon-hover___1pbGv","design-left-tool-icon-rotate":"design-left-tool-icon-rotate___wk-ka"}},6888:function(e){e.exports={"design-page-left":"design-page-left___1DcKJ","design-page-left-content":"design-page-left-content___3XRja"}},36140:function(e){e.exports={"page-designer-loading":"page-designer-loading___37-44"}},88283:function(e){e.exports={"designer-page-main-guide-btn":"designer-page-main-guide-btn___1Vk2A","designer-page-main-guide-btn-sub":"designer-page-main-guide-btn-sub___2EmKR"}},46759:function(e){e.exports={"designer-page-main-horizontal-ruler":"designer-page-main-horizontal-ruler___J8PZ3","designer-page-main-vertical-ruler":"designer-page-main-vertical-ruler___QbZ3X","designer-page-main-horizontal-ruler-prefix":"designer-page-main-horizontal-ruler-prefix___3zHm0","designer-page-main-vertical-ruler-prefix":"designer-page-main-vertical-ruler-prefix___3smpV"}},41813:function(e){e.exports={"designer-page-main":"designer-page-main___1bkP5"}},10958:function(e){e.exports={"react-select-to-wrapper":"react-select-to-wrapper___1EGhs"}},82401:function(e){e.exports={"component-panel-thumb-wrapper":"component-panel-thumb-wrapper___2tLEU","component-panel-thumb-tooltip":"component-panel-thumb-tooltip___1_tVc","designer-panel-thumb-active":"designer-panel-thumb-active___17S5J","designer-panel-thumb-active-item":"designer-panel-thumb-active-item___2fxt4"}},76192:function(e){e.exports={"shortcut-keys-wrapper":"shortcut-keys-wrapper___3UFxt","shortcut-keys":"shortcut-keys___38LHo","shortcut-keys-item":"shortcut-keys-item___3WWd5"}},17011:function(e){e.exports={"design-page-toolbar":"design-page-toolbar___19LDl"}},70646:function(e){e.exports={"design-panel-content":"design-panel-content___3d1UP"}},68849:function(e){e.exports={"design-config-global":"design-config-global___i3COC"}},22332:function(e){e.exports={"design-page-right":"design-page-right___3x7NV","design-page-right-show":"design-page-right-show___1CDWh"}},56245:function(e){e.exports={"designer-page":"designer-page___2OvnH","designer-page-content":"designer-page-content___3QaAT"}},9990:function(e,n,t){"use strict";t.d(n,{R:function(){return g}});t(18106);var r=t(25499),i=t(11849),o=t(67294),a=t(67724),l=t(94184),s=t.n(l),c=t(96486),u=t(53357),d=t.n(u),f=t(85893),p=function(e){var n=e.items,t=void 0===n?[]:n,a=e.tabCounter,l=void 0===a?3:a,c=e.onBack,u=e.hasBack,p=e.title,g=void 0!==p&&p,h=(0,o.useMemo)((function(){return t.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{children:(0,o.cloneElement)(e.children,{onBack:c,hasBack:u,title:g})})}))}),[t]);return(0,f.jsx)(r.Z,{centered:!0,className:s()("h-100",d()["design-config-wrapper-header"],d()["design-config-wrapper-header-".concat(l)]),tabBarGutter:0,items:h})},g=function(e){var n=e.children,t=e.hasBack,r=e.onBack,i=e.title,l=void 0!==i&&i,u=e.version,p=void 0===u?"v1.0":u,g=(0,o.useRef)((0,c.uniqueId)("design-config-item"));return(0,f.jsxs)("div",{children:[!1!==l&&(0,f.jsx)("div",{className:d()["design-config-wrapper-item-title"],children:(0,f.jsxs)("div",{className:d()["design-config-wrapper-item-title-content"],children:[(0,f.jsxs)("div",{className:s()(d()["design-config-wrapper-item-title-content-main"],"dis-flex"),children:[!!t&&(0,f.jsx)(a.Z,{className:"c-po",title:"\u8fd4\u56de\u4e0a\u4e00\u7ea7",onClick:r}),(0,f.jsx)("span",{className:s()("text-ellipsis","dis-flex"),title:l||"",children:l})]}),(0,f.jsx)("div",{className:s()(d()["design-config-wrapper-item-title-content-sub"],"dis-flex"),children:(0,f.jsx)("span",{children:l&&"".concat(p," | ").concat(l)})})]})}),(0,f.jsx)("div",{id:g.current,style:{top:!1===l?0:60},className:s()(d()["design-config-wrapper-item-content"],"zero-scrollbar"),children:(0,f.jsx)("div",{className:d()["design-config-wrapper-item-content-main"],children:n})})]})};n["Z"]=p},50975:function(e,n,t){"use strict";var r=t(11849),i=(t(66126),t(31955)),o=t(2824),a=t(67294),l=t(85893),s=function(e){var n,t=e.value,s=e.defaultValue,c=e.onChange,u=e.onAfterChange,d=e.triggerOnChangeInOnChange,f=void 0!==d&&d,p=(0,a.useState)(null!==(n=null!==t&&void 0!==t?t:s)&&void 0!==n?n:0),g=(0,o.Z)(p,2),h=g[0],v=g[1],m=(0,a.useCallback)((function(e){v(e),f&&(null===c||void 0===c||c(e))}),[c,f]),x=(0,a.useCallback)((function(e){null===c||void 0===c||c(e),null===u||void 0===u||u(e)}),[u,c]);return(0,a.useEffect)((function(){void 0!==t&&v(t)}),[t]),(0,l.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{value:h,onChange:m,onAfterChange:x}))};n["Z"]=s},54676:function(e,n,t){"use strict";t.d(n,{p:function(){return I},Z:function(){return O}});t(57338);var r=t(83107),i=(t(71194),t(50146)),o=(t(8897),t(69770)),a=(t(62350),t(24565)),l=(t(57663),t(71577)),s=t(86582),c=t(11849),u=t(2824),d=(t(13254),t(14277)),f=t(39428),p=t(3182),g=t(67294),h=t(28216),v=t(17244),m=t(73171),x=t(18095),b=t(18267),Z=t(94520),y=t(74117),C=t(98191),j=t(11138),_=t(11331),w=t(68702),k=function(e){return{callback:e.global.screenData.config.attr.filter||[]}},N=function(e){return{setCallbackData:function(n){return e({type:"global/setCallbackData",value:n})}}},S=t(85893),E=(0,Z.Z)((function(){return Promise.all([t.e(1216),t.e(8695),t.e(542)]).then(t.bind(t,45582))})),M=function(e){var n=e.id,t=e.setSelect,r=(0,w.xt)(),i=L(n),o=(0,g.useMemo)((function(){return Object.values(r).reduce((function(e,r){var i=r.filter,o=r.id,a=r.name;return null!==i&&void 0!==i&&i.show&&null!==i&&void 0!==i&&i.value.some((function(e){return e.id===n&&!e.disabled}))&&e.push((0,S.jsx)(_.Z,{type:"link",onClick:(0,p.Z)((0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t([o]);case 1:case"end":return e.stop()}}),e)}))),children:a},o)),e}),[])}),[r,n,t,i]);return(0,S.jsx)("div",{style:{maxHeight:200,overflow:"auto"},children:o.length?o:(0,S.jsx)(d.Z,{description:"\u6682\u65e0\u7ec4\u4ef6"})})},T=(0,h.$j)((function(){return{}}),(function(e){return{setSelect:function(n){return e({type:"global/setSelect",value:n})}}}))(M);function L(e){var n=(0,w.xt)(),t=(0,g.useMemo)((function(){return Object.values(n).reduce((function(n,t){var r=t.filter;return null!==r&&void 0!==r&&r.show&&null!==r&&void 0!==r&&r.value.some((function(n){return n.id===e&&!n.disabled}))&&n++,n}),0)}),[n,e]);return t||0}var I=function(e){var n=L(e.id);return(0,S.jsx)(S.Fragment,{children:n||0})},A=function(e){var n=e.callback,t=void 0===n?[]:n,r=e.setCallbackData,d=(0,g.useState)(!1),f=(0,u.Z)(d,2),p=f[0],h=f[1],Z=(0,g.useState)(""),k=(0,u.Z)(Z,2),N=k[0],M=k[1],L=(0,g.useCallback)((function(e){var n=e.id,i=t.filter((function(e){return e.id!==n}));null===r||void 0===r||r(i)}),[t]),A=(0,g.useCallback)((function(e,n){var i=t.map((function(t){return e.id!==t.id?t:(0,c.Z)((0,c.Z)({},t),{},{params:n})}));null===r||void 0===r||r(i)}),[t]),R=(0,g.useCallback)((function(e){M(e),h(!0)}),[]),P=(0,g.useCallback)((function(e){null===r||void 0===r||r([].concat((0,s.Z)(t),[(0,c.Z)((0,c.Z)({},e),{},{id:(0,v.x0)(),editable:!1})]))}),[r,t]),O=(0,g.useMemo)((function(){return[{title:"\u540d\u79f0",key:"name",dataIndex:"name"},{title:"\u4ee3\u7801",key:"code",dataIndex:"code",ellipsis:!0,render:function(e){return(0,S.jsx)("div",{title:e,className:"c-po text-ellipsis normal-color",onClick:R.bind(null,e),children:e})}},{title:"\u5173\u8054\u53c2\u6570",key:"params",dataIndex:"params",width:150,render:function(e,n){return(0,S.jsx)(y.Z,{value:e,onChange:A.bind(null,n)})}},{title:"\u4f7f\u7528\u7ec4\u4ef6",key:"use",dataIndex:"use",width:100,render:function(e,n){return(0,S.jsx)(I,{id:n.id})}},{title:"\u64cd\u4f5c",key:"op",dataIndex:"op",render:function(e,n){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(_.Z,{Component:a.Z,title:"\u662f\u5426\u786e\u5b9a\u5220\u9664\u6b64\u8fc7\u6ee4\u5668\uff1f",onClick:L.bind(null,n),triggerName:"onConfirm",children:(0,S.jsx)(l.Z,{type:"link",style:{paddingLeft:0},children:"\u5220\u9664"},"delete")}),(0,S.jsx)(_.Z,{type:"link",onClick:P.bind(null,n),children:"\u590d\u5236"},"copy")]})}}]}),[A,L,P]),D=(0,g.useCallback)((function(){var e=(0,w.xt)();null===r||void 0===r||r(t.filter((function(n){return!!n.editable||Object.values(e).some((function(e){var t=e.filter;return(null===t||void 0===t?void 0:t.show)&&(null===t||void 0===t?void 0:t.value.some((function(e){return e.id===n.id&&!e.disabled})))}))})))}),[t]);return(0,S.jsxs)(j.Z,{children:[(0,S.jsx)(o.Z,{title:function(){return(0,S.jsx)(_.Z,{Component:a.Z,title:"\u662f\u5426\u786e\u8ba4\u5220\u9664",onClick:D,triggerName:"onConfirm",children:(0,S.jsx)(l.Z,{icon:(0,S.jsx)(m.Z,{}),children:"\u6e05\u7a7a\u65e0\u5f15\u7528\u8fc7\u6ee4\u51fd\u6570"})})},dataSource:t,rowKey:function(e){return e.id},columns:O,pagination:!1,scroll:{y:"70vh"},bordered:!0,size:"small",expandable:{expandedRowRender:function(e){return(0,S.jsx)(T,{id:e.id,randomKey:Math.random()})},expandIcon:function(e){var n=e.record,t=e.expanded,r=e.expandable,i=e.onExpand;return r?t?(0,S.jsx)(x.Z,{onClick:i.bind(null,n)}):(0,S.jsx)(C.Z,{title:"\u67e5\u770b\u4f7f\u7528\u7684\u7ec4\u4ef6",children:(0,S.jsx)(b.Z,{onClick:i.bind(null,n)})}):null}}}),(0,S.jsx)(i.Z,{title:"\u8fc7\u6ee4\u51fd\u6570",onCancel:function(){return h(!1)},footer:null,open:p,bodyStyle:{padding:0,fontSize:"12px"},children:(0,S.jsx)(E,{children:N})})]})},R=(0,h.$j)(k,N)(A),P=(0,g.forwardRef)((function(e,n){var t=e.onClose,i=(0,g.useState)(!1),o=(0,u.Z)(i,2),a=o[0],s=o[1],c=(0,g.useCallback)((function(){s(!1),null===t||void 0===t||t()}),[]),d=(0,g.useCallback)((function(){s(!0)}),[]),f=(0,g.useMemo)((function(){return(0,S.jsx)("div",{className:"ali-r",children:(0,S.jsx)(l.Z,{onClick:c,children:"\u5173\u95ed"})})}),[c]);return(0,g.useImperativeHandle)(n,(function(){return{open:d}}),[d]),(0,S.jsx)(r.Z,{mask:!1,open:a,maskClosable:!1,onClose:c,footer:f,title:"\u56de\u8c03\u7ba1\u7406",placement:"left",width:680,children:(0,S.jsx)(R,{})})})),O=P},30890:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return $l},useSingleModal:function(){return Ul}});t(84305);var r=t(88182),o=t(39428),a=t(3182),l=t(11849),s=(t(71194),t(50146)),c=t(2824),u=t(67294),d=t(85059),f=t(57865),p=t(28216),g=t(84674),h=t(45210),v=t(68702),m=t(82376),x=t(19228),b=t(80856),Z=t(15494),y=t(6690),C=t.n(y),j=t(36140),_=t.n(j),w=t(85893),k=function(e){var n=e.value,t=(0,v.v8)();return n?(0,w.jsx)("div",{className:_()["page-designer-loading"],children:(0,w.jsx)(C(),{loading:!0,color:t})}):null},N=k,S=t(15778),E=t(34452),M=function(e){return{userId:e.user.currentUser._id}},T=function(e){return{}},L=[{id:"screen_name",text:["\n        <p>\n          \u8bbe\u7f6e\u53ef\u89c6\u5316\u5927\u5c4f\u7684\u540d\u79f0\uff0c\u6700\u5c115\u4e2a\u5b57\u3002\n        </p>\n      "],attachTo:{element:".ant-page-header-heading-title",on:"right"},buttons:[{type:"cancel",classes:"shepherd-button-secondary",text:"\u9000\u51fa"},{type:"next",text:"\u4e0b\u4e00\u6b65"}]},{id:"component_list",text:["\n        <p>\n          \u5927\u5c4f\u7684\u5404\u4e2a\u7ec4\u4ef6\u5217\u8868\uff0c\u9009\u62e9\u7ec4\u4ef6\u62d6\u52a8\u5230\u753b\u5e03\u4e2d\u3002\n        </p>\n      "],attachTo:{element:".design-left-component-list",on:"right"},buttons:[{type:"back",classes:"shepherd-button-secondary",text:"\u4e0a\u4e00\u6b65"},{type:"next",text:"\u4e0b\u4e00\u6b65"}]},{id:"tool_bar",text:["\n        <p>\n          \u8f85\u52a9\u64cd\u4f5c\u5927\u5c4f\u7684\u5de5\u5177\u680f\uff0c\u5305\u62ec\u524d\u8fdb\u540e\u9000\uff0c\u7ec4\u4ef6\u5217\u8868\uff0c\u8f85\u52a9\u7ebf\uff0c\u8fc7\u6ee4\u51fd\u6570\uff0c\u5168\u5c40\u5e38\u91cf\u548c\u672c\u5730\u914d\u7f6e\u3002\n        </p>\n      "],attachTo:{element:".page-design-left-tool-bar",on:"right"},buttons:[{type:"back",classes:"shepherd-button-secondary",text:"\u4e0a\u4e00\u6b65"},{type:"next",text:"\u4e0b\u4e00\u6b65"}]},{id:"panel",text:["\n        <p>\n          \u8bbe\u8ba1\u5668\u7684\u753b\u5e03\u90e8\u5206\uff0c\u5c06\u7ec4\u4ef6\u62d6\u62fd\u81f3\u753b\u5e03\u5f53\u4e2d\uff0c\u914d\u5408\u5de6\u548c\u4e0a\u65b9\u8f85\u52a9\u7ebf\uff0c\u5b8c\u6210\u8bbe\u8ba1\uff0c\u5373\u4e3a\u6700\u7ec8\u5927\u5c4f\u7684\u5c55\u73b0\u6548\u679c\u3002\n        </p>\n      "],attachTo:{element:"#designer-page-main-sub",on:"left-end"},buttons:[{type:"back",classes:"shepherd-button-secondary",text:"\u4e0a\u4e00\u6b65"},{type:"next",text:"\u4e0b\u4e00\u6b65"}]},{id:"config",text:["\n        <p>\n          \u5927\u5c4f\u7ec4\u4ef6\u53ca\u5168\u5c40\u7684\u914d\u7f6e\u533a\u57df\u3002\n        </p>\n        <p>\n          \u4e0d\u9009\u4e2d\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u663e\u793a\u7684\u5373\u4e3a\u5168\u5c40\u914d\u7f6e\uff0c\u6bd4\u5982\u8bbe\u7f6e\u4ed6\u7684\u753b\u5e03\u5927\u5c0f\uff0c\u5c01\u9762\u7b49\u3002\n        </p>\n        <p>\n          \u9009\u4e2d\u7ec4\u4ef6\u6216\u7ec4\u65f6\uff0c\u5373\u53ef\u5bf9\u5bf9\u5e94\u7ec4\u4ef6\u6216\u7ec4\u8bbe\u7f6e\u5bf9\u5e94\u7684\u6837\u5f0f\u4ee5\u53ca\u6570\u636e\u548c\u4ea4\u4e92\u7b49\u3002\n        </p>\n      "],attachTo:{element:".design-page-right",on:"left"},buttons:[{type:"back",classes:"shepherd-button-secondary",text:"\u4e0a\u4e00\u6b65"},{type:"next",text:"\u77e5\u9053\u4e86"}]}],I=!1,A=function(e){var n=e.children,t=e.userId,r=e.onComplete,i=e.onStart,o=e.loading,a=(0,u.useContext)(S.yP),l=(0,v._)(E.w.CONFIG_KEY_SHEPHERD_INFO,{}),s=(0,c.Z)(l,3),d=s[0],f=void 0===d?{}:d,p=s[1],g=s[2];return(0,u.useEffect)((function(){if(!I&&g&&!o){var e=null===f||void 0===f?void 0:f[t],n=Date.now();if(!e||n-e.timestamps>2592e6){if(r){null===a||void 0===a||a.once("complete",r),null===a||void 0===a||a.once("cancel",r)}null===i||void 0===i||i(),null===a||void 0===a||a.start()}I=!0,f[t]={timestamps:Date.now()},p(f)}}),[f,g,o]),(0,w.jsx)(w.Fragment,{children:n})},R=(0,p.$j)(M,T)(A),P=function(e){var n=e.children,t=e.onStart,r=e.onComplete,i=e.loading;return(0,w.jsx)(S.u4,{steps:L,tourOptions:{confirmCancel:!1,defaultStepOptions:{arrow:!0,scrollTo:!0},exitOnEsc:!0,keyboardNavigation:!0,useModalOverlay:!0},children:(0,w.jsx)(R,{loading:i,onStart:t,onComplete:r,children:n})})},O=P,D=(t(64896),t(37744)),z=(t(34792),t(55026)),F=(t(47673),t(4107)),G=t(25240),W=t(64072),H=t(20924),Y=t(65233),q=t(94184),B=t.n(q),J=t(97005),U=t(11138),V=t(11331),$=t(83647),K=t(75162),X=(t(48061),t(93162)),Q=(t(78630),!1),ee=!1;function ne(){return te.apply(this,arguments)}function te(){return te=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ee){e.next=2;break}return e.abrupt("return");case 2:return ee=!0,e.abrupt("return",E.Z.getItem(E.w.STATIC_COMPONENT_DATA_SAVE_KEY).then((function(e){var n=e.value,t=e.errMsg;if(t)return Promise.reject(t);var r=new Blob([JSON.stringify(n)],{type:"application/json"});return(0,X.saveAs)(r,"component.json")})).catch((function(e){console.error(e),z.default.info("\u5bfc\u51fa\u6587\u4ef6\u5931\u8d25")})).then((function(e){ee=!1})));case 4:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function re(e){return ie.apply(this,arguments)}function ie(){return ie=(0,a.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Q){e.next=2;break}return e.abrupt("return");case 2:t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.addEventListener("change",(function(e){var t,r=null===(t=e.target)||void 0===t?void 0:t.files[0];if(r){Q=!0,z.default.info("\u5bfc\u5165\u4e2d...");var i=new FileReader;return i.onload=function(e){var t,r=null===(t=e.target)||void 0===t?void 0:t.result;r?E.Z.setItem(E.w.STATIC_COMPONENT_DATA_SAVE_KEY,JSON.parse(r)).then((function(){z.default.info("\u5bfc\u5165\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u9875\u9762",1,(function(){window.location.reload()}))})).catch((function(e){console.error(e),z.default.info("\u5bfc\u5165\u51fa\u9519"),null===n||void 0===n||n(),Q=!1})):(null===n||void 0===n||n(),Q=!1)},i.readAsText(r)}})),t.click();case 7:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}var oe=t(75513),ae=t(80521),le=(t(57338),t(83107)),se=t(86582),ce=t(96486),ue=t(96623),de=t(97603),fe=t(12946),pe=t(31830),ge=t(24722),he=t(44382),ve=t(73653),me=t(10661),xe=t.n(me),be=function(e){var n=e.value,t=e.version,r=e.screenTheme,i=(0,u.useMemo)((function(){return(0,fe.f)(t)}),[t]);return(0,w.jsx)(w.Fragment,{children:n.map((function(e){var n,t=e.config,o=t.style,a=o.width,l=o.height,s=o.rotate,c=o.skew,u=o.opacity,d=t.attr.visible,f=e.id,p=null===(n=(0,pe.sb)(e))||void 0===n?void 0:n.render;if(!p)return null;var g="exchange-mobile-component-".concat(f);return(0,w.jsx)("div",{style:{width:a,height:l,transform:"rotate(".concat(s,"deg) skew(").concat((null===c||void 0===c?void 0:c.x)||0,"deg, ").concat((null===c||void 0===c?void 0:c.y)||0,"deg)"),visibility:d?"visible":"hidden",transformOrigin:i,opacity:u},id:g,className:xe()["component-exchange-screen-flag-component-list-item"],children:(0,w.jsx)(p,{viewportQuery:"#".concat(g),className:xe()["render-component-children"],value:e,wrapper:ge.hs,global:{setParams:ce.noop,screenType:"preview",screenTheme:r}},f)},f)}))})},Ze=(0,p.$j)((function(e){return{version:e.global.version||"",screenTheme:e.global.screenData.config.attr.theme.value}}),(function(){return{}}))(be),ye=(0,u.forwardRef)((function(e,n){var t=(0,u.useState)(!1),r=(0,c.Z)(t,2),i=r[0],l=r[1],s=(0,u.useState)(!0),d=(0,c.Z)(s,2),f=d[0],p=d[1],g=(0,u.useState)([]),h=(0,c.Z)(g,2),v=h[0],m=h[1],y=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return n.reduce((function(n,r){var i=r.components,o=void 0===i?[]:i,a=r.config,l=a.style,s=l.width,c=l.height,u=a.attr,d=u.scaleX,f=void 0===d?1:d,p=u.scaleY,g=void 0===p?1:p,h=r.componentType,v=375/s*t.x*c*t.y;return"GROUP_COMPONENT"!==h&&n.push((0,x.SP)({},r,{components:[],config:{style:{width:375,height:v,left:0,top:0}}})),n.push.apply(n,(0,se.Z)(e(o,{x:f*t.x,y:g*t.y}))),n}),[])},C=(0,u.useCallback)((function(){l(!0),p(!0);var e=(0,de.pA)().components;m(y(e)),p(!1)}),[]),j=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:l(!1);case 1:case"end":return e.stop()}}),e)}))),[]),_=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,t,r,i,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,E.Z.getItem(E.w.STATIC_COMPONENT_DATA_SAVE_KEY);case 4:if(n=e.sent,t=n.errMsg,r=n.value,!t){e.next=9;break}throw new Error(t.toString());case 9:return e.next=11,E.Z.setItem(E.w.STATIC_COMPONENT_DATA_SAVE_KEY,(0,x.SP)({},r,{config:{style:{width:375,height:667},flag:{type:"H5"}}}));case 11:if(i=e.sent,a=i.errMsg,!a){e.next=15;break}throw new Error(a.toString());case 15:z.default.success("\u8f6c\u6362\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0",1,(function(){window.location.reload()})),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),z.default.info("\u8f6c\u6362\u5931\u8d25!!"),p(!1);case 22:case"end":return e.stop()}}),e,null,[[1,18]])}))),[v]),k=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,t,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,n=(0,de.pA)(),t=n.screenData,r=location.href.includes("/model-designer")?Z.a4:Z.tR,e.next=6,r({_id:t._id||"",name:t.name,description:t.description,poster:t.poster,flag:"H5",data:JSON.stringify((0,x.SP)({},t,{config:{style:{width:375,height:667},flag:{type:"H5"}},components:v}))});case 6:z.default.success("\u8f6c\u6362\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0",1,(function(){window.location.reload()})),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),z.default.info("\u8f6c\u6362\u5931\u8d25!!"),p(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),[v]);return(0,u.useImperativeHandle)(n,(function(){return{open:C}}),[]),(0,w.jsx)(le.Z,{open:i,title:"\u79fb\u52a8\u7aef\u8f6c\u6362",onClose:j,placement:"left",width:423,maskClosable:!1,destroyOnClose:!0,footer:(0,w.jsxs)("div",{className:xe()["component-exchange-screen-flag-drawer-footer"],children:[(0,w.jsx)(V.Z,{className:"m-r-4",onClick:j,loading:f,needLoading:!1,force:!0,children:"\u53d6\u6d88"}),(0,w.jsx)(V.Z,{type:"primary",onClick:b.Z.IS_STATIC?_:k,loading:f,children:"\u786e\u8ba4\u5e94\u7528"})]}),children:(0,w.jsxs)("div",{className:B()(xe()["component-exchange-screen-flag-drawer"],"pos-re"),children:[f&&(0,w.jsx)("div",{className:B()(xe()["component-exchange-screen-flag-drawer-loading"],"pos-ab w-100 h-100"),children:(0,w.jsx)(ue.g,{})}),!f&&(0,w.jsx)(ve.g.Provider,{value:{flag:"H5"},children:(0,w.jsx)(he.rb,{children:(0,w.jsx)(Ze,{value:v||[]})})})]})})})),Ce=ye,je=function(e){return{flag:e.global.screenData.config.flag.type}},_e=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})}}},we=function(e){var n=e.loading,t=(e.setLoading,(0,u.useRef)(null)),r=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:null===(n=t.current)||void 0===n||n.open();case 1:case"end":return e.stop()}}),e)}))),[]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(V.Z,{size:"large",title:"\u5207\u6362\u4e3a\u79fb\u52a8\u7aef",type:"link",onClick:r,icon:(0,w.jsx)(ae.Z,{}),loading:n,needLoading:!1},"exchange"),(0,w.jsx)(Ce,{ref:t})]})},ke=(0,p.$j)(je,_e)(we),Ne=function(e){return{screenData:e.global.screenData}},Se=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})}}},Ee=(t(49111),t(19650)),Me=(t(57663),t(71577)),Te=t(93224),Le=t(85980),Ie=["onClick","wait"],Ae=function(e){var n=e.onClick,t=(e.wait,(0,Te.Z)(e,Ie)),r=(0,Le.Z)((function(e){null===n||void 0===n||n(e)}),{wait:200}),i=r.run;return(0,w.jsx)(Me.Z,(0,l.Z)({onClick:i},t))},Re=Ae,Pe=t(98191),Oe=function(e){var n=e.componentCollapse,t=e.setLocalConfig,r=(0,u.useCallback)((function(){t({componentCollapse:!n})}),[n,t]);return(0,w.jsx)(Pe.Z,{title:"\u6298\u53e0\u7ec4\u4ef6\u5217\u8868",children:(0,w.jsx)(Re,{icon:(0,w.jsx)(oe.Z,{title:"\u6298\u53e0\u7ec4\u4ef6\u5217\u8868",type:"icon-userConfig"}),onClick:r,type:n?"default":"primary"})})},De=(0,p.$j)((function(e){return{componentCollapse:e.local.componentCollapse}}),(function(e){return{setLocalConfig:function(n){return e({type:"local/setLocalConfig",value:n})}}}))(Oe),ze=De,Fe=t(76570),Ge=t(3409),We=t(1184),He=t.n(We),Ye=function(e){var n=e.componentCollapse,t=e.setLocalConfig,r=(0,u.useState)(!1),i=(0,c.Z)(r,2),l=i[0],s=i[1],d=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t({componentCollapse:!n}),s((function(e){return!e})),Ge.FW.emit(Ge.JW.COMPONENT_SEARCH_VISIBLE);case 3:case"end":return e.stop()}}),e)}))),[n,t]);return(0,w.jsx)("div",{className:B()(He()["design-header-action-component-search"]),children:(0,w.jsx)(Pe.Z,{title:"\u7ec4\u4ef6\u641c\u7d22",placement:"top",children:(0,w.jsx)(V.Z,{icon:(0,w.jsx)(Fe.Z,{}),onClick:d,type:l?"primary":"default",Component:Re,needLoading:!1})})})},qe=(0,p.$j)((function(e){return{componentCollapse:e.local.componentCollapse}}),(function(e){return{setLocalConfig:function(n){return e({type:"local/setLocalConfig",value:n})}}}))(Ye),Be=qe,Je=t(32059),Ue=t(47760),Ve=t(66656),$e=t(38009),Ke=t.n($e),Xe=function(e){var n=e.setSelect,t=(0,u.useState)(!1),r=(0,c.Z)(t,2),i=r[0],l=r[1],s=(0,u.useState)((function(){return Object.values(v.xt).map((function(e){return{label:e.name,value:e.id}}))})),d=(0,c.Z)(s,2),f=d[0],p=d[1],g=(0,u.useCallback)((function(){l((function(e){return!e}))}),[]),h=(0,u.useCallback)((function(e){n([e])}),[]),m=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x._v)(1e3);case 2:p(Object.values(n).map((function(e){return{label:e.name,value:e.id}})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){return Ge.FW.addListener(Ge.JW.COMPONENT_ID_PATH_MAP_CHANGE,m),function(){Ge.FW.removeListener(Ge.JW.COMPONENT_ID_PATH_MAP_CHANGE,m)}}),[]),(0,w.jsxs)("div",{className:B()(Ke()["design-header-action-layer-search"],(0,Je.Z)({},Ke()["design-header-action-layer-search-active"],i)),children:[(0,w.jsx)(Pe.Z,{title:"\u56fe\u5c42\u641c\u7d22",children:(0,w.jsx)(Re,{icon:(0,w.jsx)(Ue.Z,{}),onClick:g,type:i?"primary":"default"})}),(0,w.jsx)(Ve.Z,{showSearch:!0,onChange:h,options:f,filterOption:function(e,n){var t,r;return!e||((null===n||void 0===n||null===(t=n.label)||void 0===t?void 0:t.toString().includes(e))||e.includes((null===n||void 0===n||null===(r=n.label)||void 0===r?void 0:r.toString())||""))}})]})},Qe=(0,p.$j)((function(e){return{}}),(function(e){return{setSelect:function(n){return e({type:"global/setSelect",value:n})}}}))(Xe),en=Qe,nn=function(e){var n=e.componentConfigCollapse,t=e.setLocalConfig,r=(0,u.useCallback)((function(){t({componentConfigCollapse:!n})}),[n,t]);return(0,w.jsx)(Pe.Z,{title:"\u6298\u53e0\u7ec4\u4ef6\u914d\u7f6e",children:(0,w.jsx)(Re,{icon:(0,w.jsx)(oe.Z,{title:"\u6298\u53e0\u7ec4\u4ef6\u914d\u7f6e",type:"icon-shangpinliebiao"}),onClick:r,type:n?"default":"primary"})})},tn=(0,p.$j)((function(e){return{componentConfigCollapse:e.local.componentConfigCollapse}}),(function(e){return{setLocalConfig:function(n){return e({type:"local/setLocalConfig",value:n})}}}))(nn),rn=tn,on=t(72285),an=function(e){var n=(0,u.useState)(!1),t=(0,c.Z)(n,2),r=t[0],i=t[1],o=(0,u.useCallback)((function(){Ge.FW.emit(Ge.JW.LAYER_VISIBLE_CHANGE,!r,"LayerShowIcon"),i(!r)}),[r]),a=(0,u.useCallback)((function(e,n){"LayerShowIcon"!==n&&i(e)}),[]);return(0,u.useEffect)((function(){return Ge.FW.addListener(Ge.JW.LAYER_VISIBLE_CHANGE,a),function(){Ge.FW.removeListener(Ge.JW.LAYER_VISIBLE_CHANGE,a)}}),[a]),(0,w.jsx)(Pe.Z,{title:"\u56fe\u5c42",children:(0,w.jsx)(Re,{title:"\u56fe\u5c42",icon:(0,w.jsx)(on.Z,{}),type:r?"primary":"default",onClick:o})})},ln=an,sn=(t(2825),t(64732)),cn=(t(77576),t(59314)),un=t(94520),dn=t(80585),fn=t(13631),pn=t(79837),gn=t(47189),hn=function(){return{}},vn=function(e){return{setSelect:function(n){return e({type:"global/setSelect",value:n})}}},mn=gn.COMPONENT_ONLY_TYPE_LIST.every((function(e){return e.disabled||e.development})),xn=function(e){var n=e.setSelect,t=(0,u.useState)(!1),r=(0,c.Z)(t,2),i=r[0],o=r[1],a=(0,u.useRef)(),l=(0,u.useRef)(0),s=(0,u.useRef)((0,pe.GM)()),d=(0,u.useRef)((0,pe.j1)()),f=(0,u.useRef)(""),p=(0,u.useCallback)((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r&&l.current+1>=d.current.length)return clearInterval(a.current),l.current=0,void o(!1);var i=function(){e=(l.current+1)%s.current,l.current++;var n=d.current[e],r=n.type,i=gn.COMPONENT_ONLY_TYPE_LIST.find((function(e){return e.type===r}));null!==i&&void 0!==i&&i.disabled||null!==i&&void 0!==i&&i.development||(t=i)};while(!t)i();var c=t,u=c.title,p=c.description,g=c.type,h=(0,de.LM)({name:u,description:p,componentType:g,config:{style:{left:Math.floor(500*Math.random()),top:Math.floor(200*Math.random())}}}),v=[{action:"add",id:h.id,value:h,path:""}];f.current&&v.push({action:"delete",id:f.current,value:{},path:""}),K.ZP.setComponent(v),f.current=h.id,n([h.id])}),[]),g=(0,u.useCallback)((function(){clearInterval(a.current);var e=i;o(!i),e?l.current=0:(p(!0),a.current=setInterval((function(){p(!0)}),5e3))}),[i,p]),v=(0,Le.Z)((function(){o(!1),clearInterval(a.current),p()}),{wait:500}),m=v.run;return(0,h.Z)((function(){clearInterval(a.current)})),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(Me.Z,{disabled:mn,type:"primary",className:"m-r-4",onClick:g,children:[i&&"\u505c\u6b62","\u81ea\u52a8\u6dfb\u52a0"]}),(0,w.jsx)(Me.Z,{disabled:mn,type:"primary",onClick:m,children:"\u624b\u52a8\u6dfb\u52a0"})]})},bn=((0,p.$j)(hn,vn)(xn),fn.Z.Item),Zn=(0,un.Z)((function(){return Promise.all([t.e(1216),t.e(9463)]).then(t.bind(t,28767))})),yn=(0,u.forwardRef)((function(e,n){var t=e.debug,r=t.show,i=t.showComponentId,o=e.onChange,a=(0,u.useRef)(null),l=(0,u.useCallback)((function(e,n){var t=n;try{t=n.target.value}catch(r){}o((0,Je.Z)({},e,t))}),[]);return(0,u.useImperativeHandle)(n,(function(){return{open:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.open()}}}),[]),(0,w.jsx)(Zn,{wrapperComponentRef:a,children:(0,w.jsxs)(fn.Z,{level:1,children:[(0,w.jsx)(bn,{label:"\u5f00\u542fDebug",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:r,onChange:l.bind(null,"show")})})}),!!r&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(bn,{label:"\u663e\u793a\u7ec4\u4ef6id",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:i,onChange:l.bind(null,"showComponentId")})})}),!1]})]})})})),Cn=yn,jn=function(e){var n=e.debug,t=e.setDebugConfig,r=e.screenType,i=(n.show,(0,u.useRef)(null)),o=(0,u.useCallback)((function(e){t(e)}),[]),a=(0,u.useCallback)((function(){var e;null===(e=i.current)||void 0===e||e.open()}),[]);return(0,sn.Z)(["ctrl.q"],(function(){"edit"===r&&a()})),(0,w.jsx)(Cn,{ref:i,debug:n,onChange:o})},_n=(0,p.$j)((function(e){return{debug:e.local.debug,screenType:e.global.screenType}}),(function(e){return{setDebugConfig:function(n){return e({type:"local/setDebug",value:n})}}}))(jn),wn=_n,kn=t(18227),Nn=t.n(kn),Sn=function(){return(0,w.jsxs)(Ee.Z,{className:Nn()["design-header-action"],children:[(0,w.jsx)(wn,{}),(0,w.jsx)(Be,{}),(0,w.jsx)(en,{}),(0,w.jsx)(ze,{}),(0,w.jsx)(rn,{}),(0,w.jsx)(ln,{})]})},En=Sn,Mn=t(70841),Tn=t.n(Mn),Ln=function(e){var n=e.screenData,t=e.setScreen,r=n||{},i=r.name,s=r._id,d=r.config.flag.type,f=(0,u.useState)(!1),p=(0,c.Z)(f,2),g=p[0],h=p[1],m=(0,u.useState)(!1),x=(0,c.Z)(m,2),y=x[0],C=x[1],j=(0,u.useMemo)((function(){return g?(0,w.jsx)(F.Z,{className:Tn()["designer-page-header-title-active"],defaultValue:i,allowClear:!0,size:"large",autoFocus:!0,onBlur:function(e){null===t||void 0===t||t({name:e.target.value}),h(!1)}}):(0,w.jsx)("div",{className:B()(Tn()["designer-page-header-title"],"border-1","border-r-4","c-po","text-ellipsis"),onClick:h.bind(null,!0,void 0),children:i})}),[g,i,t]),_=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,t,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!b.Z.IS_STATIC){e.next=2;break}return e.abrupt("return",(0,$.Wk)());case 2:return C(!0),e.prev=3,n=(0,v.bB)(location.hash),t=n?Z.Lv:Z.e7,r=n?$.o8:$.J8,e.next=9,t({_id:s});case 9:r(s),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),z.default.info("\u64cd\u4f5c\u5931\u8d25");case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])}))),[s,y]),k=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,K.mA)({loading:y,setLoading:C}));case 1:case"end":return e.stop()}}),e)}))),[y]),N=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:C(!0);try{re(window.location.reload)}catch(n){z.default.info("\u64cd\u4f5c\u5931\u8d25")}finally{C(!1)}case 2:case"end":return e.stop()}}),e)}))),[]),S=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return C(!0),e.next=3,ne();case 3:C(!1);case 4:case"end":return e.stop()}}),e)}))),[]),M=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return C(!0),e.next=3,E.Z.removeItem(E.w.STATIC_COMPONENT_DATA_SAVE_KEY);case 3:n=e.sent,t=n.value,t?z.default.info("\u64cd\u4f5c\u6210\u529f\uff0c\u9875\u9762\u5373\u5c06\u5237\u65b0",1,(function(){return window.location.reload()})):z.default.info("\u64cd\u4f5c\u51fa\u9519"),C(!1);case 7:case"end":return e.stop()}}),e)}))),[]),T=(0,u.useMemo)((function(){var e=(0,w.jsx)(V.Z,{size:"large",title:"\u9884\u89c8",type:"link",onClick:_,icon:(0,w.jsx)(G.Z,{}),loading:y},"preview"),n=(0,w.jsx)(V.Z,{size:"large",title:"\u4fdd\u5b58",type:"link",onClick:k,icon:(0,w.jsx)(W.Z,{}),loading:y},"send"),t=(0,w.jsx)(ke,{loading:y,setLoading:C},"exchange"),r=(0,w.jsx)(V.Z,{size:"large",title:"\u5bfc\u51fa",type:"link",onClick:S,icon:(0,w.jsx)(H.Z,{}),loading:y},"export"),i=(0,w.jsx)(V.Z,{size:"large",title:"\u5bfc\u5165",type:"link",onClick:N,icon:(0,w.jsx)(Y.Z,{}),loading:y},"import"),o=(0,w.jsx)(V.Z,{size:"large",title:"\u521d\u59cb\u5316",type:"link",onClick:M,icon:(0,w.jsx)(oe.Z,{type:"icon-Initialize-o"}),loading:y},"reset"),a=[];return"PC"===d&&a.push(t),b.Z.isAutoSaveType()?b.Z.IS_STATIC?a.push(r,i,e,o):a.push(e):s?a.push(e,n):a.push(n),a}),[_,k,s,y,d,N,S,M]);return(0,w.jsx)(U.Z,{children:(0,w.jsx)(D.Z,(0,l.Z)((0,l.Z)({className:Tn()["designer-page-header"],title:j,extra:T,backIcon:!1},b.Z.IS_STATIC?{breadcrumbRender:function(){return(0,w.jsxs)(J.Z,{gradient:!1,play:!0,pauseOnHover:!0,children:["\u5f53\u524d\u7248\u672c\u4e3a\u7b80\u5316\u7248\u672c\uff0c\u4e0d\u5b58\u5728\u7f51\u7edc\u4ea4\u4e92\uff0c\u672c\u5730\u56fe\u7247\u4e0a\u4f20\u5747\u8f6c\u6362\u4e3abase64\uff08\u63a8\u8350\u76f4\u63a5\u4f7f\u7528\u94fe\u63a5\uff09\uff0c\u6240\u6709\u529f\u80fd\u5747\u4e3a\u7eaf\u524d\u7aef\u5b9e\u73b0\uff0c\u5305\u62ec\u6570\u636e\u7684\u5b58\u50a8\uff0c\u8bf7\u53ca\u65f6\u5bf9\u6d4f\u89c8\u5668\u7f13\u5b58\u8fdb\u884c\u5904\u7406\u3002\u5173\u4e8e\u5b8c\u6574\u7248\u672c\uff0c\u8bf7fork",(0,w.jsx)("a",{href:"https://github.com/food-billboard/create-chart",target:"blank",children:"\u300agithub\u4ed3\u5e93\u300b"}),"\u4ee3\u7801\u5728\u672c\u5730\u8fd0\u884c\u3002 \u53ef\u4ee5\u5c06\u672c\u5730\u7684\u5927\u5c4f\u914d\u7f6e\u6587\u4ef6\u5bfc\u5165\u7684\u8bbe\u8ba1\u5668\u5f53\u4e2d\uff0c\u9884\u89c8\u7684\u6570\u636e\u4e5f\u4f1a\u8ddf\u7740\u6539\u53d8\u3002"]})}}:{}),{},{children:(0,w.jsx)(En,{})}))})},In=(0,p.$j)(Ne,Se)(Ln),An=t(79785),Rn=t(91896),Pn=t(32779),On=t(258),Dn=t(9034),zn=t(24557),Fn=t(5100),Gn=t(54676),Wn=(t(8897),t(69770)),Hn=t(17244),Yn=t(49101),qn=t(40011),Bn=function(e){return{constants:e.global.screenData.config.attr.constants||[]}},Jn=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})}}},Un=F.Z.TextArea,Vn=function(e){var n=e.constants,t=void 0===n?[]:n,r=e.setScreen,i=(0,u.useCallback)((function(e){r({config:{attr:{constants:e}}})}),[r]),o=(0,u.useCallback)((function(e){var n=e.id,r=t.filter((function(e){return e.id!==n}));i(r)}),[t,i]),a=(0,u.useCallback)((function(e){var n=t.map((function(n){return n.id!==e.id?n:(0,l.Z)((0,l.Z)({},n),e)}));i(n)}),[i,t]),s=(0,u.useCallback)((function(){i([].concat((0,se.Z)(t),[{id:(0,Hn.x0)(),key:"",description:"",value:""}]))}),[i,t]),c=(0,u.useMemo)((function(){return[{title:"\u540d\u79f0",key:"key",dataIndex:"key",width:80,render:function(e,n){return(0,w.jsx)(F.Z,{className:"w-100",defaultValue:e,onBlur:function(e){var t=e.target.value;a((0,l.Z)((0,l.Z)({},n),{},{key:t}))}})}},{title:"\u5e38\u91cf",key:"value",dataIndex:"value",width:160,render:function(e,n){return(0,w.jsx)(Un,{className:"w-100",rows:2,defaultValue:e,onBlur:function(e){var t=e.target.value;a((0,l.Z)((0,l.Z)({},n),{},{value:t}))}})}},{title:"\u63cf\u8ff0",key:"description",dataIndex:"description",width:100,render:function(e,n){return(0,w.jsx)(Un,{className:"w-100",rows:2,defaultValue:e,onBlur:function(e){var t=e.target.value;a((0,l.Z)((0,l.Z)({},n),{},{description:t}))}})}},{title:"\u64cd\u4f5c",key:"op",dataIndex:"op",render:function(e,n){return(0,w.jsx)(Me.Z,{style:{paddingLeft:0},type:"link",onClick:o.bind(null,n),children:"\u5220\u9664"})}}]}),[a,o]);return(0,w.jsxs)(U.Z,{children:[(0,w.jsx)(Wn.Z,{dataSource:t,rowKey:"id",columns:c,pagination:!1,scroll:{y:"70vh",x:"max-content"},bordered:!0,size:"small"}),(0,w.jsx)(qn.Z,{className:"m-t-8 c-f-s",onClick:s,icon:(0,w.jsx)(Yn.Z,{}),children:"\u65b0\u589e\u4e00\u4e2a\u5b57\u6bb5"})]})},$n=(0,p.$j)(Bn,Jn)(Vn),Kn=(0,u.forwardRef)((function(e,n){var t=e.onClose,r=(0,u.useState)(!1),i=(0,c.Z)(r,2),o=i[0],a=i[1],l=(0,u.useCallback)((function(){a(!1),null===t||void 0===t||t()}),[]),s=(0,u.useCallback)((function(){a(!0)}),[]),d=(0,u.useMemo)((function(){return(0,w.jsx)("div",{className:"ali-r",children:(0,w.jsx)(Me.Z,{onClick:l,children:"\u5173\u95ed"})})}),[l]);return(0,u.useImperativeHandle)(n,(function(){return{open:s}}),[s]),(0,w.jsx)(le.Z,{mask:!1,open:o,maskClosable:!1,onClose:l,footer:d,title:"\u5168\u5c40\u5e38\u91cf\u7ba1\u7406",placement:"left",width:520,children:(0,w.jsx)($n,{})})})),Xn=Kn,Qn=t(68628),et=t(83488),nt=fn.Z.Item,tt=function(){var e=(0,v._)(E.w.CONFIG_KEY_BACKGROUND,{r:4,g:15,b:17}),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,v.xv)(),l=i.isGlobalActionLoading,s=(0,u.useCallback)((function(e){l({globalLoadingAction:function(){var n=(0,a.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",r(e));case 1:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}()})}),[r]);return(0,w.jsx)(nt,{label:"\u80cc\u666f\u8272",placeholder:(0,w.jsx)(dn.Z,{title:"\u53ea\u5728\u8bbe\u8ba1\u65f6\u4f7f\u7528",children:(0,w.jsx)(Qn.Z,{})}),children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(et.D,{value:t,onChange:s})})})},rt=tt,it=fn.Z.Item,ot=function(){var e=(0,v._)(E.w.CONFIG_KEY_CROSS_CLIPBOARD,{show:!0}),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,v.xv)(),s=i.isGlobalActionLoading,d=(0,u.useCallback)((function(e,n){s({globalLoadingAction:function(){var i=(0,a.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.abrupt("return",r((0,l.Z)((0,l.Z)({},t),{},(0,Je.Z)({},e,n))));case 1:case"end":return i.stop()}}),i)})));function s(){return i.apply(this,arguments)}return s}()})}),[r,t]);return(0,w.jsx)(it,{label:"\u8de8\u5c4f\u590d\u5236",placeholder:(0,w.jsx)(dn.Z,{title:"\u8bbe\u8ba1\u65f6\u5141\u8bb8\u8de8\u5c4f\u8fdb\u884c\u590d\u5236\u5c4f\u5185\u7ec4\u4ef6\u6216\u7ec4",children:(0,w.jsx)(Qn.Z,{})}),children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:null===t||void 0===t?void 0:t.show,onChange:d.bind(null,"show")})})})},at=ot,lt=fn.Z.Item,st=function(){var e=(0,v._)(E.w.STATIC_GUIDE_LINE_DRAG_INTEGER_STICKY,{show:!0}),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,v.xv)(),s=i.isGlobalActionLoading,d=(0,u.useCallback)((function(e,n){s({globalLoadingAction:function(){var i=(0,a.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.abrupt("return",r((0,l.Z)((0,l.Z)({},t),{},(0,Je.Z)({},e,n))));case 1:case"end":return i.stop()}}),i)})));function s(){return i.apply(this,arguments)}return s}()})}),[r,t]);return(0,w.jsx)(lt,{label:"\u8f85\u52a9\u7ebf\u6574\u6570\u5438\u9644",placeholder:(0,w.jsx)(dn.Z,{title:"\u8f85\u52a9\u7ebf\u62d6\u62fd\u7ed3\u675f\u65f6\uff0c\u5141\u8bb8\u5438\u9644\u5176\u6700\u8fd1\u7684\u6574\u6570\u5750\u6807",children:(0,w.jsx)(Qn.Z,{})}),children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:null===t||void 0===t?void 0:t.show,onChange:d.bind(null,"show")})})})},ct=st,ut=(0,u.forwardRef)((function(e,n){var t=e.onClose,r=(0,u.useState)(!1),i=(0,c.Z)(r,2),o=i[0],a=i[1],l=(0,u.useCallback)((function(){a(!1),null===t||void 0===t||t()}),[]),s=(0,u.useCallback)((function(){a(!0)}),[]),d=(0,u.useMemo)((function(){return(0,w.jsx)("div",{className:"ali-r",children:(0,w.jsx)(Me.Z,{onClick:l,children:"\u5173\u95ed"})})}),[l]);return(0,u.useImperativeHandle)(n,(function(){return{open:s}}),[s]),(0,w.jsx)(le.Z,{mask:!1,open:o,maskClosable:!1,onClose:l,footer:d,title:"\u672c\u5730\u914d\u7f6e\u7ba1\u7406",placement:"left",width:400,children:(0,w.jsxs)(fn.Z,{level:1,children:[(0,w.jsx)(rt,{}),(0,w.jsx)(at,{}),(0,w.jsx)(ct,{})]})})})),dt=ut,ft=t(50975),pt=function(e){return{lens:e.global.screenData.config.attr.lens}},gt=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})}}},ht=t(84008),vt=t.n(ht),mt=fn.Z.Item,xt=(0,u.forwardRef)((function(e,n){var t=(0,u.useState)(!1),r=(0,c.Z)(t,2),i=r[0],o=r[1],a=e.lens,l=e.setScreen,s=a.hueRotate,d=a.grayscale,f=a.contrast,p=a.opacity,g=a.brightness,h=a.saturate,v=a.show,m=(0,u.useCallback)((function(e,n){var t=n;try{t=n.target.value}catch(r){}l({config:{attr:{lens:(0,Je.Z)({},e,t)}}})}),[l]),x=function(){o(!0)},b=(0,u.useCallback)((function(){o(!1)}),[]);return(0,u.useImperativeHandle)(n,(function(){return{open:x}}),[]),(0,w.jsx)(le.Z,{mask:!1,open:i,maskClosable:!1,onClose:b,title:"\u5168\u5c40\u6ee4\u955c",placement:"left",width:400,children:(0,w.jsxs)(fn.Z,{level:1,children:[(0,w.jsx)(mt,{label:"\u5f00\u542f\u5168\u5c40\u6ee4\u955c",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:v,onChange:m.bind(null,"show")})})}),!!v&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(mt,{label:"\u8272\u76f8",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ft.Z,{min:0,max:360,value:s,onChange:m.bind(null,"hueRotate"),className:B()(vt()["designer-lens-config-hue-rotate"],vt()["designer-lens-config-common"])})})}),(0,w.jsx)(mt,{label:"\u9971\u548c\u5ea6",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ft.Z,{min:0,max:200,value:h,onChange:m.bind(null,"saturate"),className:B()(vt()["designer-lens-config-saturate"],vt()["designer-lens-config-common"])})})}),(0,w.jsx)(mt,{label:"\u660e\u5ea6",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ft.Z,{min:0,max:200,value:g,onChange:m.bind(null,"brightness"),className:B()(vt()["designer-lens-config-brightness"],vt()["designer-lens-config-common"])})})}),(0,w.jsx)(mt,{label:"\u5bf9\u6bd4\u5ea6",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ft.Z,{min:0,max:200,value:f,onChange:m.bind(null,"contrast"),className:B()(vt()["designer-lens-config-contrast"],vt()["designer-lens-config-common"])})})}),(0,w.jsx)(mt,{label:"\u900f\u660e\u5ea6",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ft.Z,{min:0,max:100,value:p,onChange:m.bind(null,"opacity"),className:B()(vt()["designer-lens-config-opacity"],vt()["designer-lens-config-common"])})})}),(0,w.jsx)(mt,{label:"\u7070\u5ea6",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ft.Z,{min:0,max:100,value:d,onChange:m.bind(null,"grayscale"),className:B()(vt()["designer-lens-config-grayscale"],vt()["designer-lens-config-common"])})})})]})]})})})),bt=(0,p.$j)(pt,gt,null,{forwardRef:!0})(xt),Zt=(t(18106),t(25499)),yt=t(8144);function Ct(e){var n=(0,de.pA)(),t=n.components,r=yt.ZP.getThemeColorList(e),i=t.map((function(e){var n=e.id,t=e.componentType,i=e.config,o=(0,pe.mL)(t)||{},a=o.convert,l=a(r,i.options);return!!Object.keys(l||{}).length&&{value:a?{config:{options:l}}:{},id:n,action:"update"}})).filter(Boolean);return i}var jt=Ct,_t=(t(13062),t(71230)),wt=(t(89032),t(15746)),kt=t(6767),Nt=t.n(kt),St=t(76029),Et=t.n(St),Mt=function(e){var n=e.value,t=e.checked,r=e.name,i=e.onClick,o=e.editable,a=void 0!==o&&o,s=e.onChange,c=parseInt((24/n.length).toFixed(0));return(0,w.jsx)(_t.Z,{gutter:24,className:B()((0,Je.Z)({},Et()["designer-theme-config-list-check"],t),Et()["designer-theme-config-list"]),onClick:null===i||void 0===i?void 0:i.bind(null,r),children:n.map((function(e,t){var r=(0,w.jsx)(wt.Z,{span:c,children:(0,w.jsx)("div",{className:Et()["designer-theme-config-item"],style:{backgroundColor:e}})},t);if(a){var i=Nt()(e).object();return(0,w.jsx)(et.Z,{value:(0,l.Z)((0,l.Z)({},i),{},{a:i.alpha||1}),onChange:function(e){var r=(0,yt.AT)(e,!0),i=(0,se.Z)(n);i.splice(t,1,r),null===s||void 0===s||s(i)},children:r},t)}return r}))},r)},Tt=Mt,Lt=(t(57757),t(82530)),It=(t(43185),t(32620)),At=t(6702);if(!Rt)var Rt={map:function(e,n){var t={};return n?e.map((function(e,r){return t.index=r,n.call(t,e)})):e.slice()},naturalOrder:function(e,n){return e<n?-1:e>n?1:0},sum:function(e,n){var t={};return e.reduce(n?function(e,r,i){return t.index=i,e+n.call(t,r)}:function(e,n){return e+n},0)},max:function(e,n){return Math.max.apply(null,n?Rt.map(e,n):e)}};var Pt=function(){var e=5,n=8-e,t=1e3;function r(n,t,r){return(n<<2*e)+(t<<e)+r}function i(e){var n=[],t=!1;function r(){n.sort(e),t=!0}return{push:function(e){n.push(e),t=!1},peek:function(e){return t||r(),void 0===e&&(e=n.length-1),n[e]},pop:function(){return t||r(),n.pop()},size:function(){return n.length},map:function(e){return n.map(e)},debug:function(){return t||r(),n}}}function o(e,n,t,r,i,o,a){this.r1=e,this.r2=n,this.g1=t,this.g2=r,this.b1=i,this.b2=o,this.histo=a}function a(){this.vboxes=new i((function(e,n){return Rt.naturalOrder(e.vbox.count()*e.vbox.volume(),n.vbox.count()*n.vbox.volume())}))}function l(e,n){if(n.count()){var t=n.r2-n.r1+1,i=n.g2-n.g1+1,o=Rt.max([t,i,n.b2-n.b1+1]);if(1==n.count())return[n.copy()];var a,l,s,c,u=0,d=[],f=[];if(o==t)for(a=n.r1;a<=n.r2;a++){for(c=0,l=n.g1;l<=n.g2;l++)for(s=n.b1;s<=n.b2;s++)c+=e[r(a,l,s)]||0;d[a]=u+=c}else if(o==i)for(a=n.g1;a<=n.g2;a++){for(c=0,l=n.r1;l<=n.r2;l++)for(s=n.b1;s<=n.b2;s++)c+=e[r(l,a,s)]||0;d[a]=u+=c}else for(a=n.b1;a<=n.b2;a++){for(c=0,l=n.r1;l<=n.r2;l++)for(s=n.g1;s<=n.g2;s++)c+=e[r(l,s,a)]||0;d[a]=u+=c}return d.forEach((function(e,n){f[n]=u-e})),function(e){var t,r,i,o,l,s=e+"1",c=e+"2",p=0;for(a=n[s];a<=n[c];a++)if(d[a]>u/2){for(i=n.copy(),o=n.copy(),l=(t=a-n[s])<=(r=n[c]-a)?Math.min(n[c]-1,~~(a+r/2)):Math.max(n[s],~~(a-1-t/2));!d[l];)l++;for(p=f[l];!p&&d[l-1];)p=f[--l];return i[c]=l,o[s]=i[c]+1,[i,o]}}(o==t?"r":o==i?"g":"b")}}return o.prototype={volume:function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(e){var n=this.histo;if(!this._count_set||e){var t,i,o,a=0;for(t=this.r1;t<=this.r2;t++)for(i=this.g1;i<=this.g2;i++)for(o=this.b1;o<=this.b2;o++)a+=n[r(t,i,o)]||0;this._count=a,this._count_set=!0}return this._count},copy:function(){return new o(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(n){var t=this.histo;if(!this._avg||n){var i,o,a,l,s=0,c=1<<8-e,u=0,d=0,f=0;for(o=this.r1;o<=this.r2;o++)for(a=this.g1;a<=this.g2;a++)for(l=this.b1;l<=this.b2;l++)s+=i=t[r(o,a,l)]||0,u+=i*(o+.5)*c,d+=i*(a+.5)*c,f+=i*(l+.5)*c;this._avg=s?[~~(u/s),~~(d/s),~~(f/s)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(e){var t=e[0]>>n;return gval=e[1]>>n,bval=e[2]>>n,t>=this.r1&&t<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},a.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var n=this.vboxes,t=0;t<n.size();t++)if(n.peek(t).vbox.contains(e))return n.peek(t).color;return this.nearest(e)},nearest:function(e){for(var n,t,r,i=this.vboxes,o=0;o<i.size();o++)((t=Math.sqrt(Math.pow(e[0]-i.peek(o).color[0],2)+Math.pow(e[1]-i.peek(o).color[1],2)+Math.pow(e[2]-i.peek(o).color[2],2)))<n||void 0===n)&&(n=t,r=i.peek(o).color);return r},forcebw:function(){var e=this.vboxes;e.sort((function(e,n){return Rt.naturalOrder(Rt.sum(e.color),Rt.sum(n.color))}));var n=e[0].color;n[0]<5&&n[1]<5&&n[2]<5&&(e[0].color=[0,0,0]);var t=e.length-1,r=e[t].color;r[0]>251&&r[1]>251&&r[2]>251&&(e[t].color=[255,255,255])}},{quantize:function(s,c){if(!s.length||c<2||c>256)return!1;var u=function(t){var i,o=new Array(1<<3*e);return t.forEach((function(e){i=r(e[0]>>n,e[1]>>n,e[2]>>n),o[i]=(o[i]||0)+1})),o}(s);u.forEach((function(){}));var d=function(e,t){var r,i,a,l=1e6,s=0,c=1e6,u=0,d=1e6,f=0;return e.forEach((function(e){(r=e[0]>>n)<l?l=r:r>s&&(s=r),(i=e[1]>>n)<c?c=i:i>u&&(u=i),(a=e[2]>>n)<d?d=a:a>f&&(f=a)})),new o(l,s,c,u,d,f,t)}(s,u),f=new i((function(e,n){return Rt.naturalOrder(e.count(),n.count())}));function p(e,n){for(var r,i=e.size(),o=0;o<t;){if(i>=n)return;if(o++>t)return;if((r=e.pop()).count()){var a=l(u,r),s=a[0],c=a[1];if(!s)return;e.push(s),c&&(e.push(c),i++)}else e.push(r),o++}}f.push(d),p(f,.75*c);for(var g=new i((function(e,n){return Rt.naturalOrder(e.count()*e.volume(),n.count()*n.volume())}));f.size();)g.push(f.pop());p(g,c);for(var h=new a;g.size();)h.push(g.pop());return h}}}().quantize,Ot=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.naturalWidth,this.height=this.canvas.height=e.naturalHeight,this.context.drawImage(e,0,0,this.width,this.height)};Ot.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var Dt=function(){};Dt.prototype.getColor=function(e,n){return void 0===n&&(n=10),this.getPalette(e,5,n)[0]},Dt.prototype.getPalette=function(e,n,t){var r=function(e){var n=e.colorCount,t=e.quality;if(void 0!==n&&Number.isInteger(n)){if(1===n)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");n=Math.max(n,2),n=Math.min(n,20)}else n=10;return(void 0===t||!Number.isInteger(t)||t<1)&&(t=10),{colorCount:n,quality:t}}({colorCount:n,quality:t}),i=new Ot(e),o=function(e,n,t){for(var r=e,i=[],o=0,a=void 0,l=void 0,s=void 0,c=void 0,u=void 0;o<n;o+=t)l=r[0+(a=4*o)],s=r[a+1],c=r[a+2],(void 0===(u=r[a+3])||u>=125)&&(l>250&&s>250&&c>250||i.push([l,s,c]));return i}(i.getImageData().data,i.width*i.height,r.quality),a=Pt(o,r.colorCount);return a?a.palette():null},Dt.prototype.getColorFromUrl=function(e,n,t){var r=this,i=document.createElement("img");i.addEventListener("load",(function(){var o=r.getPalette(i,5,t);n(o[0],e)})),i.src=e},Dt.prototype.getImageData=function(e,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){if(200==this.status){var e=new Uint8Array(this.response);i=e.length;for(var t=new Array(i),r=0;r<e.length;r++)t[r]=String.fromCharCode(e[r]);var o=t.join(""),a=window.btoa(o);n("data:image/png;base64,"+a)}},t.send()},Dt.prototype.getColorAsync=function(e,n,t){var r=this;this.getImageData(e,(function(e){var i=document.createElement("img");i.addEventListener("load",(function(){var e=r.getPalette(i,5,t);n(e[0],this)})),i.src=e}))};var zt=Dt,Ft=6,Gt=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t,r,i,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=URL.createObjectURL(n),r=new Image,e.next=5,new Promise((function(e,n){r.onload=e,r.onerror=n,r.src=t}));case 5:return i=new zt,e.next=8,i.getColor(r);case 8:return e.sent,e.next=11,i.getPalette(r,Ft);case 11:return a=e.sent,e.abrupt("return",(0,se.Z)(a));case 15:e.prev=15,e.t0=e["catch"](0),console.error(e.t0),z.default.info("\u83b7\u53d6\u989c\u8272\u5931\u8d25");case 19:return e.abrupt("return",[]);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(n){return e.apply(this,arguments)}}(),Wt=Gt,Ht=t(53549),Yt=t.n(Ht),qt=function(e){var n=e.onChange,t=(0,u.useState)([]),r=(0,c.Z)(t,2),i=r[0],l=r[1],s=(0,v.xv)(),d=s.isGlobalActionLoading,f=(0,u.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.fileList,e.abrupt("return",d({globalLoadingAction:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,i,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.length){e.next=16;break}return t=(0,c.Z)(r,1),i=t[0],l([i]),e.prev=3,e.next=6,Wt(i.originFileObj);case 6:a=e.sent,null===n||void 0===n||n([a.slice(0,6).map((function(e){return Nt()(e).hex()}))]),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),z.default.info("\u56fe\u7247\u89e3\u6790\u5931\u8d25"),l([]);case 14:e.next=17;break;case 16:l([]);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]);return(0,w.jsx)(It.Z,{listType:"picture-card",fileList:i,onChange:f,beforeUpload:function(){return!1},accept:"image/*",multiple:!1,className:Yt()["designer-theme-config-custom-upload"],children:i.length>=1?null:(0,w.jsx)(At.pF,{})})},Bt=qt,Jt=function(){return"custom_".concat(Date.now())},Ut=function(e){var n=e.theme,t=e.setScreen,r=e.setComponent,i=(0,u.useState)(n.color?[n.color]:[yt.ZP.getThemeColorList(n.value)]),o=(0,c.Z)(i,2),a=o[0],l=o[1],s=(0,u.useState)((function(){return"custom"===n.type?n.value:Jt()})),d=(0,c.Z)(s,2),f=d[0],p=d[1],g=(0,u.useCallback)((function(e,n){t({config:{attr:{theme:{type:"custom",value:n,color:e}}}}),yt.ZP.initCurrentThemeData({type:"custom",value:n,color:e}),r(jt(n)),Ge.FW.emitDebounce(Ge.JW.SCREEN_THEME_CHANGE)}),[]),h=(0,u.useCallback)((function(e,n,t){var r=(0,se.Z)(a);if(r.splice(e,1,t),l(r),n){var i=Jt();p(i),g(t,i)}}),[a]);return(0,w.jsxs)("div",{className:Yt()["designer-theme-config-custom"],children:[(0,w.jsx)(Bt,{onChange:function(e){l(e),p(Jt())}}),(0,w.jsx)(Ee.Z,{direction:"vertical",className:"w-100",children:a.map((function(e,t){var r="custom"===n.type&&n.value===f;return(0,w.jsxs)("div",{className:B()("w-100 dis-flex",Yt()["designer-theme-config-custom-item"]),children:[(0,w.jsx)("div",{className:"m-r-4",children:(0,w.jsx)(Lt.ZP,{checked:r,onChange:g.bind(null,e,f)})}),(0,w.jsx)("div",{className:"w-100 h-100",children:(0,w.jsx)(Tt,{name:"custom",value:e,checked:r,editable:!0,onChange:h.bind(null,t,r)},"custom")})]},"custom")}))})]})},Vt=(0,p.$j)((function(e){return{theme:e.global.screenData.config.attr.theme}}),(function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})},setComponent:function(n){return e({type:"global/setComponent",value:n})}}}))(Ut),$t=function(e){return{theme:e.global.screenData.config.attr.theme}},Kt=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})},setComponent:function(n){return e({type:"global/setComponent",value:n})}}},Xt=(0,u.forwardRef)((function(e,n){var t=(0,u.useState)(!1),r=(0,c.Z)(t,2),i=r[0],o=r[1],a=e.theme,l=e.setScreen,s=e.setComponent,d=a.type,f=a.value,p=(a.color,(0,u.useMemo)((function(){return yt.ZP.themeNameList.reduce((function(e,n){return yt.ZP.isInternalThemeName(n)&&(e[n]=yt.ZP.getThemeColorList(n).slice(0,6)),e}),{})}),[])),g=(0,u.useCallback)((function(e,n){var t=n;try{t=n.target.value}catch(r){}l({config:{attr:{theme:{type:e,value:t}}}}),yt.ZP.initCurrentThemeData(t),s(jt(t)),Ge.FW.emitDebounce(Ge.JW.SCREEN_THEME_CHANGE)}),[l]),h=function(){o(!0)},v=(0,u.useCallback)((function(){o(!1)}),[]);return(0,u.useImperativeHandle)(n,(function(){return{open:h}}),[]),(0,w.jsx)(le.Z,{mask:!1,open:i,maskClosable:!1,onClose:v,title:"\u4e3b\u9898\u8272\u4fee\u6539",placement:"left",width:400,children:(0,w.jsx)(Zt.Z,{className:Et()["designer-theme-config"],centered:!0,defaultActiveKey:d,items:[{key:"internal",label:"\u4e3b\u9898\u8272\u9009\u62e9",children:(0,w.jsx)(Ee.Z,{direction:"vertical",className:"w-100 h-100",children:Object.entries(p).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return(0,w.jsx)(Tt,{value:r,name:t,onClick:g.bind(null,"internal"),checked:f===t},t)}))})},{key:"custom",label:"\u81ea\u5b9a\u4e49\u4e3b\u9898",forceRender:!0,children:(0,w.jsx)(Vt,{})}]})})})),Qt=(0,p.$j)($t,Kt,null,{forwardRef:!0})(Xt),er=t(28832),nr=t(11142),tr=t.n(nr),rr=t(72716),ir=function(e){try{return JSON.stringify(tr().parse(e||""))}catch(n){return e||""}},or=function(e){var n=e.value,t=e.onChange,r=e.language,i=void 0===r?"json":r,o=(0,u.useState)((function(){return ir(n||"")})),a=(0,c.Z)(o,2),l=a[0],s=a[1],d=(0,u.useCallback)((function(e){null===t||void 0===t||t(e)}),[t]);return(0,w.jsx)("div",{children:(0,w.jsx)(rr.Z,{language:i,width:192,height:138,bordered:!0,value:l,onChange:s,onBlur:d,blurCanScroll:!0,autoFormat:{mount:"json"===i,blur:!1}})})},ar=or,lr=function(e){return{request:e.global.screenData.config.attr.request}},sr=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})}}},cr=t(13216),ur=t(39292),dr=t.n(ur),fr=fn.Z.Item,pr=(0,u.forwardRef)((function(e,n){var t=(0,u.useState)(!1),r=(0,c.Z)(t,2),i=r[0],o=r[1],a=e.request,l=e.setScreen,s=a.method,d=a.headers,f=a.body,p=a.serviceRequest,g=a.frequency,h=(0,u.useCallback)((function(e,n){var t=n;try{t=n.target.value}catch(r){}l({config:{attr:{request:(0,Je.Z)({},e,t)}}})}),[l]),v=function(){o(!0)},m=(0,u.useCallback)((function(){o(!1)}),[]);return(0,u.useImperativeHandle)(n,(function(){return{open:v}}),[]),(0,w.jsx)(le.Z,{mask:!1,open:i,maskClosable:!1,onClose:m,title:"\u9ed8\u8ba4\u8bf7\u6c42\u914d\u7f6e",placement:"left",width:400,children:(0,w.jsxs)(fn.Z,{level:1,children:[(0,w.jsx)(fr,{label:"\u8bf7\u6c42\u65b9\u6cd5",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(Ve.Z,{className:"w-100 c-f-s",defaultValue:"POST",value:s,onChange:h.bind(null,"method"),options:[{label:"POST"},{label:"GET"}]})})}),(0,w.jsx)(fr,{label:"\u8bf7\u6c42\u5934",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ar,{value:d,onChange:h.bind(null,"headers")})})}),(0,w.jsx)(fr,{label:"\u8bf7\u6c42\u53c2\u6570",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(ar,{value:f,onChange:h.bind(null,"body")})})}),(0,w.jsx)(fr,{label:"\u670d\u52a1\u7aef\u8bf7\u6c42",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:p,onChange:h.bind(null,"serviceRequest")})})}),(0,w.jsxs)(fr,{label:"\u81ea\u52a8\u66f4\u65b0\u8bf7\u6c42",children:[(0,w.jsx)(cr.Z,{style:{width:"30%"},children:(0,w.jsx)(cn.Z,{checked:g.show,onChange:function(e){return h("frequency",{show:e})}})}),(0,w.jsxs)(cr.Z,{style:{width:"66%"},children:[(0,w.jsx)(er.Z,{value:g.value||0,disabled:!g.show,onChange:function(e){return h("frequency",{value:e})},controls:!1,className:dr()["request-default-config-frequency"]}),(0,w.jsx)("span",{className:"c-f-s",children:" \u79d2\u4e00\u6b21"})]})]})]})})})),gr=(0,p.$j)(lr,sr,null,{forwardRef:!0})(pr),hr=function(e){var n,t,r;return{guideLineShow:null!==(n=(0,ce.get)(e,"global.guideLine.show"))&&void 0!==n&&n,guideLineData:(0,ce.get)(e,"global.guideLine"),isUndoDisabled:null===(t=(0,ce.get)(e,"global.history.isUndoDisabled"))||void 0===t||t,isRedoDisabled:null===(r=(0,ce.get)(e,"global.history.isRedoDisabled"))||void 0===r||r}},vr=function(e){return{setGuideLine:function(n){return e({type:"global/setGuideLine",value:n})},undo:function(){return e({type:"global/undo"})},redo:function(){return e({type:"global/redo"})}}},mr=t(31528),xr=t.n(mr),br=B()("ac-i-size-m",xr()["design-left-tool-icon"]),Zr=function(e){var n,t=e.isRedoDisabled,r=e.redo,i=e.onClick,l=(0,Le.Z)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(r(),null===i||void 0===i||i("redo"));case 1:case"end":return e.stop()}}),e)}))),{wait:200}),s=l.run;return(0,w.jsx)(V.Z,{Component:Pn.Z,title:"\u91cd\u505a",onClick:s,className:B()(br,(n={},(0,Je.Z)(n,xr()["design-left-tool-icon-n-a-w"],!!t),(0,Je.Z)(n,"c-po",!t),(0,Je.Z)(n,xr()["design-left-tool-icon-hover"],!t),n))})},yr=(0,p.$j)(hr,vr)(Zr),Cr=function(e){var n,t=e.isUndoDisabled,r=e.undo,i=e.onClick,l=(0,Le.Z)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(r(),null===i||void 0===i||i("undo"));case 1:case"end":return e.stop()}}),e)}))),{wait:200}),s=l.run;return(0,w.jsx)(V.Z,{Component:On.Z,title:"\u64a4\u9500",onClick:s,className:B()(br,(n={},(0,Je.Z)(n,xr()["design-left-tool-icon-n-a-w"],!!t),(0,Je.Z)(n,"c-po",!t),(0,Je.Z)(n,xr()["design-left-tool-icon-hover"],!t),n))})},jr=(0,p.$j)(hr,vr)(Cr),_r=function(e){var n=e.onClick,t=(0,u.useRef)(null),r=(0,Le.Z)((function(){var e;null===(e=t.current)||void 0===e||e.open(),null===n||void 0===n||n("callback")}),{wait:200}),i=r.run;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Dn.Z,{title:"\u56de\u8c03\u7ba1\u7406",className:B()(br,"c-po",xr()["design-left-tool-icon-hover"]),onClick:i}),(0,w.jsx)(Gn.Z,{ref:t})]})},wr=function(e){var n=e.onClick,t=(0,u.useRef)(null),r=(0,Le.Z)((function(){var e;null===(e=t.current)||void 0===e||e.open(),null===n||void 0===n||n("constant")}),{wait:200}),i=r.run;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(zn.Z,{title:"\u5e38\u91cf\u7ba1\u7406",className:B()(br,"c-po",xr()["design-left-tool-icon-hover"]),onClick:i}),(0,w.jsx)(Xn,{ref:t})]})},kr=function(e){var n=e.onClick,t=(0,u.useRef)(null),r=(0,Le.Z)((function(){var e;null===(e=t.current)||void 0===e||e.open(),null===n||void 0===n||n("localConfig")}),{wait:200}),i=r.run;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Fn.Z,{title:"\u672c\u5730\u914d\u7f6e\u7ba1\u7406",className:B()(br,"c-po",xr()["design-left-tool-icon-hover"]),onClick:i}),(0,w.jsx)(dt,{ref:t})]})},Nr=function(e){var n=e.onClick,t=(0,u.useRef)(null),r=(0,Le.Z)((function(){var e;null===(e=t.current)||void 0===e||e.open(),null===n||void 0===n||n("lens")}),{wait:200}),i=r.run;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(oe.Z,{type:"icon-iconlvjingkua",title:"\u5168\u5c40\u6ee4\u955c",className:B()(br,"c-po",xr()["design-left-tool-icon-hover"]),onClick:i}),(0,w.jsx)(bt,{ref:t})]})},Sr=function(e){var n=e.onClick,t=(0,u.useRef)(null),r=(0,Le.Z)((function(){var e;null===(e=t.current)||void 0===e||e.open(),null===n||void 0===n||n("lens")}),{wait:200}),i=r.run;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(oe.Z,{type:"icon-ziyuan",title:"\u4e3b\u9898\u8272\u9009\u62e9",className:B()(br,"c-po",xr()["design-left-tool-icon-hover"]),onClick:i}),(0,w.jsx)(Qt,{ref:t})]})},Er=function(e){var n=e.onClick,t=(0,u.useRef)(null),r=(0,Le.Z)((function(){var e;null===(e=t.current)||void 0===e||e.open(),null===n||void 0===n||n("requestDefault")}),{wait:200}),i=r.run;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(oe.Z,{type:"icon-datafull",title:"\u8bf7\u6c42\u9ed8\u8ba4\u914d\u7f6e",className:B()(br,"c-po",xr()["design-left-tool-icon-hover"]),onClick:i}),(0,w.jsx)(gr,{ref:t})]})},Mr=function(e){var n=(0,Rn.Z)({},e);return(0,w.jsxs)("div",{className:B()(xr()["page-design-left-tool-bar"],"border-r-8","ali-cen","dis-flex-column","border-1","normal-background","pos-sti","page-design-left-tool-bar","zero-scrollbar"),children:[(0,w.jsx)(jr,(0,l.Z)({},n)),(0,w.jsx)(yr,(0,l.Z)({},n)),(0,w.jsx)(_r,(0,l.Z)({},n)),(0,w.jsx)(Er,(0,l.Z)({},n)),(0,w.jsx)(wr,(0,l.Z)({},n)),(0,w.jsx)(kr,(0,l.Z)({},n)),(0,w.jsx)(Nr,(0,l.Z)({},n)),(0,w.jsx)(Sr,(0,l.Z)({},n))]})},Tr=Mr,Lr=(t(30887),t(31711)),Ir=(t(7359),t(46445)),Ar=t(25782),Rr=(t(13254),t(14277)),Pr=function(e){return(0,w.jsx)(Rr.Z,(0,l.Z)({},e))},Or=Pr,Dr=t(25234),zr=t(36926),Fr=t.n(zr),Gr=Ir.Z.Panel,Wr=function(e){var n=e.type,t=e.componentCollapse,r=(0,u.useState)([]),i=(0,c.Z)(r,2),o=i[0],a=i[1],s=(0,u.useMemo)((function(){return gn.COMPONENT_TYPE_LIST.find((function(e){return e.type===n}))}),[n]),d=(0,u.useCallback)((function(e){a(e)}),[]),f=(0,u.useMemo)((function(){return null!==s&&void 0!==s&&s.children.length?s.children.map((function(e){var n=e.type,t=e.title,r=e.children;return(0,w.jsx)(Gr,{header:t,children:(0,w.jsx)(_t.Z,{gutter:24,children:r&&r.length?r.map((function(e){return(0,u.createElement)(Dr.Z,(0,l.Z)((0,l.Z)({},e),{},{key:e.type}))})):(0,w.jsx)(Or,{})})},n)})):null}),[s]);return null!==s&&void 0!==s&&s.children.length?((0,u.useEffect)((function(){if(null!==s&&void 0!==s&&s.children.length){var e=s.children.find((function(e){return!!e.children.length}));e&&a([e.type])}}),[s]),(0,w.jsx)(Ir.Z,{className:B()(Fr()["design-left-component-list"],(0,Je.Z)({},Fr()["design-left-component-list-show"],!t),"normal-background","zero-scrollbar","design-left-component-list"),bordered:!1,ghost:!0,activeKey:o,expandIcon:function(e){var n=e.isActive;return(0,w.jsx)(Ar.Z,{rotate:n?90:0})},onChange:d,children:f})):(0,w.jsx)(Or,{description:"\u6682\u65e0\u7ec4\u4ef6",className:B()(Fr()["design-left-component-list"],"border-r-8","normal-background")})},Hr=(0,p.$j)((function(e){return{componentCollapse:e.local.componentCollapse}}),(function(){return{}}))(Wr),Yr=t(81954),qr=t.n(Yr),Br=function(e){var n=e.onChange,t=e.menuClass,r=(0,u.useState)(gn.COMPONENT_TYPE_LIST[0].type),i=(0,c.Z)(r,2),o=i[0],a=i[1],l=(0,u.useCallback)((function(e){var t=e.key;a(t),null===n||void 0===n||n(t)}),[]),s=(0,u.useMemo)((function(){return gn.COMPONENT_TYPE_LIST.map((function(e){var n=e.type,t=e.icon,r=e.title;return{key:n,label:t,title:r}}))}),[o]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:B()(qr()["page-design-left-component-list"],"pos-sti"),children:(0,w.jsx)(Lr.Z,{theme:"dark",mode:"vertical",onClick:l,className:B()(qr()["page-design-left-component-list-content"],"zero-scrollbar",t),selectedKeys:[o],items:s})}),(0,w.jsx)(Hr,{type:o})]})},Jr=Br,Ur=t(69610),Vr=t(54941),$r=t(81306),Kr=t(80017),Xr=t(58161),Qr=t(85663),ei=t(34707),ni=t(74734),ti=t.n(ni),ri=function(e){var n=e.onBack,t=e.iconMode,r=e.onIconModeChange;return(0,w.jsxs)("div",{className:B()(ti()["design-layer-manage-content-header"],"pos-sti","dis-flex","p-lr-4"),children:[(0,w.jsx)(Qr.Z,{className:"m-r-8 c-po",onClick:n}),(0,w.jsx)("div",{className:"text-ellipsis",children:"\u56fe\u5c42\u7ba1\u7406"}),t?(0,w.jsx)(oe.Z,{type:"icon-icon_list",className:"m-l-8 c-po",onClick:null===r||void 0===r?void 0:r.bind(null,!1)}):(0,w.jsx)(ei.Z,{className:"m-l-8 c-po",onClick:null===r||void 0===r?void 0:r.bind(null,!0)})]})},ii=ri,oi=(t(32157),t(95795)),ai=t(80454),li=t.n(ai),si=t(90105),ci=t(91816),ui=t(63258),di=t(27347),fi=t(83446),pi=t(92554),gi=t(95357),hi=t(88633),vi=function(e){var n=e.visible,t=e.onChange,r=e.disabled,i=(0,u.useCallback)((function(e){e.stopPropagation(),r||t({config:{attr:{visible:!n}}})}),[n,t,r]),o=(0,u.useMemo)((function(){return n?(0,w.jsx)(gi.Z,{className:"c-po",onClick:i}):(0,w.jsx)(hi.Z,{className:"c-po",onClick:i})}),[n,i]);return o},mi=vi,xi=t(9645),bi=t.n(xi),Zi=(0,u.forwardRef)((function(e,n){var t=e.value,r=e.onChange,i=e.disabled,o=t.name,a=t.id,l=(0,u.useState)(!1),s=(0,c.Z)(l,2),d=s[0],f=s[1],p=(0,u.useCallback)((function(e){var n=e.target.value||o;f(!1),r({name:n})}),[r,a,o]),g=(0,u.useCallback)((function(e){i||f(!0)}),[i]),h=(0,u.useMemo)((function(){return d?(0,w.jsx)(F.Z,{className:bi()["design-page-layer-item-name-size"],defaultValue:o,onBlur:p,autoFocus:!0}):(0,w.jsx)("div",{onDoubleClick:g,className:B()("c-po","p-lr-4",bi()["design-page-layer-item-name-basic"],bi()["design-page-layer-item-name-size"]),title:o,children:o})}),[d,o,p,g]);return(0,u.useImperativeHandle)(n,(function(){return{changeEditStatus:function(e){f(e)}}}),[]),h})),yi=Zi,Ci=t(2603),ji=t(58988),_i=function(e){var n=e.lock,t=e.onChange,r=e.className,i=e.style,o=e.disabled,a=(0,u.useCallback)((function(e){e.stopPropagation(),o||t({config:{attr:{lock:!n}}})}),[n,t,o]),s=(0,u.useMemo)((function(){return n?(0,w.jsx)(Ci.Z,{style:(0,l.Z)({cursor:"pointer",opacity:o?.7:1},i),onClick:a,className:B()("c-po",r)}):(0,w.jsx)(ji.Z,{style:(0,l.Z)({cursor:"pointer",opacity:o?.7:1},i),onClick:a,className:B()("c-po",r)})}),[n,a,i,r,o]);return s},wi=_i,ki=function(e){var n,t=e.value,r=e.path,i=e.update,o=e.isLeaf,a=e.disabled,l=e.isExpend,s=e.iconMode,d=t.id,f=t.config.attr,p=f.visible,g=f.lock,h=t.parent,m=t.componentType,x=(0,u.useTransition)(),b=(0,c.Z)(x,2),Z=b[1],y=(0,di.Z)(!1),C=(0,c.Z)(y,2),j=C[0],_=C[1],k=(0,u.useRef)(null),N=(0,u.useRef)(),S=(0,v.SU)(),E=(0,c.Z)(S,3),M=E[2],T=(0,v.iN)(),L=(0,c.Z)(T,2),I=L[1];(0,fi.Z)(N,{onChange:function(e){Z((function(){I(e?d:"")}))}});var A=(0,u.useMemo)((function(){return gn.COMPONENT_ICON_MAP[m]}),[m]),R=(0,u.useCallback)((function(e){var n;null===(n=K.ZP.setComponent)||void 0===n||n.call(K.ZP,e),null===i||void 0===i||i()}),[]),P=(0,u.useCallback)((function(e){R({value:e,id:d,path:r,action:"update"})}),[R]),O=(0,u.useCallback)((function(e){var n;"edit_name"===e&&(null===(n=k.current)||void 0===n||n.changeEditStatus(!0))}),[]),D=(0,u.useMemo)((function(){if(!j)return{};var e={opacity:1};return e}),[j,d]),z=(0,u.useCallback)((function(e){a&&e.stopPropagation()}),[a]),F=(0,u.useMemo)((function(){return s?o?(0,w.jsx)("div",{className:B()(bi()["design-page-layer-item-icon"],bi()["design-page-layer-item-icon-leaf"],"m-r-8"),children:(0,w.jsx)("img",{src:A})}):(0,w.jsx)("div",{className:B()(bi()["design-page-layer-item-icon"],"m-r-8"),children:l?(0,w.jsx)(ci.Z,{}):(0,w.jsx)(ui.Z,{})}):null}),[o,A,l,s]);return(0,u.useEffect)((function(){return M((function(e){_(d===e)}))}),[]),(0,w.jsx)(pi.Z,{actionIgnore:["undo","redo"],value:t,path:r,onClick:O,actionFrom:"layer",children:(0,w.jsxs)("div",{className:B()(bi()["design-page-layer-item"],(n={},(0,Je.Z)(n,bi()["design-page-layer-item-hover"],!a),(0,Je.Z)(n,bi()["design-page-layer-item-mode-icon"],s),(0,Je.Z)(n,bi()["design-page-layer-item-mode-list"],!s),(0,Je.Z)(n,bi()["design-page-layer-item-disabled"],!!a),(0,Je.Z)(n,bi()["design-page-layer-item-lock"],!!g),n),"dis-flex","p-lr-4"),style:D,onClick:z,ref:N,children:[F,(0,w.jsx)("div",{className:B()(bi()["design-page-layer-item-name"]),children:(0,w.jsx)(yi,{value:t,onChange:P,ref:k,disabled:a})}),(0,w.jsx)("div",{className:B()(bi()["design-page-layer-item-action"],"dis-flex"),children:(0,w.jsxs)(Ee.Z,{size:"large",children:[(0,w.jsx)(mi,{disabled:a,visible:p,onChange:P}),(0,w.jsx)(wi,{disabled:!!h,lock:g,onChange:P})]})})]})})},Ni=ki,Si=t(36070),Ei=function(e){return{components:e.global.components||[],flag:e.global.screenData.config.flag.type,select:e.global.select}},Mi=function(e){return{setComponentAll:function(n){return e({type:"global/setComponentAll",value:n})},setSelect:function(n){return e({type:"global/setSelect",value:n})}}},Ti=t(20345),Li=t.n(Ti),Ii=function(e){var n=e.select,t=e.components,r=(0,u.useMemo)((function(){return n[n.length-1]}),[n]),i=(0,u.useMemo)((function(){return(0,de.DW)(n[n.length-1])}),[n]),o=(0,u.useMemo)((function(){return(0,de.Xr)(r,t)}),[r,t]);return(0,l.Z)((0,l.Z)({actionFrom:"layer",childrenType:"button"},(0,ce.pick)(e,["flag","setComponentAll","setSelect","components","select"])),{},{clipboard:{timestamps:0,value:[]},setClipboard:ce.noop,setComponent:K.ZP.setComponent,onClick:ce.noop,value:o,path:i,disabled:!n.length||!o})},Ai=function(e){var n=Ii(e);return(0,w.jsx)("div",{className:Li()["layer-action-bar-header"],style:n.disabled?{height:0}:{},children:!n.disabled&&(0,w.jsxs)(Ee.Z,{size:"middle",children:[(0,w.jsx)(Si.iy,(0,l.Z)({},n)),(0,w.jsx)(Si.At,(0,l.Z)({},n)),(0,w.jsx)(Si.FV,(0,l.Z)({},n)),(0,w.jsx)(Si.Z5,(0,l.Z)({},n))]})})},Ri=(0,p.$j)(Ei,Mi)(Ai),Pi=function(e){var n=Ii(e);return(0,w.jsx)("div",{className:Li()["layer-action-bar-footer"],style:n.disabled?{height:0}:{},children:!n.disabled&&(0,w.jsxs)(Ee.Z,{size:"middle",children:[(0,w.jsx)(Si.IR,(0,l.Z)({},n)),(0,w.jsx)(Si.sL,(0,l.Z)({},n)),(0,w.jsx)(Si.IG,(0,l.Z)({},n)),(0,w.jsx)(Si.on,(0,l.Z)({},n))]})})},Oi=(0,p.$j)(Ei,Mi)(Pi),Di=function(e){return{components:e.global.components||[],select:e.global.select||[]}},zi=function(e){return{setSelect:function(n){return e({type:"global/setSelect",value:n})}}},Fi=t(19728),Gi=t.n(Fi),Wi=["path"],Hi=function(e){var n=e.components,t=e.setSelect,r=e.select,i=e.iconMode,o=e.disabled,a=(0,u.useState)([]),s=(0,c.Z)(a,2),d=s[0],f=s[1],p=(0,si.Z)(),g=(0,u.useCallback)((function(e){var n=(0,v.xt)(),t=e.map((function(e){return n[e]})).filter(Boolean);return t=li()(t,t.length-1,1),t.reduce((function(e,n,t){var r=!e.some((function(e){return(e.path.startsWith(n.path)||n.path.startsWith(e.path))&&n!==e&&e.path.split(".")[0]===n.path.split(".")[0]}));return r&&e.push(n),e}),[]).map((function(e){return e.id}))}),[]),h=(0,u.useCallback)((function(e,n){var r=g(e);t(r)}),[g,t]),m=(0,u.useCallback)((function(e){f(e)}),[]),x=(0,u.useCallback)((function(e){return(0,v.pr)(e,(function(e,n,t,r,o){var a=e.path,l=(0,Te.Z)(e,Wi),s=l.id,c=l.type,u=l.components,f=c===Xr.c0.COMPONENT,g=!f&&d.includes(s);return{title:(0,w.jsx)(Ni,{value:l,path:a,update:p,isLeaf:f,disabled:t,isExpend:g,iconMode:i}),key:s,isLeaf:f,checkable:o,children:f?[]:r(u,t,n,!1)}}),!0)}),[p,d,i]),b=function(e){var n=e.node,t=e.dragNode,i=e.dropToGap,o=e.dropPosition,a=(0,ce.pick)(n,["key","pos"]),s=(0,ce.pick)(t,["key"]);return{node:(0,l.Z)((0,l.Z)({},a),{},{hasChildren:(n.props.children||[]).length>0,expanded:n.props.expanded}),dragNode:s,dropToGap:i,dropPosition:o,select:r}},Z=(0,u.useCallback)((function(e){try{var t=(0,v.xt)(),i=t[e].path,o=(0,ce.get)(n,i);if(o.parent){var a=e;(0,de.cJ)(o)||(a=o.parent);var l=(0,de.OB)(a),s=(0,c.Z)(l,1),u=s[0];return!r.some((function(e){return[].concat((0,se.Z)(u),[a]).includes(e)}))}return!0}catch(d){return!1}}),[n,r]),y=(0,u.useCallback)((function(e){e.event;var n=e.node,i=n.key,o=(0,de.jH)(i),a=[].concat((0,se.Z)(r.filter((function(e){return!o.includes(e)}))),[i]);t(a)}),[r,t]),C=(0,u.useCallback)((function(e){var n=b(e),t=n.node,i=n.dragNode,o=n.dropToGap,a=n.dropPosition;Z(t.key)&&K.ZP.setComponent({action:"drag",value:{},id:"",extra:{node:t,dragNode:i,dropToGap:o,dropPosition:a,select:r}})}),[n,r,Z]),j=(0,u.useCallback)((function(){t([])}),[t]),_=(0,u.useMemo)((function(){return x(n)}),[n,d,i]),k=(0,u.useMemo)((function(){return(0,w.jsx)(oi.Z.DirectoryTree,{onSelect:h,showIcon:!1,onDrop:C,onDragStart:y,treeData:_,draggable:{icon:!1},multiple:!0,selectedKeys:r,expandAction:!1,defaultExpandedKeys:[],className:Gi()["layer-manage-content"],onExpand:m,disabled:!!o})}),[h,C,y,_,r,m,o]);return(0,w.jsxs)("div",{className:Gi()["layer-manage"],children:[(0,w.jsx)(Ri,{}),k,(0,w.jsx)("div",{className:Gi()["layer-manage-placeholder"],onClick:j}),(0,w.jsx)(Oi,{})]})},Yi=(0,p.$j)(Di,zi)(Hi),qi=t(71973),Bi=t.n(qi),Ji=et.Z.getRgbaString,Ui=function(e){(0,$r.Z)(t,e);var n=(0,Kr.Z)(t);function t(){var e;(0,Ur.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),e.sizeValueRef=0,e.onMouseDown=function(n){var t,r;null===(t=(r=e.props).onResizeStart)||void 0===t||t.call(r);var i=n.clientX;e.sizeValueRef=i,document.addEventListener("mousemove",e.onMouseMove),document.addEventListener("mouseup",e.onMouseUp)},e.onMouseMove=function(n){var t=e.props,r=t.value,i=t.onChange,o=n.clientX,a=o-e.sizeValueRef,l=r+a;e.sizeValueRef=o,l=Math.max(Math.min(Xr.fZ,l),Xr.T6),null===i||void 0===i||i(l)},e.throttleOnMouseMove=(0,ce.throttle)(e.onMouseMove,50),e.onMouseUp=function(){var n,t;document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp),e.sizeValueRef=0,null===(n=(t=e.props).onResizeEnd)||void 0===n||n.call(t)},e}return(0,Vr.Z)(t,[{key:"render",value:function(){return(0,w.jsx)("div",{className:Bi()["design-layer-manage-resize"],onMouseDown:this.onMouseDown,children:(0,w.jsx)("div",{className:Bi()["design-layer-manage-resize-content"],style:{backgroundColor:Ji(yt.ZP.generateNextColor4CurrentTheme(0))}})})}}]),t}(u.Component),Vi=(0,u.forwardRef)((function(e,n){var t=e.onClose,r=(0,u.useState)(!1),i=(0,c.Z)(r,2),o=i[0],a=i[1],l=(0,u.useState)(!0),s=(0,c.Z)(l,2),d=s[0],f=s[1],p=(0,u.useState)(!1),g=(0,c.Z)(p,2),h=g[0],m=g[1],x=(0,v._)(E.w.CONFIG_KEY_LAYER_WIDTH,300),b=(0,c.Z)(x,2),Z=b[0],y=void 0===Z?300:Z,C=b[1],j=(0,u.useState)(y),_=(0,c.Z)(j,2),k=_[0],N=_[1],S=(0,u.useRef)(!1),M=(0,v.aS)(document.querySelector(".design-layer-manage-wrapper")),T=(0,u.useCallback)((function(){a(!1),null===t||void 0===t||t()}),[]),L=(0,u.useCallback)((function(){a(!0)}),[]);return(0,u.useImperativeHandle)(n,(function(){return{open:L,visible:o,close:T}}),[L,o,T]),(0,u.useEffect)((function(){S.current||y==k||(N(y),S.current=!0)}),[k,y]),(0,w.jsx)(U.Z,{className:B()("design-layer-manage-wrapper",Bi()["design-layer-manage-wrapper"],(0,Je.Z)({"p-lr-8":o},Bi()["design-layer-manage-wrapper-transition"],!h)),style:{width:o?k:0},children:(0,w.jsxs)("div",{className:Bi()["design-layer-manage-content"],children:[(0,w.jsx)(ii,{onBack:T,iconMode:d,onIconModeChange:function(e){f(e)}}),(0,w.jsx)(Yi,{iconMode:d,disabled:h}),(!!h||M)&&(0,w.jsx)("div",{className:Bi()["design-layer-manage-content-cover"]}),(0,w.jsx)(Ui,{value:k,onChange:N,onResizeStart:m.bind(null,!0),onResizeEnd:function(){C(k),m(!1)}})]})})})),$i=Vi,Ki=(t(48736),t(27049)),Xi=t(54549),Qi=function(e){var n=[],t=function e(t,r){t.forEach((function(t){var i=t.children,o=t.title;Array.isArray(i)?e(i,[].concat((0,se.Z)(r),[o])):n.push((0,l.Z)((0,l.Z)({},t),{},{path:r}))}))};return t(e,[]),n},eo=Qi(gn.COMPONENT_TYPE_LIST),no=function(){var e=(0,u.useState)(!1),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,u.useState)([]),o=(0,c.Z)(i,2),a=o[0],s=o[1],d=(0,u.useRef)(),f=function(){s(eo.filter((function(e){var n;return e.title.includes(d.current)||(null===(n=d.current)||void 0===n?void 0:n.includes(e.title))})))},p=(0,Le.Z)((function(e){d.current=e,d.current?f():s([])}),{wait:500}),g=p.run,h=(0,u.useCallback)((function(e){var n=e.target.value;g(n)}),[]),v=function(){r((function(e){return!e}))},m=(0,u.useMemo)((function(){return a.length?a.map((function(e){return(0,w.jsx)(Dr.Z,(0,l.Z)((0,l.Z)({},e),{},{tooltip:!1,prefix:(0,w.jsx)(Ki.Z,{orientation:"left",orientationMargin:16,plain:!0,className:Fr()["component-search-list-item-path"],children:e.path.join(" / ")})}),e.type)})):null}),[a]);return(0,u.useEffect)((function(){return Ge.FW.addListener(Ge.JW.COMPONENT_SEARCH_VISIBLE,v),function(){Ge.FW.removeListener(Ge.JW.COMPONENT_SEARCH_VISIBLE)}}),[]),(0,w.jsxs)("div",{className:B()(Fr()["component-search-list"],(0,Je.Z)({},Fr()["component-search-list-visible"],t)),children:[(0,w.jsx)(Xi.Z,{onClick:v,className:Fr()["component-search-list-close"]}),(0,w.jsx)(F.Z,{placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u6587\u5b57",prefix:(0,w.jsx)(Fe.Z,{}),onChange:h}),!a.length&&!!d.current&&(0,w.jsx)(Rr.Z,{description:"\u6682\u65e0\u7ec4\u4ef6",className:B()(Fr()["component-search-list-empty"],"border-r-8","normal-background")}),(0,w.jsx)("div",{className:B()(Fr()["component-search-list-content"],"zero-scrollbar"),children:m})]})},to=no,ro=t(6888),io=t.n(ro),oo=function(){var e=(0,An.Z)(!1),n=(0,c.Z)(e,3),t=n[0],r=n[1],i=(n[2],(0,u.useRef)(null)),o=(0,u.useCallback)((function(e){}),[]),a=(0,u.useCallback)((function(){r(!1),Ge.FW.emit(Ge.JW.LAYER_VISIBLE_CHANGE,!1,"LeftContent")}),[]);return(0,u.useEffect)((function(){var e=function(e,n){var t,o;"LeftContent"!==n&&(e?null===(t=i.current)||void 0===t||t.open():null===(o=i.current)||void 0===o||o.close(),r(e))};return Ge.FW.addListener(Ge.JW.LAYER_VISIBLE_CHANGE,e),function(){Ge.FW.removeListener(Ge.JW.LAYER_VISIBLE_CHANGE,e)}}),[]),(0,w.jsx)(U.Z,{className:B()(io()["design-page-left"],"pos-re"),children:(0,w.jsxs)("div",{className:B()("p-lr-24","dis-flex","w-100","pos-re",io()["design-page-left-content"]),id:"design-page-left-content",children:[(0,w.jsx)(Tr,{onClick:o}),(0,w.jsx)($i,{ref:i,onClose:a}),(0,w.jsx)(Jr,{menuClass:t?qr()["page-design-left-component-list-content-border"]:""}),(0,w.jsx)(to,{})]})})},ao=oo,lo=t(90768),so=t(52357),co=t(3287),uo=t.n(co),fo=function(e){var n=(0,lo.Z)(e,{defaultValue:Xr.Hi}),t=(0,c.Z)(n,2),r=t[0],i=t[1],o=r.color,a=r.background,l=r.type,s=r.internal_background,d=(0,u.useCallback)((function(e){i((0,ce.merge)({},r,{color:e}))}),[r]),f=(0,u.useCallback)((function(e){i((0,ce.merge)({},r,{internal_background:e}))}),[r]),p=(0,u.useCallback)((function(e){var n=(0,c.Z)(e,1),t=n[0];i(t?(0,ce.merge)({},r,{background:"done"===t.status?t.url:t}):(0,ce.merge)({},r,{background:""}))}),[r]),g=(0,u.useMemo)((function(){return(0,w.jsx)(wt.Z,{span:24,children:(0,w.jsx)(so.r,{value:s,onChange:f})})}),[s,f]),h=(0,u.useMemo)((function(){var e="string"===typeof a&&a?[{url:a,uid:"-1",name:"background",status:"done"}]:[];return(0,w.jsx)(wt.Z,{span:24,children:(0,w.jsx)(At.ZP,{defaultFileList:e,onChange:p})})}),[a,p]),v=(0,u.useMemo)((function(){return(0,w.jsx)(et.D,{value:o,onChange:d,style:{display:"color"===l?"flex":"none"}})}),[o,d,l]),m=(0,u.useMemo)((function(){return"image"===l?h:"internal_background"===l?g:null}),[l,h,v,g]),x=(0,u.useCallback)((function(e){i((0,ce.merge)({},r,{type:e.target.value}))}),[r]);return(0,w.jsxs)("div",{className:B()(uo()["component-background-select"]),children:[(0,w.jsxs)(Lt.ZP.Group,{value:l,onChange:x,children:[(0,w.jsx)(Lt.ZP,{value:"image",children:"\u56fe\u7247"},"image"),(0,w.jsx)(Lt.ZP,{value:"color",children:"\u989c\u8272"},"color"),(0,w.jsx)(Lt.ZP,{value:"internal_background",children:"\u5185\u7f6e\u80cc\u666f"},"internal_background")]}),v,m]})},po=fo,go=t(9990),ho=["onClick","loading"],vo=function(e){var n=(0,u.useState)(!!e.loading),t=(0,c.Z)(n,2),r=t[0],i=t[1],s=e.onClick,d=(e.loading,(0,Te.Z)(e,ho)),f=(0,u.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i(!0),null===s||void 0===s||s(n).catch((function(){})).then((function(){i(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return(0,w.jsx)(Me.Z,(0,l.Z)({loading:r,onClick:f},d))},mo=vo,xo=t(3934),bo=function(e){var n=e.value,t=e.onChange,r=(0,u.useMemo)((function(){var e="string"===typeof n&&n?[{url:n,uid:"-1",name:"background",status:"done"}]:[];return e}),[n]),i=(0,u.useCallback)((function(e){var n=(0,c.Z)(e,1),r=n[0];r?null===t||void 0===t||t("done"===r.status&&r.url||""):null===t||void 0===t||t("")}),[n,t]),l=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,xo.G)("#panel-id");case 3:return n=e.sent,e.next=6,(0,xo.f)(n);case 6:r=e.sent,null===t||void 0===t||t(r),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),z.default.info("\u5c01\u9762\u622a\u56fe\u5931\u8d25");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(mo,{className:"m-b-4",block:!0,type:"primary",onClick:l,children:"\u622a\u53d6\u5c01\u9762"}),(0,w.jsx)(At.ZP,{value:r,onChange:i})]})},Zo=bo,yo=t(15360),Co=t(15593),jo=function(e){var n=e.value,t=e.onChange;return(0,w.jsx)(Co.Z,{value:n,onChange:t,children:[{type:"icon-quanping-copy",value:"full",title:"\u5168\u5c4f\u94fa\u6ee1"},{type:"icon-fit-width-copy",value:"fit-width",title:"\u7b49\u6bd4\u7f29\u653e\u5bbd\u5ea6\u94fa\u6ee1"},{type:"icon-fit-height",value:"fit-height",title:"\u7b49\u6bd4\u7f29\u653e\u9ad8\u5ea6\u94fa\u6ee1"},{type:"icon-quanping1",value:"fit-height-scroll",title:"\u7b49\u6bd4\u7f29\u653e\u9ad8\u5ea6\u94fa\u6ee1\uff08\u53ef\u6eda\u52a8\uff09"},{type:(0,w.jsx)(yo.Z,{}),value:"none",title:"\u4e0d\u7f29\u653e"}].map((function(e){var n=e.title,t=e.type,r=e.value;return(0,w.jsx)(Co.Y,{icon:(0,w.jsx)(Pe.Z,{title:n,children:"string"===typeof t?(0,w.jsx)(oe.Z,{type:t}):t}),value:r},r)}))})},_o=jo,wo=function(e){return{screenData:e.global.screenData}},ko=function(e){return{setScreenData:function(n){return e({type:"global/setScreen",value:n})}}},No=t(68849),So=t.n(No),Eo=fn.Z.Item,Mo=F.Z.TextArea,To=function(e){var n=e.screenData,t=e.setScreenData,r=n.config,i=r.style,o=i.width,a=i.height,s=i.padding,c=r.attr,d=c.poster,f=c.grid,p=c.componentBorder,g=c.scale,h=void 0===g?"fit-height":g,v=c.waterMark,m=r.flag.type,x=n.description,b=n.poster,Z=(0,u.useCallback)((function(e,r){var i=(0,l.Z)({},n),o=r;try{o=r.target.value}catch(a){}(0,ce.set)(i,e,o),t(i)}),[t,n]);return(0,w.jsx)("div",{className:B()("h-100",So()["design-config-global"]),children:(0,w.jsx)(go.Z,{tabCounter:1,items:[{key:"1",label:"\u9875\u9762\u914d\u7f6e",children:(0,w.jsx)(go.R,{children:(0,w.jsxs)(fn.Z,{style:{minHeight:"100%"},children:["H5"!==m&&(0,w.jsxs)(Eo,{label:"\u5c4f\u5e55\u5927\u5c0f",children:[(0,w.jsx)(cr.Z,{label:"\u5bbd\u5ea6",children:(0,w.jsx)(er.Z,{value:o,onChange:Z.bind(null,"config.style.width")})}),(0,w.jsx)(cr.Z,{label:"\u9ad8\u5ea6",children:(0,w.jsx)(er.Z,{value:a,onChange:Z.bind(null,"config.style.height")})})]}),(0,w.jsx)(Eo,{label:"\u63cf\u8ff0",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(Mo,{defaultValue:x,onBlur:Z.bind(null,"description")})})}),(0,w.jsx)(Eo,{label:"\u80cc\u666f",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(po,{value:d,onChange:Z.bind(null,"config.attr.poster")})})}),(0,w.jsx)(Eo,{label:"\u5c01\u9762",placeholder:(0,w.jsx)(dn.Z,{title:"\u8bbe\u7f6e\u4fdd\u5b58\u65f6\u7684\u5c01\u9762\uff0c\u53ef\u4ee5\u622a\u56fe",children:(0,w.jsx)(Qn.Z,{})}),children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(Zo,{value:b,onChange:Z.bind(null,"poster")})})}),(0,w.jsxs)(Eo,{label:"\u7ec4\u4ef6\u8fb9\u6846",placeholder:(0,w.jsx)(dn.Z,{title:"\u7edf\u4e00\u914d\u7f6e\u7ec4\u4ef6\u8fb9\u6846\u7684\u6837\u5f0f",children:(0,w.jsx)(Qn.Z,{})}),children:[(0,w.jsx)(pn.Z,{label:"\u5bbd\u5ea6",children:(0,w.jsx)(er.Z,{value:p.width,onChange:Z.bind(null,"config.attr.componentBorder.width")})}),(0,w.jsx)(cr.Z,{label:"\u6a2a\u5411\u95f4\u8ddd",children:(0,w.jsx)(er.Z,{value:p.padding[0],onChange:function(e){return Z("config.attr.componentBorder.padding",[e,p.padding[1]])}})}),(0,w.jsx)(cr.Z,{label:"\u7eb5\u5411\u95f4\u8ddd",children:(0,w.jsx)(er.Z,{value:p.padding[1],onChange:function(e){return Z("config.attr.componentBorder.padding",[p.padding[0],e])}})})]}),(0,w.jsx)(Eo,{label:"\u6805\u683c",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(er.Z,{value:f||1,onChange:Z.bind(null,"config.attr.grid")})})}),"PC"===m&&(0,w.jsx)(Eo,{label:"\u9875\u9762\u7f29\u653e\u65b9\u5f0f",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(_o,{value:h,onChange:Z.bind(null,"config.attr.scale")})})}),(0,w.jsx)(Eo,{label:"\u6c34\u5370",children:(0,w.jsx)(pn.Z,{children:(0,w.jsx)(cn.Z,{checked:!!v,onChange:Z.bind(null,"config.attr.waterMark")})})}),"H5"===m&&(0,w.jsxs)(Eo,{label:"\u95f4\u8ddd",children:[(0,w.jsx)(cr.Z,{label:"\u4e0a\u4e0b",children:(0,w.jsx)(er.Z,{value:(null===s||void 0===s?void 0:s[0])||0,onChange:function(e){return Z("config.style.padding",[e,null===s||void 0===s?void 0:s[1]])}})}),(0,w.jsx)(cr.Z,{label:"\u5de6\u53f3",children:(0,w.jsx)(er.Z,{value:(null===s||void 0===s?void 0:s[1])||0,onChange:function(e){return Z("config.style.padding",[null===s||void 0===s?void 0:s[0],e])}})})]})]})})}]})})},Lo=(0,p.$j)(wo,ko)(To),Io=function(e){return{components:e.global.components||[],select:e.global.select||[],componentConfigCollapse:e.local.componentConfigCollapse}},Ao=function(e){return{}},Ro=t(22332),Po=t.n(Ro),Oo=(0,un.Z)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(616),t.e(9351),t.e(8735)]).then(t.bind(t,72848)));case 1:case"end":return e.stop()}}),e)})))),Do=(0,un.Z)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(616),t.e(9351),t.e(5011)]).then(t.bind(t,92290)));case 1:case"end":return e.stop()}}),e)})))),zo=(0,un.Z)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(616),t.e(9351),t.e(4498)]).then(t.bind(t,34299)));case 1:case"end":return e.stop()}}),e)})))),Fo=function(e){var n=e.select,t=void 0===n?[]:n,r=e.components,i=e.componentConfigCollapse,o=(0,u.useMemo)((function(){if(!t.length)return(0,w.jsx)(Lo,{});if(t.length>1)return(0,w.jsx)(zo,{});var e=(0,c.Z)(t,1),n=e[0],i=(0,de.Xr)(n,r);return i||((0,v.pr)(r),i=(0,de.Xr)(n,r),i)?(0,de.cJ)(i)?(0,w.jsx)(Oo,{id:n,component:i}):(0,w.jsx)(Do,{id:n,component:i}):(0,w.jsx)(Lo,{})}),[t,r]);return(0,w.jsx)(U.Z,{className:B()(Po()["design-page-right"],"normal-background","design-page-right",(0,Je.Z)({},Po()["design-page-right-show"],!i)),children:o})},Go=(0,p.$j)(Io,Ao)(Fo),Wo=t(75422),Ho=t(56193),Yo=t.n(Ho),qo=et.Z.getRgbaString,Bo="background-id",Jo={r:4,g:15,b:17},Uo=function(){var e=(0,v._)(E.w.CONFIG_KEY_BACKGROUND,Jo),n=(0,c.Z)(e,1),t=n[0];return(0,w.jsx)("div",{style:{color:qo(t||Jo)},className:B()("pos-ab",Yo()["designer-page-background"]),id:Bo})},Vo=t(80089),$o=t(90034),Ko=function(e){return{screenType:e.global.screenType}},Xo=function(e){return{setSelect:function(n){return e({type:"global/setSelect",value:n})}}},Qo=t(10958),ea=t.n(Qo),na=[Bo,$o.T,he.im],ta=et.Z.getRgbaString,ra=function(e){var n=e.setSelect,t=e.screenType,r=(0,u.useRef)([]);if("preview"===t)return(0,w.jsx)(w.Fragment,{});var i=(0,u.useCallback)((function(){n(r.current)}),[n]),o=(0,u.useCallback)((function(e){var n=e.added,t=e.removed,i=n.reduce((function(e,n){var t=n.dataset.id;return(0,de.v9)(t)||e.push(t),e}),[]),o=t.map((function(e){return e.dataset.id})),a=[].concat((0,se.Z)(r.current.filter((function(e){return!o.includes(e)}))),(0,se.Z)(i));r.current=a}),[]),a=(0,u.useCallback)((function(e){try{var t,r=e.inputEvent.target.id,i=null===(t=e.inputEvent.target.dataset)||void 0===t?void 0:t.id,o=e.inputEvent.target.className.includes(Xr.ii),a=e.inputEvent.target.className.includes("ruler-guide-line"),l=e.inputEvent.target.tagName.toLowerCase(),s=(0,Vo.L)();na.includes(r)||!o&&!a&&"canvas"!==l&&!(0,de.Ph)(i,s)?null===n||void 0===n||n([]):e.stop()}catch(c){e.stop()}}),[n]);return(0,w.jsx)(Wo.ZP,{dragContainer:"#".concat($o.T),selectableTargets:[".react-select-to"],hitRate:10,toggleContinueSelect:"shift",selectByClick:!0,selectFromInside:!0,ratio:0,onDragStart:a,onSelectEnd:i,onSelect:o})},ia=(0,p.$j)(Ko,Xo)(ra),oa=function(e){var n=e.theme,t=(0,u.useMemo)((function(){return yt.ZP.generateNextColor4CurrentTheme(0)}),[n.value]);return(0,w.jsx)("div",{style:{"--react-select-to-border":ta(t),"--react-select-to-background":ta((0,l.Z)((0,l.Z)({},t),{},{a:.4}))},className:ea()["react-select-to-wrapper"],children:(0,w.jsx)(ia,{})})},aa=(0,p.$j)((function(e){return{theme:e.global.screenData.config.attr.theme}}),(function(){return{}}))(oa),la=t(22649),sa=t(22452),ca=t(69540),ua=t(61406),da=["visible","onOk","onCancel","children"],fa=(0,u.forwardRef)((function(e,n){var t=(0,u.useState)(!!e.visible),r=(0,c.Z)(t,2),i=r[0],o=r[1],a=(e.visible,e.onOk),d=e.onCancel,f=e.children,p=(0,Te.Z)(e,da);(0,sn.Z)("esc",(function(e){i&&(null===h||void 0===h||h(e))})),(0,sn.Z)("enter",(function(e){i&&(null===g||void 0===g||g(e))}));var g=(0,u.useCallback)((function(e){null===a||void 0===a||a(e),o(!1),ua.Z.forceUnFocus()}),[a]),h=(0,u.useCallback)((function(e){null===d||void 0===d||d(e),o(!1),ua.Z.forceUnFocus()}),[d]);return(0,u.useImperativeHandle)(n,(function(){return{open:function(){o(!0),ua.Z.forceFocus()}}}),[]),(0,w.jsx)(s.Z,(0,l.Z)((0,l.Z)({title:"\u63d0\u793a",open:i,okText:"\u786e\u5b9a(enter)",cancelText:"\u53d6\u6d88(esc)",onOk:g,onCancel:h},p),{},{children:f}))})),pa=fa,ga=t(28099),ha=function(e){return{clipboard:e.global.clipboard,components:e.global.components,screenType:e.global.screenType,grid:e.global.screenData.config.attr.grid}},va=function(e){return{setComponentAll:function(n){return e({type:"global/setComponentAll",value:n})},setSelect:function(n){return e({type:"global/setSelect",value:n})},setClipboard:function(n){return e({type:"global/setClipboard",value:n})},undo:function(){return e({type:"global/undo"})},redo:function(){return e({type:"global/redo"})}}},ma=function(e){var n=e.children,t=e.clipboard,r=e.setClipboard,i=e.components,l=e.setSelect,s=e.undo,d=e.redo,f=e.screenType,p=e.grid,g=(0,u.useState)("\u662f\u5426\u786e\u5b9a\u5220\u9664\u7ec4\u4ef6"),h=(0,c.Z)(g,2),m=h[0],b=h[1],Z=(0,u.useRef)(null),y=(0,u.useMemo)((function(){return"preview"===f}),[f]);(0,sn.Z)(["ctrl.c","meta.c"],(function(){var e=(0,Vo.L)();!y&&ua.Z.isFocus()&&e.length&&(0,sa.d)(e,r)})),(0,sn.Z)(["ctrl.v","meta.v"],(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y&&ua.Z.isFocus()){e.next=2;break}return e.abrupt("return");case 2:(0,ca.v)({components:i,setComponent:function(e,n){K.ZP.setComponent(n.map((function(e){return{value:e,id:e.id,action:"add"}})))},setSelect:l,clipboard:t,sourceComponents:i});case 3:case"end":return e.stop()}}),e)})))),(0,sn.Z)(["ctrl.z","meta.z"],(function(){!y&&ua.Z.isFocus()&&s()})),(0,sn.Z)(["ctrl.y","meta.y"],(function(){ua.Z.isFocus()&&d()})),(0,sn.Z)(["backspace","delete"],(function(){var e,n=(0,Vo.L)();if(!y&&ua.Z.isFocus()&&n.length){var t="\u662f\u5426\u5220\u9664\uff1a",r=n.map((function(e){var n=(0,de.Xr)(e,i);return n.name}));b(t+r.slice(0,10).join("\uff0c")+"".concat(r.length>10?"\u7b49":"\u8fd9").concat(r.length,"\u4e2a\u7ec4\u4ef6")),(0,x._v)(100).then(null===(e=Z.current)||void 0===e?void 0:e.open)}}));var C=(0,Le.Z)((function(e){if(ua.Z.isFocus()){var n=(0,ce.merge)({left:0,top:0},e()),t=(0,v.xt)(),r=(0,Vo.L)();K.ZP.setComponent(r.map((function(e){var r=(0,de.eM)(e,i),o=r.id,a=(0,ce.get)(i,t[o].path),l=a.config;return{id:o,value:{config:{style:{left:((0,ce.get)(l,"style.left")||0)+n.left,top:((0,ce.get)(l,"style.top")||0)+n.top}}},action:"update"}})))}}),{wait:50}),j=C.run;(0,sn.Z)(["shift.uparrow"],(function(){j((function(){return{top:-p}}))})),(0,sn.Z)(["shift.downarrow"],(function(){j((function(){return{top:p}}))})),(0,sn.Z)(["shift.leftarrow"],(function(){j((function(){return{left:-p}}))})),(0,sn.Z)(["shift.rightarrow"],(function(){j((function(){return{left:p}}))}));var _=(0,u.useCallback)((function(){var e=(0,Vo.L)();(0,ga.m)(e,K.ZP.setComponent,l)}),[]);return(0,w.jsxs)(w.Fragment,{children:[n,(0,w.jsx)(pa,{onOk:_,ref:Z,children:m})]})},xa=(0,p.$j)(ha,va)(ma),ba=t(95910),Za=t(80137),ya=t(47159),Ca=(0,Vr.Z)((function e(n,t,r){var i=this;(0,Ur.Z)(this,e),this.onChange=void 0,this.delay=0,this.value=void 0,this.scale=void 0,this.components=[],this.onMouseDown=function(){i.delay=0,i.components=(0,de.pA)().components},this.onMouseMove=function(e){if(!(i.delay<20&&(i.delay++,i.delay>10))){var n,t=i.value.type,r=i.scale(),o=[],a=ya.x.getGuideLineInfo((0,ce.merge)({},i.value,{style:(0,l.Z)({},e)}),r);if(i.components.forEach((function(e){var r=ya.x.getEachRange(a,ya.x.getComponentInfo(e),"horizontal"===t?["left","right","vertical"]:["top","bottom","horizontal"]);ya.x.rangeCompare(r,o)&&(o=r,n=e)})),n){var s=ya.x.getNeedToChangeStyle(o,ya.x.getComponentInfo(n),a),c=s.left,u=s.top,d={};"horizontal"===t?d.top=(u*r-1+1-Xr.As-30+Xr.aT.top)/r+2:d.left=(c*r-1+1-Xr.As-30+Xr.aT.left)/r+2;var f=(0,ce.merge)({},e,d);i.onChange(f),i.delay>=20&&(i.delay=0)}}},this.onMouseUp=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t,r,a,l,s,c,u,d,f,p,g,h;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f=function(e){return 10*Math.round(e/10)},t=n.type,r=n.style,a=r.left,l=r.top,e.next=4,E.Z.getItem(E.w.STATIC_GUIDE_LINE_DRAG_INTEGER_STICKY);case 4:if(s=e.sent,c=s.errMsg,u=s.value,!(c||u&&!u.show)){e.next=9;break}return e.abrupt("return",n);case 9:return d={left:a,top:l},"vertical"===t?(p=f(d.left),d.left=p):(g=f(d.top),d.top=g),i.components=[],h=(0,ce.merge)({},n,{style:d}),i.onChange(h),e.abrupt("return",h);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.value=n,this.scale=t,this.onChange=r})),ja=Ca,_a=t(16133),wa=t.n(_a),ka=et.Z.getRgbaString,Na=function(e){(0,$r.Z)(t,e);var n=(0,Kr.Z)(t);function t(e){var r;(0,Ur.Z)(this,t),r=n.call(this,e),r.flag=!1,r.times=0,r.startX=0,r.startY=0,r.AbsorbGuideLineUtil=void 0,r.state={style:(0,l.Z)({},r.props.style)},r.onChange=function(e){var n=r.state.style,t=e.style,i=(0,ce.merge)({},n,t);r.setState({style:i})},r.onMouseDown=function(e){null===e||void 0===e||e.stopPropagation();var n=r.props,t=n.disabled,i=n.onMouseDown;if(!t){r.flag=!0,r.times=0;try{var o=window.event||e,a=0,l=0;r.startX=o.clientX+l,r.startY=o.clientY+a,document.addEventListener("mousemove",r.throttleOnMouseMove),document.addEventListener("mouseup",r.onMouseUp),null===i||void 0===i||i()}catch(e){}r.AbsorbGuideLineUtil.onMouseDown()}},r.onMouseMove=function(e){null===e||void 0===e||e.stopPropagation();var n=r.props,t=n.disabled,i=n.onChange,o=n.type,a=n.id,s=n.lineStyle,c=n.onMouseMove,u=n.scale,d=r.state.style;if(r.flag&&!t)if(r.times<=2)r.times++;else try{var f=window.event||e,p=d.left,g=d.top,h={};if("horizontal"===o){var v=f.clientY-r.startY;h.top=g+v/u,r.startY=f.clientY}else{var m=f.clientX-r.startX;h.left=p+m/u,r.startX=f.clientX}var x=(0,l.Z)((0,l.Z)({},d),h),b={style:(0,l.Z)({},x),type:o,id:a,lineStyle:s};null===i||void 0===i||i(b),r.setState({style:x}),null===c||void 0===c||c(),r.AbsorbGuideLineUtil.onMouseMove(x)}catch(e){}},r.throttleOnMouseMove=(0,ce.throttle)(r.onMouseMove,30),r.onMouseUp=function(){var e=r.props,n=e.disabled,t=e.onMouseUp,i=e.onCompleteChange,o=e.type,a=e.id,l=e.lineStyle,s=(e.isGuideLineSticky,r.state.style);if(r.flag&&!n){r.flag=!1,r.times=0,document.removeEventListener("mousemove",r.throttleOnMouseMove),document.removeEventListener("mouseup",r.onMouseUp),null===t||void 0===t||t();var c={style:s,type:o,id:a,lineStyle:l};r.AbsorbGuideLineUtil.onMouseUp(c).then((function(e){null===i||void 0===i||i(e)}))}},r.onDoubleClick=function(e){var n,t;e.stopPropagation(),null===(n=(t=r.props).onDoubleClick)||void 0===n||n.call(t)};var i=e.type,o=e.style,a=e.lineStyle,s=e.id;return r.AbsorbGuideLineUtil=new ja({type:i,style:o,lineStyle:a,id:s},(function(){return r.props.scale}),r.onChange),r}return(0,Vr.Z)(t,[{key:"guideLineStyle",get:function(){var e=this.props,n=e.type,t=e.scale,r=e.size,i=this.state.style;return"vertical"===n?(0,l.Z)((0,l.Z)({},i),{},{height:r.height,left:((null===i||void 0===i?void 0:i.left)*t||0)+30-Xr.As,padding:"0 ".concat(Xr.As,"px")}):(0,l.Z)((0,l.Z)({},i),{},{width:r.width,top:((null===i||void 0===i?void 0:i.top)*t||0)+30-2*Xr.As,padding:"".concat(Xr.As,"px 0")})}},{key:"render",value:function(){var e,n=this.props,t=n.type,r=n.lineStyle,i=void 0===r?"dashed":r,o=n.className,a=this.state.style;return(0,w.jsxs)("div",{className:B()("ruler-guide-line",wa()["ruler-guide-line-wrapper-".concat(t)],o),style:this.guideLineStyle,onMouseDown:this.onMouseDown,onDoubleClick:this.onDoubleClick,children:[(0,w.jsx)("div",{className:wa()["ruler-guide-line-flag-".concat(t)],style:{backgroundColor:ka(yt.ZP.generateNextColor4CurrentTheme(0))},children:Math.round(null!==(e=a.left)&&void 0!==e?e:a.top)||0}),(0,w.jsx)("div",{className:wa()["ruler-guide-line-".concat(t)],style:(0,ce.merge)({},{borderStyle:i,borderColor:ka(yt.ZP.generateNextColor4CurrentTheme(0))},"horizontal"===t?{top:2*Xr.As}:{left:Xr.As})})]})}}]),t}(u.Component),Sa=Na,Ea=t(437),Ma=function(e){return{theme:e.global.screenData.config.attr.theme}},Ta=function(e){return{}},La=et.Z.getRgbaString,Ia=function(e){(0,$r.Z)(t,e);var n=(0,Kr.Z)(t);function t(){var e;(0,Ur.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),e.rulerRef=(0,u.createRef)(),e.resize=function(){var n;null===(n=e.rulerRef.current)||void 0===n||n.resize()},e.componentDidUpdate=function(n){e.props.height===n.height&&e.props.width===n.width||e.resize()},e.componentDidMount=function(){window.addEventListener("resize",e.resize)},e.componentWillUnmount=function(){window.removeEventListener("resize",e.resize)},e}return(0,Vr.Z)(t,[{key:"render",value:function(){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(Ea.ZP,(0,l.Z)((0,l.Z)({backgroundColor:La(yt.ZP.generateNextColor4CurrentTheme(0)),lineColor:"rgb(255, 255, 255)",textColor:"rgb(255, 255, 255)",type:"vertical"},this.props),{},{ref:this.rulerRef}))})}}]),t}(u.Component),Aa=(0,p.$j)(Ma,Ta)(Ia),Ra=function(e){var n;return{guideLineList:(0,ce.get)(e,"global.guideLine.value")||[],guideLineShow:null!==(n=(0,ce.get)(e,"global.guideLine.show"))&&void 0!==n&&n}},Pa=function(e){return{}},Oa=t(46759),Da=t.n(Oa),za=void 0,Fa={x:0,y:0},Ga=function(){var e=document.querySelector("#designer-page-main");Fa.x=(null===e||void 0===e?void 0:e.scrollLeft)||0,Fa.y=(null===e||void 0===e?void 0:e.scrollTop)||0},Wa=function(e){var n=e.guideLineShow,t=e.size,r=e.guideLineList,i=e.wrapperSetGuideLine,o=e.scale,a=e.width,s=e.height,d=(0,u.useState)(),f=(0,c.Z)(d,2),p=f[0],g=f[1],h=(0,u.useState)(),v=(0,c.Z)(h,2),m=v[0],x=v[1],b=(0,ba.Z)(),Z=(0,u.useRef)(),y=(0,u.useRef)(),C=(0,u.useRef)(!1),j=(0,fi.Z)(Z),_=(0,fi.Z)(y),k=(0,u.useCallback)((function(e,n){var t=(0,se.Z)(r);t.splice(e,1,n),i({value:t})}),[i,r]),N=(0,u.useCallback)((function(){var e=document.querySelector("#".concat($o.T));return{left:(null===e||void 0===e?void 0:e.scrollLeft)||0,top:(null===e||void 0===e?void 0:e.scrollTop)||0}}),[]),S=(0,u.useCallback)((function(){var e=document.querySelector("#".concat($o.u));if(!e)return{left:0,top:0};var n=e.getBoundingClientRect(),t=n.x,r=n.y;return{left:t||0,top:r||0}}),[]),E=(0,u.useCallback)((function(e,t,a,l){var s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"solid";if(null===l||void 0===l||null===(s=l.stopPropagation)||void 0===s||s.call(l),n){var u=l.clientX,d=l.clientY,f={},p=S(),g=p.left,h=p.top,v=N(),m=v.left,x=v.top,b=Fa.x,Z=Fa.y;"vertical"===e?(f.left=u-g+m-b-30,f.left=f.left/o):(f.top=d-h+x-Z-30,f.top=f.top/o);var y={type:e,style:(0,ce.merge)({},t,f),id:(0,Hn.x0)(),lineStyle:c};return a&&i({value:[].concat((0,se.Z)(r),[y])}),y}}),[n,r,i,S,Ga,o]),M=function(){var e=b.clientX,n=b.clientY;if(!C.current)if(j){Ga();var r=E("vertical",{width:2,height:t.height},!1,{clientX:e,clientY:n},"dashed");g(r)}else if(_){Ga();var i=E("horizontal",{width:t.width,height:2},!1,{clientX:e,clientY:n},"dashed");x(i)}},T=(0,u.useCallback)((function(e){var n=(0,se.Z)(r);n.splice(e,1),i({value:n})}),[r,i]),L=(0,u.useMemo)((function(){return{width:a*o+Xr.aT.left,height:s*o+Xr.aT.top}}),[a,s,o]),I=(0,u.useCallback)((function(e,n){C.current=!1;var t=e.type,a=e.style,l=a.left,s=a.top,c=!1,u=(0,se.Z)(r),d=l*o,f=s*o;"horizontal"===t?(f<=30||f>=L.height)&&(u.splice(n,1),c=!0):(d<=30||d>=L.width)&&(u.splice(n,1),c=!0),c&&(i({value:u}),ya.x.onGuideLineMoveEnd())}),[r,L,i,o]),A=(0,u.useCallback)((function(e,n){C.current=!0,ya.x.onGuideLineMoveStart(e,n)}),[]),R=(0,u.useCallback)((function(e,n){ya.x.onGuideLineMove(e,n)}),[]),P=(0,u.useCallback)((function(e,n,r){return(0,u.createElement)(Sa,(0,l.Z)((0,l.Z)({},e),{},{size:t,onCompleteChange:k.bind(za,n),onMouseUp:I.bind(za,e,n),onMouseDown:A.bind(null,e,n),onDoubleClick:T.bind(za,n),onMouseMove:R.bind(null,e,n),key:e.id,scale:o}))}),[I,k,o,t]),O=(0,u.useMemo)((function(){if(n)return r.map(P)}),[n,r,P]),D=(0,u.useMemo)((function(){if(n){var e=[];return j&&p&&e.push(p),_&&m&&e.push(m),e.map(P)}}),[j,_,n,P,p,m]);return(0,Za.Z)((function(){M()}),[b],{wait:20}),(0,u.useEffect)((function(){Ga(!0)}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{ref:Z,onClick:E.bind(za,"vertical",{width:2,height:t.height},!0),className:B()(Da()["designer-page-main-horizontal-ruler"],"dis-flex"),style:{width:t.width},children:[(0,w.jsx)("div",{className:Da()["designer-page-main-horizontal-ruler-prefix"]}),(0,w.jsx)(Aa,{type:"horizontal",width:t.width,height:30,zoom:o,unit:o>.5?50:100})]}),(0,w.jsx)("div",{ref:y,style:{height:t.height},className:B()(Da()["designer-page-main-vertical-ruler"]),onClick:E.bind(za,"horizontal",{width:t.width,height:2},!0),children:(0,w.jsx)(Aa,{width:30,height:t.height,zoom:o,unit:o>.5?50:100,type:"vertical"})}),O,D]})},Ha=(0,p.$j)(Ra,Pa)(Wa),Ya=t(73171),qa=t(13690),Ba=t(88283),Ja=t.n(Ba),Ua=et.Z.getRgbaString,Va=function(e){var n=e.show,t=e.onClick,r=e.setGuideLine,i=(0,qa.Z)(document.querySelector("#".concat($o.T)))||{left:0,top:0},l=i.left,s=i.top,c=(0,u.useMemo)((function(){return n?(0,w.jsx)(gi.Z,{}):(0,w.jsx)(hi.Z,{})}),[n]),d=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r({show:n,value:[]});case 1:case"end":return e.stop()}}),e)}))),[n,r]),f=(0,u.useMemo)((function(){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(V.Z,{onClick:d,icon:(0,w.jsx)(Ya.Z,{}),type:"link",title:"\u5220\u9664\u6240\u6709\u8f85\u52a9\u7ebf",className:Ja()["designer-page-main-guide-btn-sub"],style:{backgroundColor:Ua(yt.ZP.generateNextColor4CurrentTheme(0))}})})}),[]);return(0,w.jsx)(Pe.Z,{title:f,children:(0,w.jsx)(Me.Z,{onClick:t,type:"link",className:B()("pos-ab",Ja()["designer-page-main-guide-btn"]),style:{left:l,top:s,backgroundColor:Ua(yt.ZP.generateNextColor4CurrentTheme(0))},icon:c})})},$a=(0,p.$j)((function(e){return{theme:e.global.screenData.config.attr.theme}}),(function(){return{}}))(Va),Ka=function(e){var n;return{guideLineList:(0,ce.get)(e,"global.guideLine.value")||[],guideLineShow:null!==(n=(0,ce.get)(e,"global.guideLine.show"))&&void 0!==n&&n,width:(0,ce.get)(e,"global.screenData.config.style.width"),height:(0,ce.get)(e,"global.screenData.config.style.height"),scale:(0,ce.get)(e,"global.scale"),flag:e.global.screenData.config.flag.type}},Xa=function(e){return{setGuideLine:function(n){return e({type:"global/setGuideLine",value:n})},setSelect:function(n){return e({type:"global/setSelect",value:n})}}},Qa=t(41813),el=t.n(Qa),nl=200,tl=function(e){var n=e.scale,t=e.width,r=void 0===t?0:t,i=e.height,l=void 0===i?0:i,s=e.children,c=e.guideLineList,d=void 0===c?[]:c,f=e.guideLineShow,p=e.setGuideLine,g=e.setSelect,h=(e.flag,(0,u.useRef)(0)),v=(0,u.useRef)(null),m=(0,la.Z)(v)||{width:0,height:0},x=m.width,b=m.height,Z=(0,u.useMemo)((function(){return n/100}),[n]),y=function(){h.current++},C=function e(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",e),h.current<2&&g([])},j=function(e){e.target.id===$o.u&&(h.current=0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",C))},_=(0,u.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=(0,$.SP)({},{show:f,value:d},n),null===p||void 0===p||p(t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[p,d,f]),k=(0,u.useMemo)((function(){var e=r*Z+nl,n=l*Z+nl,t=Math.max(x,e),i=Math.max(b,n);return{width:t,height:i}}),[x,b,r,l,Z]);return(0,w.jsxs)("div",{className:B()(el()["designer-page-main"],"box-sizing-border","pos-re"),children:[(0,w.jsx)(Uo,{}),(0,w.jsx)("div",{id:$o.T,ref:v,className:"w-100 h-100 pos-re",children:(0,w.jsxs)("div",{id:$o.u,className:B()(el()["designer-page-main-sub"],"pos-re"),style:{width:r*Z,height:l*Z},onMouseDown:j,children:[(0,w.jsx)(Ha,{size:k,wrapperSetGuideLine:_,scale:Z,width:r,height:l}),(0,w.jsx)(V.Z,{Component:$a,onClick:_.bind(null,{show:!f}),show:!!f,setGuideLine:p}),(0,w.jsx)(xa,{children:s})]})})]})},rl=(0,p.$j)(Ka,Xa)(tl),il=t(2885),ol=t(26729),al=t.n(ol),ll=t(18095),sl=t(18267),cl=function(e){var n=e.global.screenData.config.style,t=n.width,r=n.height;return{width:t,height:r,components:e.global.components}},ul=function(e){return{}},dl=t(82401),fl=t.n(dl),pl=t(51505),gl=et.Z.getRgbaString,hl=240,vl={top:"center bottom",right:"left center",bottom:"center top",left:"right center",topRight:"left bottom",bottomRight:"left top",bottomLeft:"right top",topLeft:"right bottom"},ml=function(e){var n=e.components,t=e.select,r=e.width,i=e.height,o=e.scale,a=(0,u.useState)(!1),l=(0,c.Z)(a,2),s=l[0],d=l[1],f=(0,u.useState)(0),p=(0,c.Z)(f,2),g=p[0],h=p[1],m=(0,u.useState)(0),x=(0,c.Z)(m,2),b=x[0],Z=x[1],y=(0,u.useState)(1),C=(0,c.Z)(y,2),j=C[0],_=C[1],k=(0,u.useState)(1),N=(0,c.Z)(k,2),S=N[0],E=N[1],M=(0,u.useRef)(),T=(0,u.useRef)(),L=(0,u.useRef)("drag"),I=function(){_(1),E(1),h(0),Z(0)},A=(0,u.useMemo)((function(){if(!s)return null;var e=(0,v.xt)();return t.reduce((function(n,t){var r,i=null===(r=e[t])||void 0===r?void 0:r.path;if(!i)return n;var a=(0,de.eM)(t);if(a){var l=a.config.style,s=l.width,c=l.height,u=l.left,d=l.top;n.push((0,w.jsx)("div",{className:B()("pos-ab",fl()["designer-panel-thumb-active-item"]),style:{width:s*o,height:c*o,left:u*o,top:d*o,backgroundColor:gl(yt.ZP.generateNextColor4CurrentTheme(0))}},a.id))}return n}),[])}),[s,t,o,n]),R=function(e){var n=e.componentId;L.current="drag",I(),d(!0);var t=(0,de.eM)(n);M.current=(0,ce.pick)(null===t||void 0===t?void 0:t.config.style,["left","top","width","height"])},P=function(e){var n=e.value,t=n,r=t.left,i=t.top,a=M.current,l=a.left,s=a.top;h((r-l)*o),Z((i-s)*o)},O=function(e){e.componentId;d(!1)},D=function(e){T.current=e.direction,R(e),L.current="resize"},z=function(e){e.componentId;var n=e.value,t=n,r=t.left,i=t.top,a=t.width,l=t.height,s=M.current,c=s.left,u=s.top,d=s.width,f=s.height;h((r-c)*o),Z((i-u)*o),_(a/d),E(l/f)},F=function(e){e.componentId;d(!1)};return(0,u.useEffect)((function(){return Ge.FW.addListener(Ge.JW.COMPONENT_DRAG_START,R),Ge.FW.addListener(Ge.JW.COMPONENT_DRAG,P),Ge.FW.addListener(Ge.JW.COMPONENT_DRAG_END,O),Ge.FW.addListener(Ge.JW.COMPONENT_RESIZE_START,D),Ge.FW.addListener(Ge.JW.COMPONENT_RESIZE,z),Ge.FW.addListener(Ge.JW.COMPONENT_RESIZE_END,F),function(){Ge.FW.removeListener(Ge.JW.COMPONENT_DRAG_START,R),Ge.FW.removeListener(Ge.JW.COMPONENT_DRAG,P),Ge.FW.removeListener(Ge.JW.COMPONENT_DRAG_END,O),Ge.FW.removeListener(Ge.JW.COMPONENT_RESIZE_START,D),Ge.FW.removeListener(Ge.JW.COMPONENT_RESIZE,z),Ge.FW.removeListener(Ge.JW.COMPONENT_RESIZE_END,F)}}),[]),(0,w.jsx)("div",{className:fl()["designer-panel-thumb-active"],style:{width:r,height:i,left:"drag"===L.current?g:0,top:"drag"===L.current?b:0,"--panel-thumb-component-scale":"scale(".concat(j,", ").concat(S,")"),"--panel-thumb-component-transform-origin":vl[T.current]||"center center"},children:A})},xl=(0,p.$j)((function(e){return{components:e.global.components,select:e.global.select}}),(function(){return{}}))(ml),bl=function(e){e.id;var n=e.scale,t=e.width,r=e.height,i=e.left,o=e.top;return(0,w.jsx)("div",{className:"pos-ab",style:{width:t*n,height:r*n,left:i*n,top:o*n,backgroundColor:"white"}})},Zl=function(e){var n=e.width,t=e.height,r=e.components,i=(0,u.useMemo)((function(){return t/n*hl}),[n,t]),o=(0,u.useMemo)((function(){return hl/n}),[n]),a=(0,u.useMemo)((function(){return r.map((function(e){var n=e.id,t=e.config.style,r=t.width,i=t.height,a=t.left,l=t.top;return(0,w.jsx)(bl,{width:r,height:i,left:a,top:l,scale:o,id:n},n)}))}),[r,o]);return(0,w.jsxs)("div",{className:B()(fl()["designer-panel-thumb"],"pos-re"),style:{width:hl,height:i},children:[a,(0,w.jsx)(xl,{width:hl,height:i,scale:o})]})},yl=(0,p.$j)(cl,ul)(Zl),Cl=new(al()),jl=function(e){var n=e.visible,t=e.children,r=e.uniqueKey,i=e.onHide;return(0,pl.Z)((function(){Cl.emit("change",r,n)}),[n]),(0,u.useEffect)((function(){var e=function(e,n){e!==r&&n&&(null===i||void 0===i||i())};return Cl.addListener("change",e),function(){Cl.removeListener("change",e)}}),[]),(0,w.jsx)("div",{className:B()(fl()["component-panel-thumb-tooltip"],"border-r-4"),style:{visibility:n?"visible":"hidden"},children:(0,w.jsx)("div",{style:{transform:"scale(".concat(n?1:0,")")},children:t})})},_l=function(){var e=(0,u.useState)(!0),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,u.useMemo)((function(){return t?(0,w.jsx)(ll.Z,{}):(0,w.jsx)(sl.Z,{})}),[t]);return(0,w.jsxs)("div",{className:B()(fl()["component-panel-thumb-wrapper"],"pos-re"),children:[(0,w.jsx)(jl,{visible:t,uniqueKey:"thumb",onHide:r.bind(null,!1),children:(0,w.jsx)(yl,{})}),(0,w.jsx)(Me.Z,{type:"link",icon:i,onClick:r.bind(null,!t)})]})},wl=_l,kl=(t(402),t(97272)),Nl=t(77442),Sl=t(76192),El=t.n(Sl),Ml=function(){var e=(0,u.useState)(!1),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,v.v8)(),o=(0,u.useMemo)((function(){return Object.entries(Nl.x7).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return(0,w.jsxs)("div",{className:B()(El()["shortcut-keys-item"],"dis-flex m-b-4"),children:[(0,w.jsx)("span",{className:"text-ellipsis",children:r}),(0,w.jsx)(kl.Z.Text,{className:"text-ellipsis",code:!0,children:t})]},t)}))}),[]);return(0,w.jsxs)("div",{className:B()(El()["shortcut-keys-wrapper"],"pos-re"),children:[(0,w.jsx)(jl,{visible:t,uniqueKey:"shortcut",onHide:r.bind(null,!1),children:(0,w.jsx)("div",{className:B()(El()["shortcut-keys"],"c-f-s p-4"),style:{backgroundColor:i},children:o})}),(0,w.jsx)(Me.Z,{type:"link",icon:(0,w.jsx)(oe.Z,{title:"\u5feb\u6377\u952e",type:"icon-keyborad"}),onClick:r.bind(null,!t)})]})},Tl=Ml,Ll=function(e){return{flag:e.global.screenData.config.flag.type}},Il=function(e){return{}},Al=t(17011),Rl=t.n(Al),Pl=function(e){var n=e.flag;return(0,w.jsxs)("div",{className:B()(Rl()["design-page-toolbar"],"ali-r","normal-background"),children:[(0,w.jsx)(Tl,{}),"PC"===n&&(0,w.jsx)(wl,{}),(0,w.jsx)(il.Z,{})]})},Ol=(0,p.$j)(Ll,Il)(Pl),Dl=t(70646),zl=t.n(Dl),Fl=function(e){var n=e.style,t=e.className;return(0,w.jsxs)("div",{className:B()(zl()["design-panel-content"],"dis-flex-column","zero-scrollbar",t),style:(0,l.Z)({},n),children:[(0,w.jsxs)(rl,{children:[(0,w.jsx)(aa,{}),(0,w.jsx)(he.ZP,{})]}),(0,w.jsx)(Ol,{})]})},Gl=Fl,Wl=function(e){return{}},Hl=function(e){return{setScreenType:function(n){return e({type:"global/setScreenType",value:n})},getMockValueKindMap:function(){return e({type:"data/getMockValueKindMap"})}}},Yl=t(56245),ql=t.n(Yl),Bl={okText:"\u5237\u65b0\u9875\u9762",cancelText:"\u5173\u95ed\u9875\u9762",title:"\u63d0\u793a",content:"\u7f51\u7edc\u51fa\u73b0\u9519\u8bef\uff01",closable:!1,centered:!0,cancelButtonProps:{danger:!0},onOk:function(){window.location.reload()},onCancel:function(){(0,x.on)()}},Jl=void 0,Ul=function(){var e=(0,u.useCallback)((function(e){var n,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Jl?t&&("function"===typeof Jl&&(null===(n=Jl)||void 0===n||n()),Jl=e().destroy):Jl=e()}),[]),n=(0,u.useCallback)((function(){var e;"function"===typeof Jl&&(null===(e=Jl)||void 0===e||e()),Jl=void 0}),[]);return[e,n]},Vl=function(e){var n=e.setScreenType,t=e.getMockValueKindMap,i=(0,u.useState)(!0),p=(0,c.Z)(i,2),x=p[0],y=p[1],C=(0,u.useState)(!1),j=(0,c.Z)(C,2),_=j[0],k=j[1],S=(0,v.v8)(),E=(0,u.useRef)(null),M=(0,u.useRef)(),T=Ul(),L=(0,c.Z)(T,2),I=L[0],A=L[1],R=function(e){return e.preventDefault(),!1},P=(0,u.useCallback)((function(){I(s.Z.error.bind(null,(0,l.Z)({},Bl)))}),[I]),D=(0,u.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.IR)({_id:n});case 3:t=e.sent,t||(clearInterval(M.current),I(s.Z.confirm.bind(null,(0,l.Z)((0,l.Z)({},Bl),{},{content:"\u957f\u65f6\u95f4\u672a\u64cd\u4f5c\uff01"})))),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),P();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),[I]),z=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,t,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y(!1),!b.Z.isAutoSaveType()||b.Z.IS_STATIC){e.next=7;break}return n=g.m8.location.query,t=n||{},r=t.id,clearInterval(M.current),e.next=7,(0,Z.BP)({_id:r,type:(0,v.bB)(location.hash)?"model":"screen"}).then((function(){M.current=setInterval(D.bind(null,r),3e3)})).catch((function(){P()}));case 7:case"end":return e.stop()}}),e)}))),[]),F=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n,t){var r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y(!0),b.Z.IS_STATIC){e.next=4;break}return e.next=4,(0,Z.$q)(!0,{type:t.isModel?"model":"screen",_id:t.id});case 4:return e.next=6,null===(r=E.current)||void 0===r?void 0:r.reload();case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),G=function(e){e.returnValue="\u662f\u5426\u786e\u5b9a\u79bb\u5f00\u6b64\u7f51\u7ad9"};return(0,v.Un)(F),(0,u.useEffect)((function(){return b.Z.IS_STATIC||t(),function(){clearInterval(M.current)}}),[]),(0,u.useEffect)((function(){n("edit")}),[n]),(0,u.useEffect)((function(){if(!b.Z.isAutoSaveType())return window.addEventListener("beforeunload",G),function(){window.removeEventListener("beforeunload",G)}}),[]),(0,u.useEffect)((function(){if(b.Z.isAutoSaveType()&&!b.Z.IS_STATIC)return window.addEventListener("unload",Z.$q.bind(null,!1,{})),function(){window.removeEventListener("unload",Z.$q.bind(null,!1,{}))}}),[]),(0,h.Z)((function(){A()})),(0,w.jsxs)(r.ZP,{componentSize:"small",children:[(0,w.jsx)(O,{onStart:k.bind(null,!0),onComplete:k.bind(null,!1),loading:x,children:(0,w.jsxs)("div",{className:ql()["designer-page"],onContextMenu:R,style:{pointerEvents:x||_?"none":"all","--designer-primary-color":S},children:[(0,w.jsx)(In,{}),(0,w.jsxs)("div",{className:ql()["designer-page-content"],children:[(0,w.jsxs)(d.W,{backend:f.PD,children:[(0,w.jsx)(ao,{}),(0,w.jsx)(Gl,{})]}),(0,w.jsx)(Go,{})]})]})}),(0,w.jsx)(N,{value:x}),(0,w.jsx)(m.Z,{onLoad:z,ref:E})]})},$l=(0,p.$j)(Wl,Hl)(Vl)}}]);