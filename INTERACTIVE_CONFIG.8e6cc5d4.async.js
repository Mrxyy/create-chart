(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"5nup":function(e,a,n){e.exports={"design-config-interactive-base-empty":"design-config-interactive-base-empty___3GdoL","design-config-interactive-base-checkbox":"design-config-interactive-base-checkbox___1Bmi6","design-config-interactive-base-collapse":"design-config-interactive-base-collapse___2GOMJ","design-config-interactive-base-field-add-modal":"design-config-interactive-base-field-add-modal___1TsFZ"}},HApb:function(e,a,n){"use strict";n.r(a);var t=n("q1tI"),c=n.n(t),i=n("/MKj"),r=n("TSYQ"),o=n.n(r),l=n("LvDl"),u=n("+YFz"),s=n("9ZlZ"),m=n("DhgR"),d=(n("sRBo"),n("kaz8")),f=n("k1fw"),b=(n("fu2T"),n("gK9i")),g=n("X72a"),v=n("Emgl"),p=n("opvp"),O=n("mKj2"),k=(n("DYRE"),n("zeV3")),j=(n("+L6B"),n("2/Rp")),E=n("oBTY"),h=(n("2qtc"),n("kLXV")),y=(n("miYZ"),n("tsqr")),C=n("PpiC"),N=n("tJVT"),I=(n("y8nQ"),n("Vl3Y")),_=n("/MfK"),x=n("Ix2a"),F=n("5cOq"),w=n("2yeE"),M=n("tnti"),P=n("5nup"),S=n.n(P),K=["key"],A=I["a"].Item,L=I["a"].useForm,V=function(e){var a=e.onOk,n=e.fields,i=L(),r=Object(N["a"])(i,1),o=r[0],l=Object(t["useState"])(!1),u=Object(N["a"])(l,2),s=u[0],m=u[1],d=Object(t["useMemo"])((function(){return n.map((function(e){return e.key}))}),[n]),b=function(){m(!0),w["a"].forceFocus()},g=function(){m(!1),o.resetFields(),w["a"].forceUnFocus()},v=Object(t["useCallback"])((function(){var e=o.getFieldsValue(),n=e.key,t=Object(C["a"])(e,K);if(d.includes(n))return y["default"].info("\u5b58\u5728\u76f8\u540c\u5b57\u6bb5");null===a||void 0===a||a(Object(f["a"])(Object(f["a"])({},t),{},{key:n})),g()}),[a,d]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(F["a"],{onClick:b},"\u65b0\u589e\u5b57\u6bb5"),c.a.createElement(h["a"],{title:"\u65b0\u589e\u5b57\u6bb5",open:s,onCancel:g,onOk:v},c.a.createElement(I["a"],{form:o,size:"small",className:S.a["design-config-interactive-base-field-add-modal"]},c.a.createElement(A,{label:"\u5b57\u6bb5key",name:"key",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5key"}]},c.a.createElement(x["a"],null)),c.a.createElement(A,{label:"\u5b57\u6bb5\u8bf4\u660e",name:"description"},c.a.createElement(x["a"],null)))))},B=function(e){var a=e.value,n=e.onChange,i=e.id,r=e.dataSource,o=e.params,l=e.setParams,u=a.name,s=a.fields,d=a.show,b=a.type,g=a.extend,v=Object(t["useCallback"])((function(e,a){var t=Object(m["k"])(i),c=e.variable;if(c!==a){var s=p["a"].updateBaseInteractiveVariable({params:o,setParams:l},{variable:a,id:e.mapId,origin:i,key:e.key,show:d,originId:b});null===n||void 0===n||n({value:{config:{interactive:{base:r.map((function(n){return n.name!==u?n:Object(f["a"])(Object(f["a"])({},n),{},{fields:n.fields.map((function(n){return n.key!==e.key?n:Object(f["a"])(Object(f["a"])({},n),{},{variable:a,mapId:s})}))})}))}}},id:i,path:t,action:"update"})}}),[i,n,o,l,r,d,b]),O=Object(t["useCallback"])((function(e){null===n||void 0===n||n({value:{config:{interactive:{base:r.map((function(a){return a.name!==u?a:Object(f["a"])(Object(f["a"])({},a),{},{fields:[].concat(Object(E["a"])(s),[Object(f["a"])({},e)])})}))}}},id:i,action:"update"})}),[s,n,r]),h=Object(t["useCallback"])((function(e){var a=Object(E["a"])(s).filter((function(a){return a.key!==e.key}));null===n||void 0===n||n({value:{config:{interactive:{base:r.map((function(e){return e.name!==u?e:Object(f["a"])(Object(f["a"])({},e),{},{fields:a})}))}}},id:i,action:"update"})}),[s,n,r]),y=Object(t["useMemo"])((function(){return[{key:"key",title:"\u5b57\u6bb5",dataIndex:"key"},{key:"variable",title:"\u7ed1\u5b9a\u5230\u53d8\u91cf",dataIndex:"variable",width:140,render:function(e,a){return c.a.createElement(x["a"],{className:"w-100",value:e,onChange:v.bind(null,a),placeholder:"\u53ef\u81ea\u5b9a\u4e49"})}},{key:"description",title:"\u5b57\u6bb5\u8bf4\u660e",dataIndex:"description"}]}),[n,v]);return c.a.createElement(c.a.Fragment,null,!!g&&c.a.createElement(V,{onOk:O,fields:s}),c.a.createElement(M["a"],{dataSource:s,columns:g?[].concat(Object(E["a"])(y),[{key:"operation",title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,a,n){return c.a.createElement(k["b"],null,c.a.createElement(j["a"],{type:"link",danger:!0,icon:c.a.createElement(_["a"],null),onClick:h.bind(null,a)}))}}]):y,rowKey:"key"}))},T=B,Y=function(e){return{params:e.global.screenData.config.attr.params}},q=function(e){return{setScreen:function(a){return e({type:"global/setScreen",value:a})}}},R=b["a"].Panel,D=function(e){var a=e.isActive;return c.a.createElement(g["a"],{rotate:a?90:0})},z=function(e){var a=e.value,n=a.description,t=a.name,i=O["a"].getComponent((null===n||void 0===n?void 0:n.replace("component_",""))||"");return n?n.startsWith("component_")?c.a.createElement(c.a.Fragment,null,t,i&&c.a.createElement(i,null)):c.a.createElement(c.a.Fragment,null,t,c.a.createElement(v["a"],{title:n},c.a.createElement(u["a"],{className:"m-l-4"}))):c.a.createElement(c.a.Fragment,null,t)},J=function(e){var a=e.id,n=e.component,i=e.onChange,r=e.params,o=e.setScreen,u=Object(t["useCallback"])((function(e){o({config:{attr:{params:e}}})}),[o]),s=function(e,n){return p["a"].enableComponentInteractive({params:r,setParams:u},a,n,e)},g=Object(t["useMemo"])((function(){return Object(l["get"])(n,"config.interactive.base")}),[n]),v=Object(t["useMemo"])((function(){return(g||[]).reduce((function(e,n){var t=n.type,o=n.name,l=n.show;return e.keys.push(t),e.domList.push(c.a.createElement(R,{header:c.a.createElement(z,{value:n}),key:t,extra:c.a.createElement(d["a"],{className:S.a["design-config-interactive-base-checkbox"],checked:l,onClick:function(e){return e.stopPropagation()},onChange:function(e){var n=Object(m["k"])(a),c=e.target.checked;null===i||void 0===i||i({value:{config:{interactive:{base:g.map((function(e){return e.name!==o?e:Object(f["a"])(Object(f["a"])({},e),{},{show:c})}))}}},id:a,path:n,action:"update"}),s(c,t)}},c.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},"\u542f\u7528"))},c.a.createElement(T,{value:n,onChange:i,id:a,dataSource:g,key:o,params:r,setParams:u}))),e}),{keys:[],domList:[]})}),[i,g,r,u]),O=v.keys,k=v.domList;return c.a.createElement("div",{className:S.a["design-config-interactive-base"]},c.a.createElement(b["a"],{defaultActiveKey:["1"],expandIcon:D,bordered:!1,className:S.a["design-config-interactive-base-collapse"]},c.a.createElement(R,{header:"\u4ea4\u4e92\u4e8b\u4ef6",key:"1"},c.a.createElement(b["a"],{defaultActiveKey:O,expandIcon:D,bordered:!1,className:S.a["design-config-interactive-base-collapse"]},k))))},G=Object(i["c"])(Y,q)(J),Z=n("jrin"),Q=(n("5NDa"),n("5rEg")),W=n("0Owb"),X=n("kMsK"),H=function(e){var a=e.value,n=e.defaultValue,i=e.onChange,r=e.onBlur,o=e.triggerOnChangeInOnChange,l=void 0!==o&&o,u=e.onFocus,s=Object(t["useState"])(null!==a&&void 0!==a?a:n),m=Object(N["a"])(s,2),d=m[0],f=m[1],b=Object(t["useRef"])(!!e.autoFocus),g=Object(t["useCallback"])((function(e){var a=e.target.value;f(a),l&&(null===i||void 0===i||i(a))}),[i,l]),v=Object(t["useCallback"])((function(e){a!==d&&(null===i||void 0===i||i(d)),null===r||void 0===r||r(e),b.current=!1}),[r,i,d,a]),p=Object(t["useCallback"])((function(e){null===u||void 0===u||u(e),b.current=!0}),[u]);return Object(t["useEffect"])((function(){void 0!==a&&f(a)}),[a]),Object(X["a"])((function(){a!=d&&b.current&&(null===i||void 0===i||i(d))})),c.a.createElement(Q["a"].TextArea,Object(W["a"])({},e,{onChange:g,onBlur:v,value:d,onFocus:p}))},U=H,$=b["a"].Panel,ee=function(e){var a=e.isActive;return c.a.createElement(g["a"],{rotate:a?90:0})},ae=function(e){var a=e.value,n=a.description,t=a.name,i=O["a"].getComponent((null===n||void 0===n?void 0:n.replace("component_",""))||"");return n?n.startsWith("component_")?c.a.createElement(c.a.Fragment,null,t,i&&c.a.createElement(i,null)):c.a.createElement(c.a.Fragment,null,t,c.a.createElement(v["a"],{title:n},c.a.createElement(u["a"],{className:"m-l-4"}))):c.a.createElement(c.a.Fragment,null,t)},ne=function(e){var a=e.id,n=e.component,i=e.onChange,r=Object(t["useMemo"])((function(){return Object(l["get"])(n,"config.interactive.linkage")}),[n]),o=Object(t["useCallback"])((function(e,n,t){var c=Object(m["k"])(a);null===i||void 0===i||i({value:{config:{interactive:{linkage:r.map((function(a){return a.name!==n?a:Object(f["a"])(Object(f["a"])({},a),{},Object(Z["a"])({},e,t))}))}}},id:a,path:c,action:"update"})}),[r,i,a]),s=Object(t["useMemo"])((function(){return(r||[]).reduce((function(e,a){var n=a.type,t=a.name,i=a.show,r=a.value;return e.keys.push(n),e.domList.push(c.a.createElement($,{header:c.a.createElement(ae,{value:a}),key:n,extra:c.a.createElement(d["a"],{className:S.a["design-config-interactive-base-checkbox"],checked:i,onClick:function(e){return e.stopPropagation()},onChange:function(e){var a=e.target.checked;o("show",t,a)}},c.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},"\u542f\u7528"))},c.a.createElement(U,{value:r,onChange:o.bind(null,"value",t)}))),e}),{keys:[],domList:[]})}),[i,r]),g=s.keys,p=s.domList;return c.a.createElement("div",{className:S.a["design-config-interactive-base"]},c.a.createElement(b["a"],{defaultActiveKey:["1"],expandIcon:ee,bordered:!1,className:S.a["design-config-interactive-base-collapse"]},c.a.createElement($,{header:c.a.createElement(v["a"],{title:'\u94fe\u63a5\u5730\u5740\u652f\u6301\u53d8\u91cf\uff0c\u4f7f\u7528"{{}}"\u5305\u542b\u53d8\u91cf'},"\u8df3\u8f6c\u4ea4\u4e92",c.a.createElement(u["a"],{className:"m-l-4"})),key:"1"},c.a.createElement(b["a"],{defaultActiveKey:g,expandIcon:ee,bordered:!1,className:S.a["design-config-interactive-base-collapse"]},p))))},te=ne,ce=function(e){return{components:e.global.components}},ie=function(e){return{}},re=n("jfCG"),oe=n.n(re),le=function(e){var a=e.id,n=e.components,i=Object(t["useMemo"])((function(){return Object(m["d"])(a,n)}),[a,n]),r=Object(t["useMemo"])((function(){return Object(l["get"])(i,"config.interactive")}),[i]),d=r.base,f=void 0===d?[]:d,b=r.linkage,g=void 0===b?[]:b;return c.a.createElement("div",{className:o()(oe.a["design-config-interactive"],"design-config-format-font-size")},!f.length&&!g.length&&c.a.createElement("div",{className:oe.a["design-config-interactive-base-empty"]},c.a.createElement(u["a"],{style:{marginRight:4}}),"\u8be5\u7ec4\u4ef6\u65e0\u4ea4\u4e92\u4e8b\u4ef6"),!!f.length&&c.a.createElement(G,{id:a,component:i,onChange:s["a"].setComponent}),!!g.length&&c.a.createElement(te,{id:a,component:i,onChange:s["a"].setComponent}))};a["default"]=Object(i["c"])(ce,ie)(le)},Ix2a:function(e,a,n){"use strict";n("5NDa");var t=n("5rEg"),c=n("0Owb"),i=n("tJVT"),r=n("q1tI"),o=n.n(r),l=n("kMsK"),u=function(e){var a=e.value,n=e.defaultValue,u=e.onChange,s=e.onBlur,m=e.triggerOnChangeInOnChange,d=void 0!==m&&m,f=e.onFocus,b=Object(r["useState"])(null!==a&&void 0!==a?a:n),g=Object(i["a"])(b,2),v=g[0],p=g[1],O=Object(r["useRef"])(!!e.autoFocus),k=Object(r["useCallback"])((function(e){var a=e.target.value;p(a),d&&(null===u||void 0===u||u(a))}),[u,d]),j=Object(r["useCallback"])((function(e){a!==v&&(null===u||void 0===u||u(v)),null===s||void 0===s||s(e),O.current=!1}),[s,u,v,a]),E=Object(r["useCallback"])((function(e){null===f||void 0===f||f(e),O.current=!0}),[f]);return Object(r["useEffect"])((function(){void 0!==a&&p(a)}),[a]),Object(l["a"])((function(){a!=v&&O.current&&(null===u||void 0===u||u(v))})),o.a.createElement(t["a"],Object(c["a"])({},e,{onFocus:E,onChange:k,onBlur:j,value:v}))};a["a"]=u},NPMa:function(e,a,n){e.exports={"design-config-map-table":"design-config-map-table___20OSI"}},jfCG:function(e,a,n){e.exports={"design-config-interactive":"design-config-interactive___NrbA-"}},tnti:function(e,a,n){"use strict";n("g9YV");var t=n("wCAj"),c=n("0Owb"),i=n("PpiC"),r=n("q1tI"),o=n.n(r),l=n("TSYQ"),u=n.n(l),s=n("NPMa"),m=n.n(s),d=["className"];function f(e){var a=e.className,n=Object(i["a"])(e,d);return o.a.createElement(t["a"],Object(c["a"])({pagination:!1,className:u()(a,m.a["design-config-map-table"]),bordered:!1},n))}a["a"]=f}}]);