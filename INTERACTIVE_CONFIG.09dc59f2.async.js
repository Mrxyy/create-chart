(self["webpackChunkcreate_chart"]=self["webpackChunkcreate_chart"]||[]).push([[5403],{79160:function(e){e.exports={"design-config-interactive-base-empty":"design-config-interactive-base-empty___3GdoL","design-config-interactive-base-checkbox":"design-config-interactive-base-checkbox___1Bmi6","design-config-interactive-base-collapse":"design-config-interactive-base-collapse___2GOMJ","design-config-interactive-base-field-add-modal":"design-config-interactive-base-field-add-modal___1TsFZ"}},44213:function(e){e.exports={"design-config-interactive":"design-config-interactive___NrbA-"}},50553:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return de}});var i=t(67294),a=t(28216),r=t(94184),o=t.n(r),c=t(96486),l=t(68628),s=t(75162),u=t(97603),d=(t(63185),t(9676)),f=t(11849),h=(t(7359),t(46445)),v=t(25782),g=t(80585),m=t(45751),p=t(30941),b=(t(49111),t(19650)),x=(t(57663),t(71577)),j=t(86582),k=(t(71194),t(50146)),Z=(t(34792),t(55026)),y=t(93224),C=t(2824),w=(t(9715),t(63202)),N=t(73171),_=t(96563),W=t(40011),I=t(61406),F=t(52299),M=t(5933),V=t(79160),H=t.n(V),O=t(85893),P=["key"],E=w.Z.Item,L=w.Z.useForm,S=function(e){var n=e.onOk,t=e.fields,a=e.disabled,r=void 0!==a&&a,o=L(),c=(0,C.Z)(o,1),l=c[0],s=(0,i.useState)(!1),u=(0,C.Z)(s,2),d=u[0],h=u[1],v=(0,i.useMemo)((function(){return t.map((function(e){return e.key}))}),[t]),g=function(){h(!0),I.Z.forceFocus()},m=function(){h(!1),l.resetFields(),I.Z.forceUnFocus()},p=(0,i.useCallback)((function(){var e=l.getFieldsValue(),t=e.key,i=(0,y.Z)(e,P);if(v.includes(t))return Z.default.info("\u5b58\u5728\u76f8\u540c\u5b57\u6bb5");null===n||void 0===n||n((0,f.Z)((0,f.Z)({},i),{},{key:t})),m()}),[n,v]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(W.Z,{disabled:r,onClick:g,children:"\u65b0\u589e\u5b57\u6bb5"}),(0,O.jsx)(k.Z,{title:"\u65b0\u589e\u5b57\u6bb5",open:d,onCancel:m,onOk:p,children:(0,O.jsxs)(w.Z,{form:l,size:"small",className:H()["design-config-interactive-base-field-add-modal"],children:[(0,O.jsx)(E,{label:"\u5b57\u6bb5key",name:"key",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5key"}],children:(0,O.jsx)(_.Z,{})}),(0,O.jsx)(E,{label:"\u5b57\u6bb5\u8bf4\u660e",name:"description",children:(0,O.jsx)(_.Z,{})})]})})]})},D=function(e){var n=e.value,t=e.onChange,a=e.id,r=e.dataSource,o=(e.params,e.setParams,e.disabled),c=void 0!==o&&o,s=n.name,d=n.fields,h=(n.show,n.type,n.extend),v=(0,i.useCallback)((function(e,n,i){var o=(0,u.DW)(a),c=(0,F.VX)({componentId:a,isDefaultValue:"defaultValue"===n||n,interactive:r,newValue:i,targetInteractiveName:s,callback:function(n){return n.key===e.key}});c&&(null===t||void 0===t||t({value:c,id:a,path:o,action:"update"}))}),[a,t,r]),m=(0,i.useCallback)((function(e){null===t||void 0===t||t({value:{config:{interactive:{base:r.map((function(n){return n.name!==s?n:(0,f.Z)((0,f.Z)({},n),{},{fields:[].concat((0,j.Z)(d),[(0,f.Z)({},e)])})}))}}},id:a,action:"update"})}),[d,t,r]),p=(0,i.useCallback)((function(e){var n=(0,j.Z)(d).filter((function(n){return n.key!==e.key}));null===t||void 0===t||t({value:{config:{interactive:{base:r.map((function(e){return e.name!==s?e:(0,f.Z)((0,f.Z)({},e),{},{fields:n})}))}}},id:a,action:"update"})}),[d,t,r]),k=(0,i.useMemo)((function(){return[{key:"key",title:"\u5b57\u6bb5",dataIndex:"key"},{key:"variable",title:(0,O.jsxs)(O.Fragment,{children:["\u7ed1\u5b9a\u5230\u53d8\u91cf",(0,O.jsx)(g.Z,{title:(0,O.jsx)("div",{className:"ali-l",children:"\u5f53\u524d\u903b\u8f91\u4e3a\uff1a\u53ea\u6709\u8bbe\u7f6e\u4e86\u7ed1\u5b9a\u53d8\u91cf\u624d\u53ef\u4f7f\u7528\uff08\u9ed8\u8ba4\u503c\u540c\u6837\u9700\u8981\u5728\u6b64\u503c\u8bbe\u7f6e\u7684\u60c5\u51b5\u4e0b\uff09\u3002"}),children:(0,O.jsx)(l.Z,{className:"m-l-4"})})]}),dataIndex:"variable",width:100,render:function(e,n){return(0,O.jsx)(_.f,{className:"w-100",value:e,onChange:v.bind(null,n,"variable"),placeholder:"\u53ef\u81ea\u5b9a\u4e49",disabled:c})}},{key:"defaultValue",title:(0,O.jsxs)(O.Fragment,{children:["\u9ed8\u8ba4\u503c",(0,O.jsx)(g.Z,{title:(0,O.jsx)("div",{className:"ali-l",children:"\u82e5\u4e0d\u53ef\u7f16\u8f91\u53ef\u5728\u57fa\u7840\u914d\u7f6e\u4e2d\u5bfb\u627e\u662f\u5426\u5b58\u5728\u9ed8\u8ba4\u503c\u7684\u914d\u7f6e"}),children:(0,O.jsx)(l.Z,{className:"m-l-4"})})]}),dataIndex:"defaultValue",width:90,render:function(e,n){return!1===n._defaultValue_?e||"-":(0,O.jsx)(_.f,{className:"w-100",value:e||"",onChange:v.bind(null,n,"defaultValue"),placeholder:"\u521d\u59cb\u9ed8\u8ba4\u503c",disabled:c})}},{key:"description",title:"\u5b57\u6bb5\u8bf4\u660e",dataIndex:"description"}]}),[t,v,c]);return(0,O.jsxs)(O.Fragment,{children:[!!h&&(0,O.jsx)(S,{disabled:c,onOk:m,fields:d}),(0,O.jsx)(M.Z,{dataSource:d,columns:h?[].concat((0,j.Z)(k),[{key:"operation",title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,n,t){return(0,O.jsx)(b.Z,{children:(0,O.jsx)(x.Z,{type:"link",danger:!0,disabled:c,icon:(0,O.jsx)(N.Z,{}),onClick:p.bind(null,n)})})}}]):k,rowKey:"key"})]})},A=D,B=function(e){return{params:e.global.screenData.config.attr.params}},T=function(e){return{setScreen:function(n){return e({type:"global/setScreen",value:n})}}},R=h.Z.Panel,K=function(e){var n=e.isActive;return(0,O.jsx)(v.Z,{rotate:n?90:0})},X=function(e){var n=e.value,t=n.description,i=n.name,a=p.Z.getComponent((null===t||void 0===t?void 0:t.replace("component_",""))||"");return t?t.startsWith("component_")?(0,O.jsxs)(O.Fragment,{children:[i,a&&(0,O.jsx)(a,{})]}):(0,O.jsxs)(O.Fragment,{children:[i,(0,O.jsx)(g.Z,{title:t,children:(0,O.jsx)(l.Z,{className:"m-l-4"})})]}):(0,O.jsx)(O.Fragment,{children:i})},Y=function(e){var n=e.id,t=e.component,a=e.onChange,r=e.params,o=e.setScreen,l=(0,i.useCallback)((function(e){o({config:{attr:{params:e}}})}),[o]),s=function(e,t){return m.Z.enableComponentInteractive({params:r,setParams:l},n,t,e)},v=(0,i.useMemo)((function(){return(0,c.get)(t,"config.interactive.base")}),[t]),g=(0,i.useMemo)((function(){var e=function(e){var t=(0,u.DW)(n);null===a||void 0===a||a({value:{config:{interactive:{base:v.map((function(n){return n.name!==e.name?n:(0,f.Z)((0,f.Z)({},n),e)}))}}},id:n,path:t,action:"update"})};return(v||[]).reduce((function(t,i){var o=i.type,c=i.name,u=i.show;return t.keys.push(o),t.domList.push((0,O.jsx)(R,{header:(0,O.jsx)(X,{value:i}),extra:(0,O.jsx)(d.Z,{className:H()["design-config-interactive-base-checkbox"],checked:u,onClick:function(e){return e.stopPropagation()},onChange:function(n){var t=n.target.checked;e({name:c,show:t}),s(t,o)},children:(0,O.jsx)("span",{onClick:function(e){return e.stopPropagation()},children:"\u542f\u7528"})}),children:(0,O.jsx)(A,{value:i,onChange:a,id:n,dataSource:v,params:r,setParams:l,disabled:!u},c)},o)),t}),{keys:[],domList:[]})}),[a,v,r,l]),p=g.keys,b=g.domList;return(0,O.jsx)("div",{className:H()["design-config-interactive-base"],children:(0,O.jsx)(h.Z,{defaultActiveKey:["1"],expandIcon:K,bordered:!1,className:H()["design-config-interactive-base-collapse"],children:(0,O.jsx)(R,{header:"\u4ea4\u4e92\u4e8b\u4ef6",children:(0,O.jsx)(h.Z,{defaultActiveKey:p,expandIcon:K,bordered:!1,className:H()["design-config-interactive-base-collapse"],children:b})},"1")})})},z=(0,a.$j)(B,T)(Y),G=t(32059),$=(t(47673),t(4107)),q=t(45210),J=t(68702),U=["triggerOnChangeInOnChange","validator"],Q=function(e){var n=e.triggerOnChangeInOnChange,t=void 0!==n&&n,a=e.validator,r=void 0===a?[]:a,o=(0,y.Z)(e,U),c=o.value,l=o.defaultValue,s=o.onChange,u=o.onBlur,d=o.onFocus,h=(0,i.useState)(null!==c&&void 0!==c?c:l),v=(0,C.Z)(h,2),g=v[0],m=v[1],p=(0,i.useRef)(!!e.autoFocus),b=(0,i.useCallback)((function(e){var n=e.target.value;m(n),t&&(null===s||void 0===s||s(n))}),[s,t]),x=(0,J.r3)(b),j=x.validator,k=(0,i.useCallback)((function(e){var n=j(c,"",r);n!==g&&(null===s||void 0===s||s(g)),null===u||void 0===u||u(e),p.current=!1}),[u,s,g,c,r]),Z=(0,i.useCallback)((function(e){null===d||void 0===d||d(e),p.current=!0}),[d]);return(0,i.useEffect)((function(){void 0!==c&&m(c)}),[c]),(0,q.Z)((function(){c!=g&&p.current&&(null===s||void 0===s||s(g))})),(0,O.jsx)($.Z.TextArea,(0,f.Z)((0,f.Z)({},o),{},{onChange:b,onBlur:k,value:g,onFocus:Z}))},ee=Q,ne=h.Z.Panel,te=function(e){var n=e.isActive;return(0,O.jsx)(v.Z,{rotate:n?90:0})},ie=function(e){var n=e.value,t=n.description,i=n.name,a=p.Z.getComponent((null===t||void 0===t?void 0:t.replace("component_",""))||"");return t?t.startsWith("component_")?(0,O.jsxs)(O.Fragment,{children:[i,a&&(0,O.jsx)(a,{})]}):(0,O.jsxs)(O.Fragment,{children:[i,(0,O.jsx)(g.Z,{title:t,children:(0,O.jsx)(l.Z,{className:"m-l-4"})})]}):(0,O.jsx)(O.Fragment,{children:i})},ae=function(e){var n=e.id,t=e.component,a=e.onChange,r=(0,i.useMemo)((function(){return(0,c.get)(t,"config.interactive.linkage")}),[t]),o=(0,i.useCallback)((function(e,t,i){var o=(0,u.DW)(n);null===a||void 0===a||a({value:{config:{interactive:{linkage:r.map((function(n){return n.name!==t?n:(0,f.Z)((0,f.Z)({},n),{},(0,G.Z)({},e,i))}))}}},id:n,path:o,action:"update"})}),[r,a,n]),s=(0,i.useMemo)((function(){return(r||[]).reduce((function(e,n){var t=n.type,i=n.name,a=n.show,r=n.value;return e.keys.push(t),e.domList.push((0,O.jsx)(ne,{header:(0,O.jsx)(ie,{value:n}),extra:(0,O.jsx)(d.Z,{className:H()["design-config-interactive-base-checkbox"],checked:a,onClick:function(e){return e.stopPropagation()},onChange:function(e){var n=e.target.checked;o("show",i,n)},children:(0,O.jsx)("span",{onClick:function(e){return e.stopPropagation()},children:"\u542f\u7528"})}),children:(0,O.jsx)(ee,{value:r,onChange:o.bind(null,"value",i),disabled:!a})},t)),e}),{keys:[],domList:[]})}),[a,r]),v=s.keys,m=s.domList;return(0,O.jsx)("div",{className:H()["design-config-interactive-base"],children:(0,O.jsx)(h.Z,{defaultActiveKey:["2"],expandIcon:te,bordered:!1,className:H()["design-config-interactive-base-collapse"],children:(0,O.jsx)(ne,{header:(0,O.jsxs)(g.Z,{title:'\u94fe\u63a5\u5730\u5740\u652f\u6301\u53d8\u91cf\uff0c\u4f7f\u7528"{{}}"\u5305\u542b\u53d8\u91cf',children:["\u8df3\u8f6c\u4ea4\u4e92",(0,O.jsx)(l.Z,{className:"m-l-4"})]}),children:(0,O.jsx)(h.Z,{defaultActiveKey:v,expandIcon:te,bordered:!1,className:H()["design-config-interactive-base-collapse"],children:m})},"2")})})},re=ae,oe=function(e){return{components:e.global.components}},ce=function(e){return{}},le=t(44213),se=t.n(le),ue=function(e){var n=e.id,t=e.components,a=(0,i.useMemo)((function(){return(0,u.Xr)(n,t)}),[n,t]),r=(0,i.useMemo)((function(){return(0,c.get)(a,"config.interactive")}),[a]),d=r.base,f=void 0===d?[]:d,h=r.linkage,v=void 0===h?[]:h;return(0,O.jsxs)("div",{className:o()(se()["design-config-interactive"],"design-config-format-font-size"),children:[!f.length&&!v.length&&(0,O.jsxs)("div",{className:se()["design-config-interactive-base-empty"],children:[(0,O.jsx)(l.Z,{style:{marginRight:4}}),"\u8be5\u7ec4\u4ef6\u65e0\u4ea4\u4e92\u4e8b\u4ef6"]}),!!f.length&&(0,O.jsx)(z,{id:n,component:a,onChange:s.ZP.setComponent}),!!v.length&&(0,O.jsx)(re,{id:n,component:a,onChange:s.ZP.setComponent})]})},de=(0,a.$j)(oe,ce)(ue)},23228:function(e,n,t){"use strict";function i(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function a(e,n){return(!n||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function r(e,n){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return a(t.overflowY,n)||a(t.overflowX,n)||function(e){var n=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!n&&(n.clientHeight<e.scrollHeight||n.clientWidth<e.scrollWidth)}(e)}return!1}function o(e,n,t,i,a,r,o,c){return r<e&&o>n||r>e&&o<n?0:r<=e&&c<=t||o>=n&&c>=t?r-e-i:o>n&&c<t||r<e&&c>t?o-n+a:0}t.d(n,{Z:function(){return f}});var c=function(e,n){var t=window,a=n.scrollMode,c=n.block,l=n.inline,s=n.boundary,u=n.skipOverflowHiddenElements,d="function"==typeof s?s:function(e){return e!==s};if(!i(e))throw new TypeError("Invalid target");for(var f,h,v=document.scrollingElement||document.documentElement,g=[],m=e;i(m)&&d(m);){if((m=null==(h=(f=m).parentElement)?f.getRootNode().host||null:h)===v){g.push(m);break}null!=m&&m===document.body&&r(m)&&!r(document.documentElement)||null!=m&&r(m,u)&&g.push(m)}for(var p=t.visualViewport?t.visualViewport.width:innerWidth,b=t.visualViewport?t.visualViewport.height:innerHeight,x=window.scrollX||pageXOffset,j=window.scrollY||pageYOffset,k=e.getBoundingClientRect(),Z=k.height,y=k.width,C=k.top,w=k.right,N=k.bottom,_=k.left,W="start"===c||"nearest"===c?C:"end"===c?N:C+Z/2,I="center"===l?_+y/2:"end"===l?w:_,F=[],M=0;M<g.length;M++){var V=g[M],H=V.getBoundingClientRect(),O=H.height,P=H.width,E=H.top,L=H.right,S=H.bottom,D=H.left;if("if-needed"===a&&C>=0&&_>=0&&N<=b&&w<=p&&C>=E&&N<=S&&_>=D&&w<=L)return F;var A=getComputedStyle(V),B=parseInt(A.borderLeftWidth,10),T=parseInt(A.borderTopWidth,10),R=parseInt(A.borderRightWidth,10),K=parseInt(A.borderBottomWidth,10),X=0,Y=0,z="offsetWidth"in V?V.offsetWidth-V.clientWidth-B-R:0,G="offsetHeight"in V?V.offsetHeight-V.clientHeight-T-K:0,$="offsetWidth"in V?0===V.offsetWidth?0:P/V.offsetWidth:0,q="offsetHeight"in V?0===V.offsetHeight?0:O/V.offsetHeight:0;if(v===V)X="start"===c?W:"end"===c?W-b:"nearest"===c?o(j,j+b,b,T,K,j+W,j+W+Z,Z):W-b/2,Y="start"===l?I:"center"===l?I-p/2:"end"===l?I-p:o(x,x+p,p,B,R,x+I,x+I+y,y),X=Math.max(0,X+j),Y=Math.max(0,Y+x);else{X="start"===c?W-E-T:"end"===c?W-S+K+G:"nearest"===c?o(E,S,O,T,K+G,W,W+Z,Z):W-(E+O/2)+G/2,Y="start"===l?I-D-B:"center"===l?I-(D+P/2)+z/2:"end"===l?I-L+R+z:o(D,L,P,B,R+z,I,I+y,y);var J=V.scrollLeft,U=V.scrollTop;W+=U-(X=Math.max(0,Math.min(U+X/q,V.scrollHeight-O/q+G))),I+=J-(Y=Math.max(0,Math.min(J+Y/$,V.scrollWidth-P/$+z)))}F.push({el:V,top:X,left:Y})}return F};function l(e){return e===Object(e)&&0!==Object.keys(e).length}function s(e,n){void 0===n&&(n="auto");var t="scrollBehavior"in document.body.style;e.forEach((function(e){var i=e.el,a=e.top,r=e.left;i.scroll&&t?i.scroll({top:a,left:r,behavior:n}):(i.scrollTop=a,i.scrollLeft=r)}))}function u(e){return!1===e?{block:"end",inline:"nearest"}:l(e)?e:{block:"start",inline:"nearest"}}function d(e,n){var t=e.isConnected||e.ownerDocument.documentElement.contains(e);if(l(n)&&"function"===typeof n.behavior)return n.behavior(t?c(e,n):[]);if(t){var i=u(n);return s(c(e,i),i.behavior)}}var f=d}}]);