(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{"5nup":function(e,t,n){e.exports={"design-config-interactive-base-empty":"design-config-interactive-base-empty___3GdoL","design-config-interactive-base-checkbox":"design-config-interactive-base-checkbox___1Bmi6","design-config-interactive-base-collapse":"design-config-interactive-base-collapse___2GOMJ","design-config-interactive-base-field-add-modal":"design-config-interactive-base-field-add-modal___1TsFZ"}},HApb:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),i=n.n(a),c=n("/MKj"),r=n("TSYQ"),o=n.n(r),l=n("LvDl"),u=n("+YFz"),s=n("9ZlZ"),d=n("DhgR"),f=(n("sRBo"),n("kaz8")),m=n("k1fw"),g=(n("fu2T"),n("gK9i")),b=n("X72a"),v=n("Emgl"),p=n("opvp"),h=n("mKj2"),k=(n("DYRE"),n("zeV3")),E=(n("+L6B"),n("2/Rp")),O=n("oBTY"),j=(n("2qtc"),n("kLXV")),y=(n("miYZ"),n("tsqr")),C=n("PpiC"),w=n("tJVT"),x=(n("y8nQ"),n("Vl3Y")),I=n("/MfK"),M=n("Ix2a"),_=n("5cOq"),F=n("2yeE"),N=n("tnti"),W=n("5nup"),H=n.n(W),L=["key"],V=x["a"].Item,B=x["a"].useForm,P=function(e){var t=e.onOk,n=e.fields,c=B(),r=Object(w["a"])(c,1),o=r[0],l=Object(a["useState"])(!1),u=Object(w["a"])(l,2),s=u[0],d=u[1],f=Object(a["useMemo"])((function(){return n.map((function(e){return e.key}))}),[n]),g=function(){d(!0),F["a"].forceFocus()},b=function(){d(!1),o.resetFields(),F["a"].forceUnFocus()},v=Object(a["useCallback"])((function(){var e=o.getFieldsValue(),n=e.key,a=Object(C["a"])(e,L);if(f.includes(n))return y["default"].info("\u5b58\u5728\u76f8\u540c\u5b57\u6bb5");null===t||void 0===t||t(Object(m["a"])(Object(m["a"])({},a),{},{key:n})),b()}),[t,f]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(_["a"],{onClick:g},"\u65b0\u589e\u5b57\u6bb5"),i.a.createElement(j["a"],{title:"\u65b0\u589e\u5b57\u6bb5",open:s,onCancel:b,onOk:v},i.a.createElement(x["a"],{form:o,size:"small",className:H.a["design-config-interactive-base-field-add-modal"]},i.a.createElement(V,{label:"\u5b57\u6bb5key",name:"key",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5key"}]},i.a.createElement(M["a"],null)),i.a.createElement(V,{label:"\u5b57\u6bb5\u8bf4\u660e",name:"description"},i.a.createElement(M["a"],null)))))},R=function(e){var t=e.value,n=e.onChange,c=e.id,r=e.dataSource,o=e.params,l=e.setParams,u=t.name,s=t.fields,f=t.show,g=t.type,b=t.extend,v=Object(a["useCallback"])((function(e,t){var a=Object(d["k"])(c),i=e.variable;if(i!==t){var s=p["a"].updateBaseInteractiveVariable({params:o,setParams:l},{variable:t,id:e.mapId,origin:c,key:e.key,show:f,originId:g});null===n||void 0===n||n({value:{config:{interactive:{base:r.map((function(n){return n.name!==u?n:Object(m["a"])(Object(m["a"])({},n),{},{fields:n.fields.map((function(n){return n.key!==e.key?n:Object(m["a"])(Object(m["a"])({},n),{},{variable:t,mapId:s})}))})}))}}},id:c,path:a,action:"update"})}}),[c,n,o,l,r,f,g]),h=Object(a["useCallback"])((function(e){null===n||void 0===n||n({value:{config:{interactive:{base:r.map((function(t){return t.name!==u?t:Object(m["a"])(Object(m["a"])({},t),{},{fields:[].concat(Object(O["a"])(s),[Object(m["a"])({},e)])})}))}}},id:c,action:"update"})}),[s,n,r]),j=Object(a["useCallback"])((function(e){var t=Object(O["a"])(s).filter((function(t){return t.key!==e.key}));null===n||void 0===n||n({value:{config:{interactive:{base:r.map((function(e){return e.name!==u?e:Object(m["a"])(Object(m["a"])({},e),{},{fields:t})}))}}},id:c,action:"update"})}),[s,n,r]),y=Object(a["useMemo"])((function(){return[{key:"key",title:"\u5b57\u6bb5",dataIndex:"key"},{key:"variable",title:"\u7ed1\u5b9a\u5230\u53d8\u91cf",dataIndex:"variable",width:140,render:function(e,t){return i.a.createElement(M["a"],{className:"w-100",value:e,onChange:v.bind(null,t),placeholder:"\u53ef\u81ea\u5b9a\u4e49"})}},{key:"description",title:"\u5b57\u6bb5\u8bf4\u660e",dataIndex:"description"}]}),[n,v]);return i.a.createElement(i.a.Fragment,null,!!b&&i.a.createElement(P,{onOk:h,fields:s}),i.a.createElement(N["a"],{dataSource:s,columns:b?[].concat(Object(O["a"])(y),[{key:"operation",title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,t,n){return i.a.createElement(k["b"],null,i.a.createElement(E["a"],{type:"link",danger:!0,icon:i.a.createElement(I["a"],null),onClick:j.bind(null,t)}))}}]):y,rowKey:"key"}))},S=R,T=function(e){return{params:e.global.screenData.config.attr.params}},K=function(e){return{setScreen:function(t){return e({type:"global/setScreen",value:t})}}},A=g["a"].Panel,D=function(e){var t=e.isActive;return i.a.createElement(b["a"],{rotate:t?90:0})},Y=function(e){var t=e.value,n=t.description,a=t.name,c=h["a"].getComponent((null===n||void 0===n?void 0:n.replace("component_",""))||"");return n?n.startsWith("component_")?i.a.createElement(i.a.Fragment,null,a,c&&i.a.createElement(c,null)):i.a.createElement(i.a.Fragment,null,a,i.a.createElement(v["a"],{title:n},i.a.createElement(u["a"],{className:"m-l-4"}))):i.a.createElement(i.a.Fragment,null,a)},q=function(e){var t=e.id,n=e.component,c=e.onChange,r=e.params,o=e.setScreen,u=Object(a["useCallback"])((function(e){o({config:{attr:{params:e}}})}),[o]),s=function(e,n){return p["a"].enableComponentInteractive({params:r,setParams:u},t,n,e)},b=Object(a["useMemo"])((function(){return Object(l["get"])(n,"config.interactive.base")}),[n]),v=Object(a["useMemo"])((function(){return(b||[]).reduce((function(e,n){var a=n.type,o=n.name,l=n.show;return e.keys.push(a),e.domList.push(i.a.createElement(A,{header:i.a.createElement(Y,{value:n}),key:a,extra:i.a.createElement(f["a"],{className:H.a["design-config-interactive-base-checkbox"],checked:l,onClick:function(e){return e.stopPropagation()},onChange:function(e){var n=Object(d["k"])(t),i=e.target.checked;null===c||void 0===c||c({value:{config:{interactive:{base:b.map((function(e){return e.name!==o?e:Object(m["a"])(Object(m["a"])({},e),{},{show:i})}))}}},id:t,path:n,action:"update"}),s(i,a)}},i.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},"\u542f\u7528"))},i.a.createElement(S,{value:n,onChange:c,id:t,dataSource:b,key:o,params:r,setParams:u}))),e}),{keys:[],domList:[]})}),[c,b,r,u]),h=v.keys,k=v.domList;return i.a.createElement("div",{className:H.a["design-config-interactive-base"]},i.a.createElement(g["a"],{defaultActiveKey:["1"],expandIcon:D,bordered:!1,className:H.a["design-config-interactive-base-collapse"]},i.a.createElement(A,{header:"\u4ea4\u4e92\u4e8b\u4ef6",key:"1"},i.a.createElement(g["a"],{defaultActiveKey:h,expandIcon:D,bordered:!1,className:H.a["design-config-interactive-base-collapse"]},k))))},z=Object(c["c"])(T,K)(q),X=n("jrin"),Z=(n("5NDa"),n("5rEg")),G=n("0Owb"),J=n("kMsK"),Q=function(e){var t=e.value,n=e.defaultValue,c=e.onChange,r=e.onBlur,o=e.triggerOnChangeInOnChange,l=void 0!==o&&o,u=e.onFocus,s=Object(a["useState"])(null!==t&&void 0!==t?t:n),d=Object(w["a"])(s,2),f=d[0],m=d[1],g=Object(a["useRef"])(!!e.autoFocus),b=Object(a["useCallback"])((function(e){var t=e.target.value;m(t),l&&(null===c||void 0===c||c(t))}),[c,l]),v=Object(a["useCallback"])((function(e){t!==f&&(null===c||void 0===c||c(f)),null===r||void 0===r||r(e),g.current=!1}),[r,c,f,t]),p=Object(a["useCallback"])((function(e){null===u||void 0===u||u(e),g.current=!0}),[u]);return Object(a["useEffect"])((function(){void 0!==t&&m(t)}),[t]),Object(J["a"])((function(){t!=f&&g.current&&(null===c||void 0===c||c(f))})),i.a.createElement(Z["a"].TextArea,Object(G["a"])({},e,{onChange:b,onBlur:v,value:f,onFocus:p}))},U=Q,$=g["a"].Panel,ee=function(e){var t=e.isActive;return i.a.createElement(b["a"],{rotate:t?90:0})},te=function(e){var t=e.value,n=t.description,a=t.name,c=h["a"].getComponent((null===n||void 0===n?void 0:n.replace("component_",""))||"");return n?n.startsWith("component_")?i.a.createElement(i.a.Fragment,null,a,c&&i.a.createElement(c,null)):i.a.createElement(i.a.Fragment,null,a,i.a.createElement(v["a"],{title:n},i.a.createElement(u["a"],{className:"m-l-4"}))):i.a.createElement(i.a.Fragment,null,a)},ne=function(e){var t=e.id,n=e.component,c=e.onChange,r=Object(a["useMemo"])((function(){return Object(l["get"])(n,"config.interactive.linkage")}),[n]),o=Object(a["useCallback"])((function(e,n,a){var i=Object(d["k"])(t);null===c||void 0===c||c({value:{config:{interactive:{linkage:r.map((function(t){return t.name!==n?t:Object(m["a"])(Object(m["a"])({},t),{},Object(X["a"])({},e,a))}))}}},id:t,path:i,action:"update"})}),[r,c,t]),s=Object(a["useMemo"])((function(){return(r||[]).reduce((function(e,t){var n=t.type,a=t.name,c=t.show,r=t.value;return e.keys.push(n),e.domList.push(i.a.createElement($,{header:i.a.createElement(te,{value:t}),key:n,extra:i.a.createElement(f["a"],{className:H.a["design-config-interactive-base-checkbox"],checked:c,onClick:function(e){return e.stopPropagation()},onChange:function(e){var t=e.target.checked;o("show",a,t)}},i.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},"\u542f\u7528"))},i.a.createElement(U,{value:r,onChange:o.bind(null,"value",a)}))),e}),{keys:[],domList:[]})}),[c,r]),b=s.keys,p=s.domList;return i.a.createElement("div",{className:H.a["design-config-interactive-base"]},i.a.createElement(g["a"],{defaultActiveKey:["1"],expandIcon:ee,bordered:!1,className:H.a["design-config-interactive-base-collapse"]},i.a.createElement($,{header:i.a.createElement(v["a"],{title:'\u94fe\u63a5\u5730\u5740\u652f\u6301\u53d8\u91cf\uff0c\u4f7f\u7528"{{}}"\u5305\u542b\u53d8\u91cf'},"\u8df3\u8f6c\u4ea4\u4e92",i.a.createElement(u["a"],{className:"m-l-4"})),key:"1"},i.a.createElement(g["a"],{defaultActiveKey:b,expandIcon:ee,bordered:!1,className:H.a["design-config-interactive-base-collapse"]},p))))},ae=ne,ie=function(e){return{components:e.global.components}},ce=function(e){return{}},re=n("jfCG"),oe=n.n(re),le=function(e){var t=e.id,n=e.components,c=Object(a["useMemo"])((function(){return Object(d["d"])(t,n)}),[t,n]),r=Object(a["useMemo"])((function(){return Object(l["get"])(c,"config.interactive")}),[c]),f=r.base,m=void 0===f?[]:f,g=r.linkage,b=void 0===g?[]:g;return i.a.createElement("div",{className:o()(oe.a["design-config-interactive"],"design-config-format-font-size")},!m.length&&!b.length&&i.a.createElement("div",{className:oe.a["design-config-interactive-base-empty"]},i.a.createElement(u["a"],{style:{marginRight:4}}),"\u8be5\u7ec4\u4ef6\u65e0\u4ea4\u4e92\u4e8b\u4ef6"),!!m.length&&i.a.createElement(z,{id:t,component:c,onChange:s["a"].setComponent}),!!b.length&&i.a.createElement(ae,{id:t,component:c,onChange:s["a"].setComponent}))};t["default"]=Object(c["c"])(ie,ce)(le)},ZpRC:function(e,t,n){"use strict";function a(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function i(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function c(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return i(n.overflowY,t)||i(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function r(e,t,n,a,i,c,r,o){return c<e&&r>t||c>e&&r<t?0:c<=e&&o<=n||r>=t&&o>=n?c-e-a:r>t&&o<n||c<e&&o>n?r-t+i:0}var o=function(e,t){var n=window,i=t.scrollMode,o=t.block,l=t.inline,u=t.boundary,s=t.skipOverflowHiddenElements,d="function"==typeof u?u:function(e){return e!==u};if(!a(e))throw new TypeError("Invalid target");for(var f,m,g=document.scrollingElement||document.documentElement,b=[],v=e;a(v)&&d(v);){if((v=null==(m=(f=v).parentElement)?f.getRootNode().host||null:m)===g){b.push(v);break}null!=v&&v===document.body&&c(v)&&!c(document.documentElement)||null!=v&&c(v,s)&&b.push(v)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,k=window.scrollX||pageXOffset,E=window.scrollY||pageYOffset,O=e.getBoundingClientRect(),j=O.height,y=O.width,C=O.top,w=O.right,x=O.bottom,I=O.left,M="start"===o||"nearest"===o?C:"end"===o?x:C+j/2,_="center"===l?I+y/2:"end"===l?w:I,F=[],N=0;N<b.length;N++){var W=b[N],H=W.getBoundingClientRect(),L=H.height,V=H.width,B=H.top,P=H.right,R=H.bottom,S=H.left;if("if-needed"===i&&C>=0&&I>=0&&x<=h&&w<=p&&C>=B&&x<=R&&I>=S&&w<=P)return F;var T=getComputedStyle(W),K=parseInt(T.borderLeftWidth,10),A=parseInt(T.borderTopWidth,10),D=parseInt(T.borderRightWidth,10),Y=parseInt(T.borderBottomWidth,10),q=0,z=0,X="offsetWidth"in W?W.offsetWidth-W.clientWidth-K-D:0,Z="offsetHeight"in W?W.offsetHeight-W.clientHeight-A-Y:0,G="offsetWidth"in W?0===W.offsetWidth?0:V/W.offsetWidth:0,J="offsetHeight"in W?0===W.offsetHeight?0:L/W.offsetHeight:0;if(g===W)q="start"===o?M:"end"===o?M-h:"nearest"===o?r(E,E+h,h,A,Y,E+M,E+M+j,j):M-h/2,z="start"===l?_:"center"===l?_-p/2:"end"===l?_-p:r(k,k+p,p,K,D,k+_,k+_+y,y),q=Math.max(0,q+E),z=Math.max(0,z+k);else{q="start"===o?M-B-A:"end"===o?M-R+Y+Z:"nearest"===o?r(B,R,L,A,Y+Z,M,M+j,j):M-(B+L/2)+Z/2,z="start"===l?_-S-K:"center"===l?_-(S+V/2)+X/2:"end"===l?_-P+D+X:r(S,P,V,K,D+X,_,_+y,y);var Q=W.scrollLeft,U=W.scrollTop;M+=U-(q=Math.max(0,Math.min(U+q/J,W.scrollHeight-L/J+Z))),_+=Q-(z=Math.max(0,Math.min(Q+z/G,W.scrollWidth-V/G+X)))}F.push({el:W,top:q,left:z})}return F};function l(e){return e===Object(e)&&0!==Object.keys(e).length}function u(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var a=e.el,i=e.top,c=e.left;a.scroll&&n?a.scroll({top:i,left:c,behavior:t}):(a.scrollTop=i,a.scrollLeft=c)}))}function s(e){return!1===e?{block:"end",inline:"nearest"}:l(e)?e:{block:"start",inline:"nearest"}}function d(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(l(t)&&"function"===typeof t.behavior)return t.behavior(n?o(e,t):[]);if(n){var a=s(t);return u(o(e,a),a.behavior)}}t["a"]=d},jfCG:function(e,t,n){e.exports={"design-config-interactive":"design-config-interactive___NrbA-"}}}]);