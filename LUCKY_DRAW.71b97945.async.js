(self["webpackChunkcreate_chart"]=self["webpackChunkcreate_chart"]||[]).push([[8046],{54868:function(e){e.exports={"component-other-lucky-draw":"component-other-lucky-draw___1Kj5c","component-other-lucky-draw-main":"component-other-lucky-draw-main___3jAzo","component-other-lucky-draw-button-common":"component-other-lucky-draw-button-common___2dzrp","component-other-lucky-draw-button-1":"component-other-lucky-draw-button-1___1hfrf","component-other-lucky-draw-button-2":"component-other-lucky-draw-button-2___1FTXg"}},16509:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return N}});var t=o(39428),r=o(3182),c=o(11849),l=o(67294),i=o(96486),a=o(94184),u=o.n(a),s=o(28216),d=o(16964),h=o(94610),g=o(69421),p=o(83488),f=o(9101),m=o(59563),b=o(8144),y=o(54868),x=o.n(y),k=o(85893),v=b.ZP.themeNameList,C=b.ZP.getThemeColorList(v[0]),j=b.ZP.getThemeColorList(v[1]),Z=function(e){var n=e.children,o=e.onClick,t=e.size,r=e.style,i=e.color,a=(0,l.useMemo)((function(){return.2*t}),[t]);return(0,k.jsx)("div",{className:u()(x()["component-other-lucky-draw-button-common"],x()["component-other-lucky-draw-button-1"]),style:(0,c.Z)((0,c.Z)({},r),{},{width:a,height:a,"--component-other-lucky-draw-button-color":i,"--component-other-lucky-draw-button-size":.2*a+"px"}),onClick:o,children:n})},w=function(e){var n=e.children,o=e.onClick,t=e.size,r=e.style,i=e.color,a=(0,l.useMemo)((function(){return.2*t}),[t]);return(0,k.jsx)("div",{className:u()(x()["component-other-lucky-draw-button-common"],x()["component-other-lucky-draw-button-2"]),style:(0,c.Z)((0,c.Z)({},r),{},{width:a,height:a,"--component-other-lucky-draw-button-color":i,"--component-other-lucky-draw-button-size":.2*a+"px"}),onClick:o,children:n})},_={custom_1:Z,custom_2:w},K={custom_1:{value:[{padding:"12px",background:C[0]},{padding:"6px",background:C[1]},{background:C[2]}]},custom_2:{value:[{padding:"12px",background:j[0]},{padding:"6px",background:j[1]},{background:C[2]}]}},z=18,S=p.Z.getRgbaString,F=function(e){var n=e.className,o=e.style,a=e.value,s=e.global,p=e.children,b=e.wrapper,y=e.componentBorder,v=y.width,C=y.padding,j=s.screenType,Z=a.id,w=a.config,F=w.options,M=w.style,N=M.border,D=M.width,L=M.height,R=F.condition,T=F.global,q=T.style,A=T.config,O=F.buttons,P=F.prizes,B=F.blocks,V=A.stop,I=A.speed,W=(0,l.useRef)((0,i.uniqueId)(m.q)),U=(0,l.useRef)(),Y=(0,l.useRef)(!1),E=(0,h.Co)({component:a,global:s}),G=E.request,X=E.syncInteractiveAction,$=E.linkageMethod,H=E.getValue,J=E.requestUrl,Q=E.componentFilter,ee=E.value,ne=void 0===ee?[]:ee,oe=E.componentFilterMap,te=E.onCondition,re=(0,h.VB)(".".concat(W.current),{width:D,height:L},[D,L,v,C]),ce=(0,l.useMemo)((function(){return Math.min(re.width,re.height)}),[re]),le=(0,h.kY)(te,j),ie=le.onCondition,ae=le.style,ue=le.className,se=(0,l.useMemo)((function(){return f.ZP.getFieldMapValue(ne,{map:oe})}),[ne,oe]),de=(0,l.useMemo)((function(){return u()(n,x()["component-other-lucky-draw"],ue)}),[n,ue]),he=(0,l.useMemo)((function(){var e=100/se.length,n=P.config,o=ce/2-z,t=.4*o,r=.4*o,l=n.length;return se.map((function(o,a){var u=o.img,s=o.title,d=o.range,h=a%l,g=n[h].background;return{range:d||e,background:S(g),fonts:[(0,c.Z)((0,c.Z)({text:s,top:"45%"},(0,i.omit)(q,["background"])),{},{fontStyle:q.fontFamily,fontColor:S(q.color)})],imgs:u?[{src:u,width:t,height:r,top:"5%"}]:[]}}))}),[se,P,q,ce]),ge=(0,l.useCallback)((function(){$("click",{})}),[$]),pe=(0,l.useCallback)((function(){var e,n;Y.current||(null===(e=U.current)||void 0===e||null===(n=e.play)||void 0===n||n.call(e),setTimeout((function(){var e,n;null===(e=U.current)||void 0===e||null===(n=e.stop)||void 0===n||n.call(e)}),V))}),[V]),fe=(0,l.useCallback)((function(){Y.current=!0,X("click",{})}),[X]),me=(0,l.useCallback)(function(){var e=(0,r.Z)((0,t.Z)().mark((function e(n){var o,r,c;return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Y.current=!1,o=n.fonts,r=n.imgs,c=n.range,X("end",{title:(0,i.get)(o,"0.text"),img:(0,i.get)(r,"0.src"),range:c});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[X]),be=_[O.type];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:de,style:(0,i.merge)(o,ae),id:W.current,onClick:ge,children:(0,k.jsxs)(b,{border:N,children:[p,(0,k.jsxs)("div",{className:u()(W.current,"w-100 h-100 pos-ab",x()["component-other-lucky-draw-main"]),children:[(0,k.jsx)(d.rD,{width:ce,height:ce,ref:U,defaultStyle:{wordWrap:!0,lineClamp:1/0,background:S(q.background)},defaultConfig:{speed:I},prizes:he,blocks:K[B.type].value,onEnd:me,onStart:fe}),!!be&&(0,k.jsx)(be,{size:ce,onClick:pe,color:S(O.color),style:(0,c.Z)((0,c.Z)({},(0,i.pick)(O.textStyle,["fontWeight","fontFamily"])),{},{fontSize:O.textStyle.fontSize+"px",color:S(O.textStyle.color)}),children:O.content})]})]})}),(0,k.jsx)(g.Z,{id:Z,url:J,reFetchData:G,reGetValue:H,reCondition:ie,componentFilter:Q,componentCondition:R})]})},M=F;M.id=m.q;var N=(0,s.$j)((function(e){return{componentBorder:(0,i.get)(e,"global.screenData.config.attr.componentBorder")}}),(function(){return{}}))(M)},20278:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return N}});var t=o(86582),r=o(11849),c=o(32059),l=o(69610),i=o(54941),a=o(81306),u=o(80017),s=o(67294),d=o(68628),h=o(96486),g=o(66656),p=o(35931),f=o(83488),m=o(13631),b=o(50962),y=o(79837),x=o(773),k=o(75292),v=o(28832),C=o(80585),j=o(96563),Z=o(80856),w=o(8144),_=o(89426),K=o(85893),z=function(e){var n=e.value,o=e.onChange,t=(0,s.useCallback)((function(e){o({config:{options:{condition:e}}})}),[o]);return(0,K.jsx)(_.Z,{value:n,onChange:t})},S=z,F=m.Z.Item,M=function(e){(0,a.Z)(o,e);var n=(0,u.Z)(o);function o(){var e;(0,l.Z)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),e.onKeyChange=function(n,o){e.props.onChange({config:{options:(0,c.Z)({},n,o)}})},e}return(0,i.Z)(o,[{key:"render",value:function(){var e=this,n=this.props.value,o=n.config.options,c=o.global,l=o.buttons,i=o.prizes,a=o.blocks,u=o.condition;return(0,K.jsx)(p.Z,{items:[{label:(0,K.jsx)(p.O,{children:"\u5168\u5c40\u6837\u5f0f"}),children:(0,K.jsxs)(m.Z,{level:1,children:[(0,K.jsx)(F,{label:"\u80cc\u666f\u8272",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(f.D,{value:c.style.background,onChange:function(n){e.onKeyChange("global",{style:{background:n}})}})})}),(0,K.jsx)(F,{label:"\u65cb\u8f6c\u901f\u5ea6",placeholder:(0,K.jsx)(C.Z,{title:"\u5efa\u8bae\u914d\u7f6e\u8303\u56f4 10 ~ 30",children:(0,K.jsx)(d.Z,{})}),children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(v.Z,{value:c.config.speed,onChange:function(n){e.onKeyChange("global",{config:{speed:n}})}})})}),(0,K.jsx)(F,{label:"\u62bd\u5956\u65f6\u95f4",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(v.Z,{value:c.config.stop,onChange:function(n){e.onKeyChange("global",{config:{stop:n}})}})})}),(0,K.jsx)(b.u,{child:{header:"\u6587\u672c",key:"textStyle"},children:(0,K.jsx)(x.g,{value:c.style,onChange:function(n){e.onKeyChange("global",{style:(0,r.Z)({},n)})}})})]}),key:"1"},{label:(0,K.jsx)(p.O,{children:"\u6309\u94ae"}),children:(0,K.jsxs)(m.Z,{level:1,children:[(0,K.jsx)(F,{label:"\u7c7b\u578b",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(g.Z,{className:"w-100",value:l.type,onChange:function(n){e.onKeyChange("buttons",{type:n})},options:[{label:"\u6837\u5f0f\u4e00",value:"custom_1"},{label:"\u6837\u5f0f\u4e8c",value:"custom_2"}]})})}),(0,K.jsx)(F,{label:"\u989c\u8272",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(f.D,{value:l.color,onChange:function(n){e.onKeyChange("buttons",{color:n})}})})}),(0,K.jsx)(F,{label:"\u6587\u6848",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(j.Z,{value:l.content,onChange:function(n){e.onKeyChange("buttons",{content:n})}})})}),(0,K.jsx)(b.u,{child:{header:"\u6587\u672c",key:"textStyle"},children:(0,K.jsx)(x.g,{value:l.textStyle,onChange:function(n){e.onKeyChange("buttons",{textStyle:(0,r.Z)({},n)})}})})]}),key:"2"},{label:(0,K.jsx)(p.O,{children:"\u80cc\u666f"}),children:(0,K.jsx)(m.Z,{level:1,children:(0,K.jsx)(F,{label:"\u7c7b\u578b",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(g.Z,{className:"w-100",value:a.type,onChange:function(n){e.onKeyChange("blocks",{type:n})},options:[{label:"\u6837\u5f0f\u4e00",value:"custom_1"},{label:"\u6837\u5f0f\u4e8c",value:"custom_2"}]})})})}),key:"3"},{label:(0,K.jsx)(p.O,{children:"\u5956\u54c1"}),children:(0,K.jsx)(m.Z,{level:1,children:(0,K.jsx)(k.Z,{onAdd:function(){var n={background:w.ZP.generateNextColor4CurrentTheme(i.config.length)},o=[].concat((0,t.Z)(i.config),[n]);e.onKeyChange("prizes",{config:o})},onRemove:function(n){var o=(0,t.Z)(i.config);o.splice(n,1),e.onKeyChange("prizes",{config:o})},counter:i.config.length,max:Z.Z.getChartSeriesCounter("LUCKY_DRAW"),renderContent:function(n){var o=i.config[n].background;return(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(F,{label:"\u80cc\u666f\u8272",children:(0,K.jsx)(y.Z,{children:(0,K.jsx)(f.D,{value:o,onChange:function(o){var r=(0,t.Z)(i.config);r.splice(n,1,(0,h.merge)(r[n],{background:o})),e.onKeyChange("prizes",{config:r})}})})})})},buttonLabel:"\u65b0\u589e\u5956\u54c1",seriesLabel:function(e){return"\u5956\u54c1".concat(e+1)}})}),key:"4"},{label:(0,K.jsx)(p.O,{children:"\u6761\u4ef6"}),children:(0,K.jsx)(m.Z,{level:1,children:(0,K.jsx)(S,{value:u,onChange:this.onKeyChange.bind(null,"condition")})}),key:"5"}]})}}]),o}(s.Component),N=M}}]);